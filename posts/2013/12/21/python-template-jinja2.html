<!DOCTYPE html>
<html lang="en">

<!--[if IE 8]> <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<head>
    <meta name="google-site-verification" content="SzE6WCs23qFevgBzRIuG9vcfLU0lW_Vd5hFT-cJOLBE" />
    <title>Python模板-Jinja2</title>
    <meta charset="utf-8" />
    <meta name="description" content="">
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

        <link rel="shortcut icon" href="/favicon.ico"/>
        <link rel="stylesheet" href="/theme/css/styles.css" media="all" />
        <link rel="stylesheet" href="/theme/css/ui.totop.css" media="all" />

        <!--
        <link href='http://fonts.googleapis.com/css?family=Gentium+Basic:400,700,400italic,700italic|Gentium+Book+Basic:400,700|PT+Sans+Narrow|Source+Code+Pro' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="/theme/css/normalize.css" media="all" />
        -->

        <link rel="stylesheet" href="/theme/css/font-awesome.min.css">
        <!--[if IE 7]>
            <link rel="stylesheet" href="/theme/css/font-awesome-ie7.min.css">
        <![endif]-->

        <link href="/" type="application/atom+xml" rel="alternate" title="wklken's blog ATOM Feed" />
        <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="wklken's blog RSS Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie.css"/>
                <script src="/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie6.css"/><![endif]-->

<script src="/theme/js/jquery.ui.totop.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $().UItoTop({ easingType: 'easeOutQuart' });
    });
</script>

</head>

<body id="index" class="home">
    <div id="page" class="row">
        <div class="large-8 large-centered columns">

        <header id="header">
            <div class="constraint">
                <div class="o"> 
                    <a href="/"><h1 class="banner">Wklken <span class="blue"> Python</span></h1></a>

                <div class="social">
                            <a href="https://github.com/wklken" target='_blank'><i class="icon-github-sign icon-2x"></i></a>
                            <a href="http://weibo.com/wklken" target='_blank'><i class="icon-weibo icon-2x"></i></a>
                            <a href="mailto:wklken@yeah.net"><i class="icon-envelope icon-2x"></i></a>
                            <a href="/feed.xml" target='_blank'><i class="icon-rss-sign icon-2x"></i></a>
                </div>
                <div class="nav">
                            <a href="/">首页</a>
                            <a href="/categories.html">分类</a>
                            <a href="/archives.html">归档</a>
                            <a href="/pages/projects.html">项目</a>
                            <a href="/pages/tools.html">工具</a>
                            <a href="/pages/books.html">书单</a>
                            <a href="/pages/aboutme.html">关于</a>

                </div>

                </div>
            </div>
        </header><!-- /#banner -->

        <section id="main">

<article id="article">
    <section id="header">
        <!--
        <div class="meta">2013年12月21日</div>
        <h1 id="title"> Python模板-Jinja2 </h1>
        -->
        <div class="meta"> &nbsp; </div>
        <h1> Python模板-Jinja2 </h1>
    </section>
    <section id="content">
        <p><img alt="jinja" src="/imgs/python/jinja.png" /></p>
<p>Jinja2的一些使用摘要</p>
<p>Jinja2作为flask的默认页面模板，感觉蛮强大的，可适用于各种模板类相关的项目</p>
<p>特别是模板继承，写页面很舒服</p>
<hr />
<h3>资源</h3>
<p>文档 http://jinja.pocoo.org/docs/</p>
<h3>安装</h3>
<div class="codehilite"><pre><span class="n">sudo</span> <span class="n">easy_install</span> <span class="n">jinja2</span>
<span class="n">sudo</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">jinja2</span>
</pre></div>


<h3>终端版helloworld</h3>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">from</span> <span class="n">jinja2</span> <span class="n">import</span> <span class="n">Template</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="err">&#39;</span><span class="n">Hello</span> <span class="p">{{</span> <span class="n">name</span> <span class="p">}}</span><span class="o">!</span><span class="err">&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">template</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="err">&#39;</span><span class="n">World</span><span class="err">&#39;</span><span class="p">)</span>
<span class="n">u</span><span class="err">&#39;</span><span class="n">Hello</span> <span class="n">World</span><span class="o">!</span><span class="err">&#39;</span>
</pre></div>


<h3>{%和{{</h3>
<div class="codehilite"><pre><span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;navigation&quot;</span><span class="nt">&gt;</span>
    {% for item in navigation %}
        <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{ item.href }}&quot;</span><span class="nt">&gt;</span>{{ item.caption }}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    {% endfor %}
    <span class="nt">&lt;/ul&gt;</span>

    <span class="nt">&lt;h1&gt;</span>My Webpage<span class="nt">&lt;/h1&gt;</span>
    {{ a_variable }}
<span class="nt">&lt;/body&gt;</span>
</pre></div>


<p>{% 用于执行语句</p>
<p>{{ 输出语句结果到模板</p>
<p>{{}}中的运算</p>
<div class="codehilite"><pre><span class="p">{{</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="mi">3</span> <span class="o">-</span> <span class="mi">2</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">}}</span> <span class="n">is</span> <span class="p">{{</span> <span class="mf">0.5</span> <span class="p">}}.</span>
<span class="p">{{</span> <span class="mi">20</span> <span class="c1">// 7 }} is 2</span>
<span class="p">{{</span> <span class="mi">11</span> <span class="o">%</span> <span class="mi">7</span> <span class="p">}}</span> <span class="n">is</span> <span class="mi">4</span>
<span class="p">{{</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span> <span class="p">}}</span> <span class="n">would</span> <span class="k">return</span> <span class="mi">4</span>
<span class="p">{{</span> <span class="sc">&#39;=&#39;</span> <span class="o">*</span> <span class="mi">80</span> <span class="p">}}</span>
<span class="p">{{</span> <span class="mi">2</span><span class="o">**</span><span class="mi">3</span> <span class="p">}}</span>
</pre></div>


<h3>变量</h3>
<div class="codehilite"><pre><span class="err">变量输出</span> <span class="o">-</span> <span class="err">获取属性的方法，都可以</span>
<span class="p">{{</span> <span class="n">foo</span><span class="p">.</span><span class="n">bar</span> <span class="p">}}</span>
<span class="cp"># 查属性 - 查子元素 - 没有报错</span>

<span class="p">{{</span> <span class="n">foo</span><span class="p">[</span><span class="err">&#39;</span><span class="n">bar</span><span class="err">&#39;</span><span class="p">]</span> <span class="p">}}</span>
<span class="cp"># 查子元素 - 查属性 - 没有报错</span>

<span class="err">变量赋值</span>
<span class="p">{</span><span class="o">%</span> <span class="n">set</span> <span class="n">navigation</span> <span class="o">=</span> <span class="p">[(</span><span class="err">&#39;</span><span class="n">index</span><span class="p">.</span><span class="n">html</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">Index</span><span class="err">&#39;</span><span class="p">),</span> <span class="p">(</span><span class="err">&#39;</span><span class="n">about</span><span class="p">.</span><span class="n">html</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">About</span><span class="err">&#39;</span><span class="p">)]</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">set</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">call_something</span><span class="p">()</span> <span class="o">%</span><span class="p">}</span>
</pre></div>


<h3>注释</h3>
<div class="codehilite"><pre><span class="p">{</span><span class="err">#</span> <span class="n">note</span><span class="o">:</span> <span class="n">disabled</span> <span class="n">template</span> <span class="n">because</span> <span class="n">we</span> <span class="n">no</span> <span class="n">longer</span> <span class="n">use</span> <span class="n">this</span>
    <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">user</span> <span class="n">in</span> <span class="n">users</span> <span class="o">%</span><span class="p">}</span>
        <span class="p">...</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
<span class="cp">#}</span>
</pre></div>


<h3>空格控制</h3>
<div class="codehilite"><pre><span class="nt">&lt;div&gt;</span>
    {% if True %}
        yay
    {% endif %}
<span class="nt">&lt;/div&gt;</span>
</pre></div>


<p>默认，会执行 trim_blocks and lstrip_blocks</p>
<p>移除空格</p>
<div class="codehilite"><pre><span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">item</span> <span class="n">in</span> <span class="n">seq</span> <span class="o">-%</span><span class="p">}</span>
    <span class="p">{{</span> <span class="n">item</span> <span class="p">}}</span>
<span class="p">{</span><span class="o">%-</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>

<span class="n">seq</span> <span class="o">=</span> <span class="mi">1</span> <span class="n">to</span> <span class="mi">9</span>
<span class="err">得到</span> <span class="mi">123456789</span>
</pre></div>


<h3>Escaping</h3>
<p>简单的</p>
<div class="codehilite"><pre><span class="p">{{</span> <span class="err">&#39;</span><span class="p">{{</span><span class="err">&#39;</span> <span class="p">}}</span>
</pre></div>


<p>块</p>
<div class="codehilite"><pre><span class="p">{</span><span class="o">%</span> <span class="nb">raw</span> <span class="o">%</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
    <span class="p">{</span><span class="o">%</span> <span class="nb">for</span> <span class="n">item</span> <span class="k">in</span> <span class="nx">seq</span> <span class="o">%</span><span class="p">}</span>
        <span class="o">&lt;</span><span class="nx">li</span><span class="o">&gt;</span><span class="p">{{</span> <span class="nb">item</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="nx">li</span><span class="o">&gt;</span>
    <span class="p">{</span><span class="o">%</span> <span class="nx">endfor</span> <span class="o">%</span><span class="p">}</span>
    <span class="o">&lt;/</span><span class="nx">ul</span><span class="o">&gt;</span>
<span class="p">{</span><span class="o">%</span> <span class="nx">endraw</span> <span class="o">%</span><span class="p">}</span>
</pre></div>


<h3>if分支判断</h3>
<div class="codehilite"><pre><span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">loop</span><span class="p">.</span><span class="n">index</span> <span class="n">is</span> <span class="n">divisibleby</span> <span class="mi">3</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">loop</span><span class="p">.</span><span class="n">index</span> <span class="n">is</span> <span class="n">divisibleby</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">%</span><span class="p">}</span>


<span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">kenny</span><span class="p">.</span><span class="n">sick</span> <span class="o">%</span><span class="p">}</span>
    <span class="n">Kenny</span> <span class="n">is</span> <span class="n">sick</span><span class="p">.</span>
<span class="p">{</span><span class="o">%</span> <span class="n">elif</span> <span class="n">kenny</span><span class="p">.</span><span class="n">dead</span> <span class="o">%</span><span class="p">}</span>
    <span class="n">You</span> <span class="n">killed</span> <span class="n">Kenny</span><span class="o">!</span>  <span class="n">You</span> <span class="n">bastard</span><span class="o">!!!</span>
<span class="p">{</span><span class="o">%</span> <span class="k">else</span> <span class="o">%</span><span class="p">}</span>
    <span class="n">Kenny</span> <span class="n">looks</span> <span class="n">okay</span> <span class="o">---</span> <span class="n">so</span> <span class="n">far</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>
</pre></div>


<p>可用的条件操作符</p>
<div class="codehilite"><pre><span class="o">==</span>  <span class="n">Compares</span> <span class="n">two</span> <span class="n">objects</span> <span class="k">for</span> <span class="n">equality</span><span class="p">.</span>
<span class="o">!=</span>  <span class="n">Compares</span> <span class="n">two</span> <span class="n">objects</span> <span class="k">for</span> <span class="n">inequality</span><span class="p">.</span>
<span class="o">&gt;</span>   <span class="nb">true</span> <span class="k">if</span> <span class="n">the</span> <span class="n">left</span> <span class="n">hand</span> <span class="n">side</span> <span class="n">is</span> <span class="n">greater</span> <span class="n">than</span> <span class="n">the</span> <span class="n">right</span> <span class="n">hand</span> <span class="n">side</span><span class="p">.</span>
<span class="o">&gt;=</span>  <span class="nb">true</span> <span class="k">if</span> <span class="n">the</span> <span class="n">left</span> <span class="n">hand</span> <span class="n">side</span> <span class="n">is</span> <span class="n">greater</span> <span class="n">or</span> <span class="n">equal</span> <span class="n">to</span> <span class="n">the</span> <span class="n">right</span> <span class="n">hand</span> <span class="n">side</span><span class="p">.</span>
<span class="o">&lt;</span>   <span class="nb">true</span> <span class="k">if</span> <span class="n">the</span> <span class="n">left</span> <span class="n">hand</span> <span class="n">side</span> <span class="n">is</span> <span class="n">lower</span> <span class="n">than</span> <span class="n">the</span> <span class="n">right</span> <span class="n">hand</span> <span class="n">side</span><span class="p">.</span>
<span class="o">&lt;=</span>  <span class="nb">true</span> <span class="k">if</span> <span class="n">the</span> <span class="n">left</span> <span class="n">hand</span> <span class="n">side</span> <span class="n">is</span> <span class="n">lower</span> <span class="n">or</span> <span class="n">equal</span> <span class="n">to</span> <span class="n">the</span> <span class="n">right</span> <span class="n">hand</span> <span class="n">side</span><span class="p">.</span>
</pre></div>


<p>逻辑连接符</p>
<div class="codehilite"><pre><span class="n">and</span>     <span class="n">Return</span> <span class="nb">true</span> <span class="k">if</span> <span class="n">the</span> <span class="n">left</span> <span class="n">and</span> <span class="n">the</span> <span class="n">right</span> <span class="n">operand</span> <span class="n">is</span> <span class="nb">true</span><span class="p">.</span>
<span class="n">or</span>      <span class="n">Return</span> <span class="nb">true</span> <span class="k">if</span> <span class="n">the</span> <span class="n">left</span> <span class="n">or</span> <span class="n">the</span> <span class="n">right</span> <span class="n">operand</span> <span class="n">is</span> <span class="nb">true</span><span class="p">.</span>
<span class="n">not</span>     <span class="n">negate</span> <span class="n">a</span> <span class="n">statement</span> <span class="p">(</span><span class="n">see</span> <span class="n">below</span><span class="p">).</span>
<span class="p">(</span><span class="n">expr</span><span class="p">)</span>  <span class="n">group</span> <span class="n">an</span> <span class="n">expression</span><span class="p">.</span>
</pre></div>


<p>内置测试列表 http://jinja.pocoo.org/docs/templates/#builtin-tests</p>
<div class="codehilite"><pre><span class="x">callable(object)</span>
<span class="x">defined(value)</span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">variable</span> <span class="k">is</span> <span class="nf">defined</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            value of variable: </span><span class="cp">{{</span> <span class="nv">variable</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            variable is not defined</span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">divisibleby(value, num)</span>
<span class="x">escaped(value)</span>
<span class="x">even(value)</span>
<span class="x">iterable(value)</span>
<span class="x">lower(value)</span>
<span class="x">mapping(value)</span>
<span class="x">none(value)</span>
<span class="x">number(value)</span>
<span class="x">odd(value)</span>
<span class="x">sameas(value, other)</span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">foo.attribute</span> <span class="k">is</span> <span class="nf">sameas</span> <span class="kp">false</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        the foo attribute really is the `False` singleton</span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">sequence(value)</span>
<span class="x">string(value)</span>
<span class="x">undefined(value)</span>
<span class="x">upper(value)</span>
</pre></div>


<h3>for循环</h3>
<div class="codehilite"><pre><span class="nt">&lt;h1&gt;</span>Members<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;ul&gt;</span>
{% for user in users %}
<span class="nt">&lt;li&gt;</span>{{ user.username|e }}<span class="nt">&lt;/li&gt;</span>
{% endfor %}
<span class="nt">&lt;/ul&gt;</span>

<span class="nt">&lt;ul&gt;</span>
{% for user in users %}
    <span class="nt">&lt;li&gt;</span>{{ user.username|e }}<span class="nt">&lt;/li&gt;</span>
{% else %}
    <span class="nt">&lt;li&gt;&lt;em&gt;</span>no users found<span class="nt">&lt;/em&gt;&lt;/li&gt;</span>
{% endfor %}
<span class="nt">&lt;/ul&gt;</span>
</pre></div>


<p>循环体中可用变量</p>
<div class="codehilite"><pre><span class="nx">Variable</span>        <span class="nx">Description</span>
<span class="nx">loop</span><span class="p">.</span><span class="nx">index</span>      <span class="nx">The</span> <span class="nx">current</span> <span class="nx">iteration</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">loop</span><span class="p">.</span> <span class="p">(</span><span class="mi">1</span> <span class="nx">indexed</span><span class="p">)</span>
<span class="nx">loop</span><span class="p">.</span><span class="nx">index0</span>     <span class="nx">The</span> <span class="nx">current</span> <span class="nx">iteration</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">loop</span><span class="p">.</span> <span class="p">(</span><span class="mi">0</span> <span class="nx">indexed</span><span class="p">)</span>
<span class="nx">loop</span><span class="p">.</span><span class="nx">revindex</span>   <span class="nx">The</span> <span class="nx">number</span> <span class="nx">of</span> <span class="nx">iterations</span> <span class="nx">from</span> <span class="nx">the</span> <span class="nx">end</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">loop</span> <span class="p">(</span><span class="mi">1</span> <span class="nx">indexed</span><span class="p">)</span>
<span class="nx">loop</span><span class="p">.</span><span class="nx">revindex0</span>  <span class="nx">The</span> <span class="nx">number</span> <span class="nx">of</span> <span class="nx">iterations</span> <span class="nx">from</span> <span class="nx">the</span> <span class="nx">end</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">loop</span> <span class="p">(</span><span class="mi">0</span> <span class="nx">indexed</span><span class="p">)</span>
<span class="nx">loop</span><span class="p">.</span><span class="nx">first</span>      <span class="nx">True</span> <span class="k">if</span> <span class="nx">first</span> <span class="nx">iteration</span><span class="p">.</span>
<span class="nx">loop</span><span class="p">.</span><span class="nx">last</span>       <span class="nx">True</span> <span class="k">if</span> <span class="nx">last</span> <span class="nx">iteration</span><span class="p">.</span>
<span class="nx">loop</span><span class="p">.</span><span class="nx">length</span>     <span class="nx">The</span> <span class="nx">number</span> <span class="nx">of</span> <span class="nx">items</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">sequence</span><span class="p">.</span>
<span class="nx">loop</span><span class="p">.</span><span class="nx">cycle</span>      <span class="nx">A</span> <span class="nx">helper</span> <span class="kd">function</span> <span class="nx">to</span> <span class="nx">cycle</span> <span class="nx">between</span> <span class="nx">a</span> <span class="nx">list</span> <span class="nx">of</span> <span class="nx">sequences</span><span class="p">.</span> <span class="nx">See</span> <span class="nx">the</span> <span class="nx">explanation</span> <span class="nx">below</span><span class="p">.</span>
<span class="nx">loop</span><span class="p">.</span><span class="nx">depth</span>      <span class="nx">Indicates</span> <span class="nx">how</span> <span class="nx">deep</span> <span class="k">in</span> <span class="nx">deep</span> <span class="k">in</span> <span class="nx">a</span> <span class="nx">recursive</span> <span class="nx">loop</span> <span class="nx">the</span> <span class="nx">rendering</span> <span class="nx">currently</span> <span class="nx">is</span><span class="p">.</span> <span class="nx">Starts</span> <span class="nx">at</span> <span class="nx">level</span> <span class="mi">1</span>
<span class="nx">loop</span><span class="p">.</span><span class="nx">depth0</span>     <span class="nx">Indicates</span> <span class="nx">how</span> <span class="nx">deep</span> <span class="k">in</span> <span class="nx">deep</span> <span class="k">in</span> <span class="nx">a</span> <span class="nx">recursive</span> <span class="nx">loop</span> <span class="nx">the</span> <span class="nx">rendering</span> <span class="nx">currently</span> <span class="nx">is</span><span class="p">.</span> <span class="nx">Starts</span> <span class="nx">at</span> <span class="nx">level</span> <span class="mi">0</span>
</pre></div>


<h3>filters</h3>
<div class="codehilite"><pre><span class="p">{{</span> <span class="n">name</span><span class="o">|</span><span class="n">striptags</span><span class="o">|</span><span class="n">title</span> <span class="p">}}</span>
</pre></div>


<p>一系列方法
内置filter列表 http://jinja.pocoo.org/docs/templates/#builtin-filters</p>
<div class="codehilite"><pre><span class="n">abs</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
<span class="n">attr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>   <span class="n">foo</span><span class="o">|</span><span class="n">attr</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">)</span> <span class="n">works</span> <span class="n">like</span> <span class="n">foo</span><span class="p">[</span><span class="s">&quot;bar&quot;</span><span class="p">]</span>
                  <span class="n">just</span> <span class="n">that</span> <span class="n">always</span> <span class="n">an</span> <span class="n">attribute</span> <span class="n">is</span> <span class="n">returned</span> <span class="n">and</span> <span class="n">items</span> <span class="n">are</span> <span class="n">not</span> <span class="n">looked</span> <span class="n">up</span>
<span class="n">batch</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">linecount</span><span class="p">,</span> <span class="n">fill_with</span><span class="o">=</span><span class="n">None</span><span class="p">)</span>
<span class="n">capitalize</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">center</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
<span class="k">default</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="n">u</span><span class="err">&#39;&#39;</span><span class="p">,</span> <span class="n">boolean</span><span class="o">=</span><span class="n">False</span><span class="p">)</span>
                <span class="p">{{</span> <span class="n">my_variable</span><span class="o">|</span><span class="k">default</span><span class="p">(</span><span class="err">&#39;</span><span class="n">my_variable</span> <span class="n">is</span> <span class="n">not</span> <span class="n">defined</span><span class="err">&#39;</span><span class="p">)</span> <span class="p">}}</span>
                <span class="p">{{</span> <span class="err">&#39;&#39;</span><span class="o">|</span><span class="k">default</span><span class="p">(</span><span class="err">&#39;</span><span class="n">the</span> <span class="n">string</span> <span class="n">was</span> <span class="n">empty</span><span class="err">&#39;</span><span class="p">,</span> <span class="nb">true</span><span class="p">)</span> <span class="p">}}</span> <span class="err">当变量</span><span class="nb">false</span><span class="err">是，用</span><span class="k">default</span><span class="err">替换</span>
<span class="n">dictsort</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">case_sensitive</span><span class="o">=</span><span class="n">False</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="err">&#39;</span><span class="n">key</span><span class="err">&#39;</span><span class="p">)</span>
<span class="n">escape</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">filesizeformat</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">binary</span><span class="o">=</span><span class="n">False</span><span class="p">)</span>
<span class="n">first</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span>  <span class="n">Return</span> <span class="n">the</span> <span class="n">first</span> <span class="n">item</span>
<span class="kt">float</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="k">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">forceescape</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="n">Enforce</span> <span class="n">HTML</span> <span class="n">escaping</span>
<span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="p">{{</span> <span class="s">&quot;%s - %s&quot;</span><span class="o">|</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;Hello?&quot;</span><span class="p">,</span> <span class="s">&quot;Foo!&quot;</span><span class="p">)</span> <span class="p">}}</span>
<span class="n">groupby</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">attribute</span><span class="p">)</span>
<span class="n">indent</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">indentfirst</span><span class="o">=</span><span class="n">False</span><span class="p">)</span>
                <span class="p">{{</span> <span class="n">mytext</span><span class="o">|</span><span class="n">indent</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">true</span><span class="p">)</span> <span class="p">}}</span>
<span class="kt">int</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="k">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">join</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="n">u</span><span class="err">&#39;&#39;</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="n">None</span><span class="p">)</span>
                <span class="p">{{</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span><span class="o">|</span><span class="n">join</span><span class="p">(</span><span class="sc">&#39;|&#39;</span><span class="p">)</span> <span class="p">}}</span>
<span class="n">last</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span>
<span class="n">length</span><span class="p">(</span><span class="n">object</span><span class="p">)</span>
<span class="n">list</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="n">lower</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">map</span><span class="p">()</span>
        <span class="p">{{</span> <span class="n">users</span><span class="o">|</span><span class="n">map</span><span class="p">(</span><span class="n">attribute</span><span class="o">=</span><span class="err">&#39;</span><span class="n">username</span><span class="err">&#39;</span><span class="p">)</span><span class="o">|</span><span class="n">join</span><span class="p">(</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="p">)</span> <span class="p">}}</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="n">False</span><span class="p">)</span>
<span class="n">random</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span>
<span class="n">reject</span><span class="p">()</span> <span class="n">Filters</span> <span class="n">a</span> <span class="n">sequence</span> <span class="n">of</span> <span class="n">objects</span> <span class="n">by</span> <span class="n">appying</span> <span class="n">a</span> <span class="n">test</span>
        <span class="p">{{</span> <span class="n">numbers</span><span class="o">|</span><span class="n">reject</span><span class="p">(</span><span class="s">&quot;odd&quot;</span><span class="p">)</span> <span class="p">}}</span>
<span class="n">rejectattr</span><span class="p">()</span>
        <span class="p">{{</span> <span class="n">users</span><span class="o">|</span><span class="n">rejectattr</span><span class="p">(</span><span class="s">&quot;is_active&quot;</span><span class="p">)</span> <span class="p">}}</span>
        <span class="p">{{</span> <span class="n">users</span><span class="o">|</span><span class="n">rejectattr</span><span class="p">(</span><span class="s">&quot;email&quot;</span><span class="p">,</span> <span class="s">&quot;none&quot;</span><span class="p">)</span> <span class="p">}}</span>
<span class="n">replace</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="n">None</span><span class="p">)</span>
        <span class="p">{{</span> <span class="s">&quot;aaaaargh&quot;</span><span class="o">|</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;d&#39;oh, &quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="p">}}</span>
<span class="n">reverse</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="n">round</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="err">&#39;</span><span class="n">common</span><span class="err">&#39;</span><span class="p">)</span>
        <span class="p">{{</span> <span class="mf">42.55</span><span class="o">|</span><span class="n">round</span> <span class="p">}}</span> <span class="mi">43</span>
        <span class="p">{{</span> <span class="mf">42.55</span><span class="o">|</span><span class="n">round</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">floor</span><span class="err">&#39;</span><span class="p">)</span> <span class="p">}}</span> <span class="mf">42.5</span>
<span class="n">safe</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">automatic</span> <span class="n">escaping</span> <span class="n">enabled</span> <span class="n">this</span> <span class="n">variable</span> <span class="n">will</span> <span class="n">not</span> <span class="n">be</span> <span class="n">escaped</span>
<span class="n">select</span><span class="p">()</span>
        <span class="p">{{</span> <span class="n">numbers</span><span class="o">|</span><span class="n">select</span><span class="p">(</span><span class="s">&quot;odd&quot;</span><span class="p">)</span> <span class="p">}}</span>
<span class="n">selectattr</span><span class="p">()</span>
        <span class="p">{{</span> <span class="n">users</span><span class="o">|</span><span class="n">selectattr</span><span class="p">(</span><span class="s">&quot;is_active&quot;</span><span class="p">)</span> <span class="p">}}</span>
        <span class="p">{{</span> <span class="n">users</span><span class="o">|</span><span class="n">selectattr</span><span class="p">(</span><span class="s">&quot;email&quot;</span><span class="p">,</span> <span class="s">&quot;none&quot;</span><span class="p">)</span> <span class="p">}}</span>
<span class="n">slice</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">slices</span><span class="p">,</span> <span class="n">fill_with</span><span class="o">=</span><span class="n">None</span><span class="p">)</span>
<span class="n">sort</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="n">False</span><span class="p">,</span> <span class="n">case_sensitive</span><span class="o">=</span><span class="n">False</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="n">None</span><span class="p">)</span>
        <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">item</span> <span class="n">in</span> <span class="n">iterable</span><span class="o">|</span><span class="n">sort</span> <span class="o">%</span><span class="p">}</span>
        <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">item</span> <span class="n">in</span> <span class="n">iterable</span><span class="o">|</span><span class="n">sort</span><span class="p">(</span><span class="n">attribute</span><span class="o">=</span><span class="err">&#39;</span><span class="n">date</span><span class="err">&#39;</span><span class="p">)</span> <span class="o">%</span><span class="p">}</span>
<span class="n">string</span><span class="p">(</span><span class="n">object</span><span class="p">)</span>
<span class="n">striptags</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="n">sum</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="n">None</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="nl">Total:</span> <span class="p">{{</span> <span class="n">items</span><span class="o">|</span><span class="n">sum</span><span class="p">(</span><span class="n">attribute</span><span class="o">=</span><span class="err">&#39;</span><span class="n">price</span><span class="err">&#39;</span><span class="p">)</span> <span class="p">}}</span>
<span class="n">title</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">trim</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="n">truncate</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">killwords</span><span class="o">=</span><span class="n">False</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="err">&#39;</span><span class="p">...</span><span class="err">&#39;</span><span class="p">)</span>
        <span class="p">{{</span> <span class="s">&quot;foo bar&quot;</span><span class="o">|</span><span class="n">truncate</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">}}</span>   <span class="s">&quot;foo ...&quot;</span>
        <span class="p">{{</span> <span class="s">&quot;foo bar&quot;</span><span class="o">|</span><span class="n">truncate</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">True</span><span class="p">)</span> <span class="p">}}</span>   <span class="s">&quot;foo b...&quot;</span>
<span class="n">upper</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">urlencode</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="n">urlize</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">trim_url_limit</span><span class="o">=</span><span class="n">None</span><span class="p">,</span> <span class="n">nofollow</span><span class="o">=</span><span class="n">False</span><span class="p">)</span>
<span class="n">wordcount</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">wordwrap</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">79</span><span class="p">,</span> <span class="n">break_long_words</span><span class="o">=</span><span class="n">True</span><span class="p">,</span> <span class="n">wrapstring</span><span class="o">=</span><span class="n">None</span><span class="p">)</span>
<span class="n">xmlattr</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">autospace</span><span class="o">=</span><span class="n">True</span><span class="p">)</span>
</pre></div>


<h3>Macros宏</h3>
<p>创建</p>
<div class="codehilite"><pre><span class="p">{</span><span class="o">%</span> <span class="n">macro</span> <span class="n">input</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="err">&#39;&#39;</span><span class="p">,</span> <span class="n">type</span><span class="o">=</span><span class="err">&#39;</span><span class="n">text</span><span class="err">&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span> <span class="o">-%</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">&quot;{{ type }}&quot;</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;{{ name }}&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s">&quot;{{</span>
        <span class="n">value</span><span class="o">|</span><span class="n">e</span> <span class="p">}}</span><span class="s">&quot; size=&quot;</span><span class="p">{{</span> <span class="n">size</span> <span class="p">}}</span><span class="s">&quot;&gt;</span>
<span class="p">{</span><span class="o">%-</span> <span class="n">endmacro</span> <span class="o">%</span><span class="p">}</span>
</pre></div>


<p>使用</p>
<div class="codehilite"><pre><span class="nt">&lt;p&gt;</span>{{ input(&#39;username&#39;) }}<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>{{ input(&#39;password&#39;, type=&#39;password&#39;) }}<span class="nt">&lt;/p&gt;</span>
</pre></div>


<p>可以在其他模板使用，需要import</p>
<p>定义</p>
<div class="codehilite"><pre><span class="p">{</span><span class="o">%</span> <span class="nx">macro</span> <span class="nb">input</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="k">type</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="p">)</span> <span class="o">-%</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="nb">input</span> <span class="k">type</span><span class="o">=</span><span class="s2">&quot;{{ type }}&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;{{ value|e }}&quot;</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;{{ name }}&quot;</span><span class="o">&gt;</span>
<span class="p">{</span><span class="o">%-</span> <span class="nx">endmacro</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{</span><span class="o">%-</span> <span class="nx">macro</span> <span class="nx">textarea</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="k">rows</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span> <span class="o">-%</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="nx">textarea</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;{{ name }}&quot;</span> <span class="k">rows</span><span class="o">=</span><span class="s2">&quot;{{ rows }}&quot;</span> <span class="n">cols</span><span class="o">=</span><span class="s2">&quot;{{ cols</span>
<span class="s2">        }}&quot;</span><span class="o">&gt;</span><span class="p">{{</span> <span class="nb">value</span><span class="o">|</span><span class="nx">e</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="nx">textarea</span><span class="o">&gt;</span>
<span class="p">{</span><span class="o">%-</span> <span class="nx">endmacro</span> <span class="o">%</span><span class="p">}</span>
</pre></div>


<p>使用</p>
<div class="codehilite"><pre><span class="p">{</span><span class="o">%</span> <span class="k">import</span> <span class="s1">&#39;forms.html&#39;</span> <span class="nx">as</span> <span class="nx">forms</span> <span class="o">%</span><span class="p">}</span>
<span class="o">&lt;</span><span class="nx">dl</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">dt</span><span class="o">&gt;</span><span class="nx">Username</span><span class="o">&lt;/</span><span class="nx">dt</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">dd</span><span class="o">&gt;</span><span class="p">{{</span> <span class="nx">forms.input</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="nx">dd</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">dt</span><span class="o">&gt;</span><span class="nx">Password</span><span class="o">&lt;/</span><span class="nx">dt</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">dd</span><span class="o">&gt;</span><span class="p">{{</span> <span class="nx">forms.input</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="k">type</span><span class="o">=</span><span class="s1">&#39;password&#39;</span><span class="p">)</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="nx">dd</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">dl</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{{</span> <span class="nx">forms.textarea</span><span class="p">(</span><span class="s1">&#39;comment&#39;</span><span class="p">)</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
</pre></div>


<p>或者是</p>
<div class="codehilite"><pre><span class="p">{</span><span class="o">%</span> <span class="n">from</span> <span class="err">&#39;</span><span class="n">forms</span><span class="p">.</span><span class="n">html</span><span class="err">&#39;</span> <span class="n">import</span> <span class="n">input</span> <span class="n">as</span> <span class="n">input_field</span><span class="p">,</span> <span class="n">textarea</span> <span class="o">%</span><span class="p">}</span>
</pre></div>


<p>宏与宏之间的交互</p>
<div class="codehilite"><pre><span class="p">{</span><span class="o">%</span> <span class="nx">macro</span> <span class="nx">render_dialog</span><span class="p">(</span><span class="nb">title</span><span class="p">,</span> <span class="n">class</span><span class="o">=</span><span class="s1">&#39;dialog&#39;</span><span class="p">)</span> <span class="o">-%</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="nb">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;{{ class }}&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="p">{{</span> <span class="nb">title</span> <span class="p">}}</span><span class="o">&lt;/</span><span class="nx">h2</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nb">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;contents&quot;</span><span class="o">&gt;</span>
            <span class="p">{{</span> <span class="nx">caller</span><span class="p">()</span> <span class="p">}}</span>
        <span class="o">&lt;/</span><span class="nb">div</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="nb">div</span><span class="o">&gt;</span>
<span class="p">{</span><span class="o">%-</span> <span class="nx">endmacro</span> <span class="o">%</span><span class="p">}</span>

<span class="p">{</span><span class="o">%</span> <span class="nb">call</span> <span class="nx">render_dialog</span><span class="p">(</span><span class="s1">&#39;Hello World&#39;</span><span class="p">)</span> <span class="o">%</span><span class="p">}</span>
    <span class="nx">This</span> <span class="nx">is</span> <span class="nx">a</span> <span class="nx">simple</span> <span class="nx">dialog</span> <span class="nx">rendered</span> <span class="k">by</span> <span class="nx">using</span> <span class="nx">a</span> <span class="nx">macro</span> <span class="ow">and</span>
    <span class="nx">a</span> <span class="nb">call</span> <span class="nx">block.</span>
<span class="p">{</span><span class="o">%</span> <span class="nx">endcall</span> <span class="o">%</span><span class="p">}</span>
</pre></div>


<h3>模板继承</h3>
<p>父模板</p>
<div class="codehilite"><pre><span class="cp">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot;&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;html</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="cp">{%</span> <span class="k">block</span> <span class="nv">head</span> <span class="cp">%}</span>
    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;style.css&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span> - My Webpage<span class="nt">&lt;/title&gt;</span>
    <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;content&quot;</span><span class="nt">&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;footer&quot;</span><span class="nt">&gt;</span>
        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">footer</span> <span class="cp">%}</span>
        <span class="ni">&amp;copy;</span> Copyright 2008 by <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://domain.invalid/&quot;</span><span class="nt">&gt;</span>you<span class="nt">&lt;/a&gt;</span>.
        <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</pre></div>


<p>子模板</p>
<div class="codehilite"><pre><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;base.html&quot;</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>Index<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">head</span> <span class="cp">%}</span>
    <span class="cp">{{</span> <span class="nb">super</span><span class="o">()</span> <span class="cp">}}</span>
    <span class="nt">&lt;style</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
        .important { color: #336699; }
    <span class="nt">&lt;/style&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
    <span class="nt">&lt;h1&gt;</span>Index<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;important&quot;</span><span class="nt">&gt;</span>
    Welcome on my awesome homepage.
    <span class="nt">&lt;/p&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>


<p>注意，可以有更好的可读性</p>
<div class="codehilite"><pre><span class="cp">{%</span> <span class="k">block</span> <span class="nv">sidebar</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">inner_sidebar</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        ...</span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">endblock</span> <span class="nv">inner_sidebar</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="nv">sidebar</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>


<h3>模板包含include</h3>
<div class="codehilite"><pre><span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="err">&#39;</span><span class="n">header</span><span class="p">.</span><span class="n">html</span><span class="err">&#39;</span> <span class="o">%</span><span class="p">}</span>
    <span class="n">Body</span>
<span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="err">&#39;</span><span class="n">footer</span><span class="p">.</span><span class="n">html</span><span class="err">&#39;</span> <span class="o">%</span><span class="p">}</span>

<span class="cp">#jinja2.2</span>
<span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s">&quot;sidebar.html&quot;</span> <span class="n">ignore</span> <span class="n">missing</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s">&quot;sidebar.html&quot;</span> <span class="n">ignore</span> <span class="n">missing</span> <span class="n">with</span> <span class="n">context</span> <span class="o">%</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">include</span> <span class="s">&quot;sidebar.html&quot;</span> <span class="n">ignore</span> <span class="n">missing</span> <span class="n">without</span> <span class="n">context</span> <span class="o">%</span><span class="p">}</span>
</pre></div>


<h3>其他</h3>
<p>1.一些列表方法</p>
<p>http://jinja.pocoo.org/docs/templates/#list-of-global-functions</p>
<p>2.其他操作符</p>
<div class="codehilite"><pre><span class="n">in</span>      <span class="n">Perform</span> <span class="n">sequence</span> <span class="o">/</span> <span class="n">mapping</span> <span class="n">containment</span> <span class="n">test</span><span class="p">.</span> <span class="n">Returns</span> <span class="nb">true</span> <span class="k">if</span> <span class="n">the</span> <span class="n">left</span> <span class="n">operand</span> <span class="n">is</span> <span class="n">contained</span> <span class="n">in</span> <span class="n">the</span> <span class="n">right</span><span class="p">.</span> <span class="p">{{</span> <span class="mi">1</span> <span class="n">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="p">}}</span> <span class="n">would</span> <span class="k">for</span> <span class="n">example</span> <span class="k">return</span> <span class="nb">true</span><span class="p">.</span>
<span class="n">is</span>      <span class="n">Performs</span> <span class="n">a</span> <span class="n">test</span><span class="p">.</span>
<span class="o">|</span>       <span class="n">Applies</span> <span class="n">a</span> <span class="n">filter</span><span class="p">.</span>
<span class="o">~</span>       <span class="n">Converts</span> <span class="n">all</span> <span class="n">operands</span> <span class="n">into</span> <span class="n">strings</span> <span class="n">and</span> <span class="n">concatenates</span> <span class="n">them</span><span class="p">.</span> <span class="p">{{</span> <span class="s">&quot;Hello &quot;</span> <span class="o">~</span> <span class="n">name</span> <span class="o">~</span> <span class="s">&quot;!&quot;</span> <span class="p">}}</span> <span class="n">would</span> <span class="k">return</span> <span class="p">(</span><span class="n">assuming</span> <span class="n">name</span> <span class="n">is</span> <span class="err">&#39;</span><span class="n">John</span><span class="err">&#39;</span><span class="p">)</span> <span class="n">Hello</span> <span class="n">John</span><span class="o">!</span><span class="p">.</span>
<span class="p">()</span>      <span class="n">Call</span> <span class="n">a</span> <span class="n">callable</span><span class="o">:</span> <span class="p">{{</span> <span class="n">post</span><span class="p">.</span><span class="n">render</span><span class="p">()</span> <span class="p">}}.</span> <span class="n">Inside</span> <span class="n">of</span> <span class="n">the</span> <span class="n">parentheses</span> <span class="n">you</span> <span class="n">can</span> <span class="n">use</span> <span class="n">positional</span> <span class="n">arguments</span> <span class="n">and</span> <span class="n">keyword</span> <span class="n">arguments</span> <span class="n">like</span> <span class="n">in</span> <span class="n">python</span><span class="o">:</span> <span class="p">{{</span> <span class="n">post</span><span class="p">.</span><span class="n">render</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="nb">true</span><span class="p">)</span> <span class="p">}}.</span>
<span class="p">.</span> <span class="o">/</span> <span class="p">[]</span>  <span class="n">Get</span> <span class="n">an</span> <span class="n">attribute</span> <span class="n">of</span> <span class="n">an</span> <span class="n">object</span><span class="p">.</span> <span class="p">(</span><span class="n">See</span> <span class="n">Variables</span><span class="p">)</span>
</pre></div>


<hr />
<p>The end. 未完待续</p>
<p>wklken</p>
<p>http://www.wklken.me</p>
<p>2013-12-21</p>
    </section>

    <section id="copyright">
        <div class="copyright">
            版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" >Creative Commons BY-NC-ND 3.0</a>
        </div>
    </section>

    <section id="comments">

        <div class="comments">
            <h2>Comments !</h2>
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                var disqus_identifier = "/posts/2013/12/21/python-template-jinja2.html";
                (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://wklken.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            </div>
    </section>

</article>
        </section><!--end #main-->

            <footer class="row">
                <div class="large-12 columns">
                    <p>
                            Copyright © 2014 wklken <br>
                            Powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Social Icons by <a href="http://fortawesome.github.io/Font-Awesome/">Font-Awesome</a>.
                    </p>
                </div>
            </footer>

            </div>
        </div>

        <section id="extras" class="body">
        </section><!-- /#extras -->

    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-42275748-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>


<script src="http://upcdn.b0.upaiyun.com/libs/jquery/jquery-1.9.1.min.js"></script>

<script src="/theme/js/instantclick.min.js" data-no-instant></script>
<script data-no-instant>InstantClick.init(50);</script>


</body>
</html>