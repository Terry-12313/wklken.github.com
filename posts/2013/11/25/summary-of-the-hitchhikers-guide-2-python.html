<!DOCTYPE html>
<html lang="en">

<!--[if IE 8]> <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<head>
    <meta name="google-site-verification" content="SzE6WCs23qFevgBzRIuG9vcfLU0lW_Vd5hFT-cJOLBE" />
    <title>[摘要]Python 最佳实践指南</title>
    <meta charset="utf-8" />
    <meta name="description" content="">
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

        <link rel="shortcut icon" href="/favicon.ico"/>
        <link rel="stylesheet" href="/theme/css/styles.css" media="all" />
        <link rel="stylesheet" href="/theme/css/tab.min.css" media="all" />
        <link rel="stylesheet" href="/theme/css/jquery-ui.min.css" media="all" />

        <link rel="stylesheet" href="/theme/css/font-awesome.min.css">
        <!--
        <link rel="stylesheet" href="http://apps.bdimg.com/libs/fontawesome/4.2.0/css/font-awesome.min.css">
        -->
        <!--[if IE 7]>
            <link rel="stylesheet" href="/theme/css/font-awesome-ie7.min.css">
        <![endif]-->

        <link href="/" type="application/atom+xml" rel="alternate" title="wklken's blog ATOM Feed" />
        <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="wklken's blog RSS Feed" />

</head>

<body>
    <div id="page" class="row">
        <div class="large-9 large-centered columns">

        <header id="header">
            <div class="constraint">
                <div class="o">
                    <a href="/"><h1 class="banner">Wklken <span class="blue"> Building </span></h1></a>

                <div class="social">
                            <a href="https://github.com/wklken" target='_blank'><i class="icon-github-sign icon-2x"></i></a>
                            <a href="http://weibo.com/wklken" target='_blank'><i class="icon-weibo icon-2x"></i></a>
                            <a href="mailto:wklken@yeah.net"><i class="icon-envelope icon-2x"></i></a>
                            <a href="http://www.wklken.me/feed.xml" target='_blank'><i class="icon-rss-sign icon-2x"></i></a>
                </div>
                <div class="nav">
                            <a href="/">首页</a>
                            <a href="/categories.html">分类</a>
                            <a href="/archives.html">归档</a>
                            <a href="/pages/projects.html">项目</a>
                            <a href="/pages/aboutme.html">关于</a>

                </div>

                </div>
            </div>
        </header><!-- /#banner -->

        <section id="main">


<article id="article">
    <section id="header">
        <!--
        <div class="meta">2013年11月25日</div>
        <h1 id="title"> [摘要]Python 最佳实践指南 </h1>
        -->
        <div class="meta"> &nbsp; </div>
        <h1> [摘要]Python 最佳实践指南 </h1>
    </section>

        <section id="toc">
            <html><body><div id="toc"><ul><li><a class="toc-href" href="#" title="[摘要]Python 最佳实践指南">[摘要]Python 最佳实践指南</a><ul><li><a class="toc-href" href="#getting-started" title="第零部分 Getting Started">第零部分 Getting Started</a></li><li><a class="toc-href" href="#writing-great-code" title="第一部分 Writing Great Code">第一部分 Writing Great Code</a><ul><li><a class="toc-href" href="#structuring-your-project" title="Structuring Your Project">Structuring Your Project</a></li><li><a class="toc-href" href="#code-style" title="Code Style">Code Style</a><ul><li><a class="toc-href" href="#general-concepts" title="一般概念(General concepts)">一般概念(General concepts)</a></li><li><a class="toc-href" href="#idioms" title="方言(Idioms)">方言(Idioms)</a></li></ul></li><li><a class="toc-href" href="#conventions_1" title="惯例(Conventions)">惯例(Conventions)</a></li><li><a class="toc-href" href="#reading-great-code" title="Reading Great Code">Reading Great Code</a></li><li><a class="toc-href" href="#documentation" title="文档(Documentation)">文档(Documentation)</a></li><li><a class="toc-href" href="#testing-your-code" title="测试你的代码(Testing Your Code)">测试你的代码(Testing Your Code)</a></li><li><a class="toc-href" href="#common-gotchas" title="Common Gotchas(不懂怎么翻...╮(╯▽╰)╭ )">Common Gotchas(不懂怎么翻...╮(╯▽╰)╭ )</a></li><li><a class="toc-href" href="#choosing-a-license" title="选择证书(Choosing a License)">选择证书(Choosing a License)</a></li></ul></li><li><a class="toc-href" href="#scenario-guide_1" title="第二部分 Scenario Guide">第二部分 Scenario Guide</a><ul><li><a class="toc-href" href="#network-applications" title="Network Applications">Network Applications</a></li><li><a class="toc-href" href="#web-applications" title="Web Applications">Web Applications</a></li><li><a class="toc-href" href="#html-scraping" title="HTML Scraping">HTML Scraping</a></li><li><a class="toc-href" href="#command-line-applications" title="Command Line Applications">Command Line Applications</a></li><li><a class="toc-href" href="#gui-applications" title="GUI Applications">GUI Applications</a></li><li><a class="toc-href" href="#databases" title="Databases">Databases</a></li><li><a class="toc-href" href="#networking" title="Networking">Networking</a></li><li><a class="toc-href" href="#systems-administration" title="Systems Administration">Systems Administration</a></li><li><a class="toc-href" href="#continuous-integration" title="Continuous Integration">Continuous Integration</a></li><li><a class="toc-href" href="#speed" title="Speed">Speed</a></li><li><a class="toc-href" href="#scientific-applications" title="Scientific Applications">Scientific Applications</a></li><li><a class="toc-href" href="#image-manipulation" title="Image Manipulation">Image Manipulation</a></li><li><a class="toc-href" href="#xml-parsing" title="XML parsing">XML parsing</a></li></ul></li><li><a class="toc-href" href="#shipping-great-code_1" title="第三部分 Shipping Great Code">第三部分 Shipping Great Code</a></li><li><a class="toc-href" href="#development-environment" title="第四部分 Development Environment">第四部分 Development Environment</a></li><li><a class="toc-href" href="#additional-notes" title="第五部分 Additional Notes">第五部分 Additional Notes</a></li></ul></li></ul></div></body></html>
        </section>
    <section id="content">
        <p>文档地址 <a href="http://docs.python-guide.org/en/latest/">The Hitchhiker's Guide to Python!</a></p>
<p>这份文档</p>
<div class="codehilite"><pre>目标对象：入门后，有一定基础的Pythonista
关键词：最佳实践，Pythonic，各类工具介绍
</pre></div>
<p>粗粗粗略地过了一遍，大体捞了一些东西出来，大段大段英文太费眼了，回头细读在更新进来</p>
<p>浓缩版，20分钟可大体过完，然后根据自己需要去看详细的吧</p>
<p>整体内容还是很不错的，建议细读英文</p>
<p>PS:文档含有巨量的TODO(没写空白着待补充的)，不过但从目录上来看还是很强大滴，相信完善后，会成为一份很牛逼的指南(难度比官方指南高一点点)</p>
<hr/>
<h1 id="getting-started">第零部分 Getting Started</h1>
<p><a href="http://docs.python-guide.org/en/latest/#getting-started">链接</a></p>
<p>不解释，不翻译，自个看....真的没啥(每本入门书籍第一章...)</p>
<hr/>
<h1 id="writing-great-code">第一部分 Writing Great Code</h1>
<h3 id="structuring-your-project">Structuring Your Project</h3>
<p><a href="http://docs.python-guide.org/en/latest/writing/structure/#structuring-your-project">链接</a></p>
<p>import 最佳实践</p>
<p>Very bad</p>
<div class="codehilite"><pre><span class="k">[...]</span>
<span class="err">from</span> <span class="err">modu</span> <span class="err">import</span> <span class="err">*</span>
<span class="k">[...]</span>
<span class="na">x</span> <span class="o">=</span> <span class="s">sqrt(4)  # Is sqrt part of modu? A builtin? Defined above?</span>
</pre></div>
<p>Better</p>
<div class="codehilite"><pre><span class="kn">from</span> <span class="nn">modu</span> <span class="kn">import</span> <span class="n">sqrt</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="c"># sqrt may be part of modu, if not redefined in between</span>
</pre></div>
<p>Best</p>
<div class="codehilite"><pre><span class="kn">import</span> <span class="nn">modu</span>
<span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">modu</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="c"># sqrt is visibly part of modu's namespace</span>
</pre></div>
<p>Python中关于OOP的 <a href="http://docs.python-guide.org/en/latest/writing/structure/#object-oriented-programming">观点</a></p>
<p>Decorators</p>
<div class="codehilite"><pre>def foo():
    # do something

def decorator(func):
    # manipulate func
    return func

foo = decorator(foo)  # Manually decorate

@decorator
def bar():
    # Do something
# bar() is decorated
</pre></div>
<p>动态类型(Dynamic typing)</p>
<p>Avoid using the same variable name for different things.</p>
<p>Bad</p>
<div class="codehilite"><pre>a = 1
a = 'a string'
def a():
    pass  # Do something
</pre></div>
<p>Good</p>
<div class="codehilite"><pre>count = 1
msg = 'a string'
def func():
    pass  # Do something
</pre></div>
<p>It is better to use different names even for things that are related, when they have a different type:</p>
<div class="codehilite"><pre>Bad

items = 'a b c d'  # This is a string...
items = items.split(' ')  # ...becoming a list
items = set(items)  # ...and then a set
</pre></div>
<p>可变和不可变类型(Mutable and immutable types)</p>
<p>字符串拼接最佳实践</p>
<p>Bad</p>
<div class="codehilite"><pre># create a concatenated string from 0 to 19 (e.g. "012..1819")
nums = ""
for n in range(20):
  nums += str(n)   # slow and inefficient
print nums
</pre></div>
<p>Good</p>
<div class="codehilite"><pre># create a concatenated string from 0 to 19 (e.g. "012..1819")
nums = []
for n in range(20):
  nums.append(str(n))
print "".join(nums)  # much more efficient
</pre></div>
<p>Best</p>
<div class="codehilite"><pre># create a concatenated string from 0 to 19 (e.g. "012..1819")
nums = [str(n) for n in range(20)]
print "".join(nums)
</pre></div>
<p>join() is not always best
创建新字符串和修改原有字符串</p>
<div class="codehilite"><pre>foo = 'foo'
bar = 'bar'

foobar = foo + bar  # This is good
foo += 'ooo'  # This is bad, instead you should do:
foo = ''.join([foo, 'ooo'])
</pre></div>
<p>字符串格式化</p>
<div class="codehilite"><pre>foo = 'foo'
bar = 'bar'

foobar = '%s%s' % (foo, bar) # It is OK
foobar = '{0}{1}'.format(foo, bar) # It is better
foobar = '{foo}{bar}'.format(foo=foo, bar=bar) # It is best
</pre></div>
<h3 id="code-style">Code Style</h3>
<p><a href="http://docs.python-guide.org/en/latest/writing/style/#code-style">链接</a></p>
<h4 id="general-concepts">一般概念(General concepts)</h4>
<p>明确的代码</p>
<p>Bad</p>
<div class="codehilite"><pre>def make_complex(*args):
    x, y = args
    return dict(**locals())
</pre></div>
<p>Good</p>
<div class="codehilite"><pre>def make_complex(x, y):
    return {'x': x, 'y': y}
</pre></div>
<p>每行一个声明</p>
<p>Bad</p>
<div class="codehilite"><pre>print 'one'; print 'two'

if x == 1: print 'one'

if &lt;complex comparison&gt; and &lt;other complex comparison&gt;:
    # do something
</pre></div>
<p>Good</p>
<div class="codehilite"><pre>print 'one'
print 'two'

if x == 1:
    print 'one'

cond1 = &lt;complex comparison&gt;
cond2 = &lt;other complex comparison&gt;
if cond1 and cond2:
    # do something
</pre></div>
<p>函数参数</p>
<div class="codehilite"><pre>#不解释了
位置参数，默认参数，*args, **args
</pre></div>
<p>Avoid the magical wand(这个肿么翻...)</p>
<div class="codehilite"><pre>原因：
Python comes with a very rich set of hooks and tools allowing to do almost any kind of tricky tricks

建议：
it is always better to use the most straightforward way to achieve your goal

感受一下:
We consider that a Python developer should know about these nearly infinite possibilities,
because it grows the confidence that no hard-wall will be on the way.
However, knowing how to use them and particularly when not to use them is the most important.

Like a Kungfu master, a Pythonista knows how to kill with a single finger, and never to actually do it.

其实就是告诉你，骚年，这玩意你要去学习去了解去掌握，目的是增强实力保持自信，但是不要去用啊
(说的原子弹吧....)
</pre></div>
<h4 id="idioms">方言(Idioms)</h4>
<p>Idiomatic Python code is often referred to as being Pythonic.</p>
<p>列举了一些：</p>
<p>Unpacking</p>
<div class="codehilite"><pre>for index, item in enumerate(some_list):
    # do something with index and item

a, b = b, a

a, (b, c) = 1, (2, 3)
</pre></div>
<p>忽略接收变量,这里用的是两个下划线，原因
http://docs.python-guide.org/en/latest/writing/style/#create-an-ignored-variable</p>
<div class="codehilite"><pre>filename = 'foobar.txt'
basename, __, ext = filename.rpartition('.')
</pre></div>
<p>同一个元素创建一个长度为N的列表</p>
<div class="codehilite"><pre>four_nones = [None] * 4
</pre></div>
<p>创建一个长度N的嵌套列表</p>
<div class="codehilite"><pre>four_lists = [[] for __ in xrange(4)]
</pre></div>
<p>由列表拼接字符串</p>
<div class="codehilite"><pre>letters = ['s', 'p', 'a', 'm']
word = ''.join(letters)
</pre></div>
<p>快速查找</p>
<div class="codehilite"><pre>d = {'s': [], 'p': [], 'a': [], 'm': []}
l = ['s', 'p', 'a', 'm']

def lookup_dict(d): #O(1)
    return 's' in d

def lookup_list(l): #O(n)
    return 's' in l
</pre></div>
<p>Zen of Python</p>
<div class="codehilite"><pre><span class="kn">import</span> <span class="nn">this</span>
</pre></div>
<p>PEP8</p>
<div class="codehilite"><pre><span class="nv">$ </span>pip install pep8
<span class="nv">$ </span>pep8 optparse.py
optparse.py:69:11: E401 multiple imports on one line
optparse.py:77:1: E302 expected <span class="m">2</span> blank lines, found 1
</pre></div>
<h3 id="conventions_1">惯例(Conventions)</h3>
<p>判断值是否等于常量</p>
<p>Bad:</p>
<div class="codehilite"><pre>if attr == True:
    print 'True!'

if attr == None:
    print 'attr is None!'
</pre></div>
<p>Good:</p>
<div class="codehilite"><pre># Just check the value
if attr:
    print 'attr is truthy!'

# or check for the opposite
if not attr:
    print 'attr is falsey!'

# or, since None is considered false, explicitly check for it
if attr is None:
    print 'attr is None!'
</pre></div>
<p>获取字典元素</p>
<p>Bad:</p>
<div class="codehilite"><pre>d = {'hello': 'world'}
if d.has_key('hello'):
    print d['hello']    # prints 'world'
else:
    print 'default_value'
</pre></div>
<p>Good:</p>
<div class="codehilite"><pre>d = {'hello': 'world'}

print d.get('hello', 'default_value') # prints 'world'
print d.get('thingy', 'default_value') # prints 'default_value'

# Or:
if 'hello' in d:
    print d['hello']
</pre></div>
<p>快捷列表操作</p>
<p>Bad:</p>
<div class="codehilite"><pre># Filter elements greater than 4
a = [3, 4, 5]
b = []
for i in a:
    if i &gt; 4:
        b.append(i)
</pre></div>
<p>Good:</p>
<div class="codehilite"><pre>a = [3, 4, 5]
b = [i for i in a if i &gt; 4]
b = filter(lambda x: x &gt; 4, a)
</pre></div>
<p>Bad:</p>
<div class="codehilite"><pre># Add three to all list members.
a = [3, 4, 5]
for i in range(len(a)):
    a[i] += 3
</pre></div>
<p>Good:</p>
<div class="codehilite"><pre>a = [3, 4, 5]
a = [i + 3 for i in a]
# Or:
a = map(lambda i: i + 3, a)
</pre></div>
<p>使用enumerate</p>
<div class="codehilite"><pre>for i, item in enumerate(a):
    print i, item
# prints
# 0 3
# 1 4
# 2 5
</pre></div>
<p>读文件</p>
<p>Bad:</p>
<div class="codehilite"><pre>f = open('file.txt')
a = f.read()
print a
f.close()
</pre></div>
<p>Good:</p>
<div class="codehilite"><pre>with open('file.txt') as f:
    for line in f:
        print line
</pre></div>
<p>超长的行</p>
<p>Bad:</p>
<div class="codehilite"><pre><span class="n">my_very_big_string</span> <span class="o">=</span> <span class="s">"""For a long time I used to go to bed early. Sometimes, </span><span class="se">\</span>
<span class="s">    when I had put out my candle, my eyes would close so quickly that I had not even </span><span class="se">\</span>
<span class="s">    time to say &ldquo;I&rsquo;m going to sleep.&rdquo;"""</span>

<span class="kn">from</span> <span class="nn">some.deep.module.inside.a.module</span> <span class="kn">import</span> <span class="n">a_nice_function</span><span class="p">,</span> <span class="n">another_nice_function</span><span class="p">,</span> \
    <span class="n">yet_another_nice_function</span>
</pre></div>
<p>Good:</p>
<div class="codehilite"><pre><span class="c">#受教了....</span>
<span class="n">my_very_big_string</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">"For a long time I used to go to bed early. Sometimes, "</span>
    <span class="s">"when I had put out my candle, my eyes would close so quickly "</span>
    <span class="s">"that I had not even time to say &ldquo;I&rsquo;m going to sleep.&rdquo;"</span>
<span class="p">)</span>

<span class="kn">from</span> <span class="nn">some.deep.module.inside.a.module</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">a_nice_function</span><span class="p">,</span> <span class="n">another_nice_function</span><span class="p">,</span> <span class="n">yet_another_nice_function</span><span class="p">)</span>
</pre></div>
<h3 id="reading-great-code">Reading Great Code</h3>
<p><a href="http://docs.python-guide.org/en/latest/writing/reading/#reading-great-code">链接</a></p>
<p>感受下：The number one thing that Python programmers do is read code.</p>
<p>再感受一把：One of the secrets of becoming a great Python programmer is to read, understand, and comprehend excellent code.</p>
<p>几个推荐阅读源代码项目</p>
<p><a href="https://github.com/gleitz/howdoi">Howdoi</a></p>
<p><a href="https://github.com/mitsuhiko/flask">Flask</a></p>
<p><a href="https://github.com/mitsuhiko/werkzeug">Werkzeug</a></p>
<p><a href="https://github.com/kennethreitz/requests">Requests</a></p>
<p><a href="https://github.com/kennethreitz/tablib">Tablib</a></p>
<h3 id="documentation">文档(Documentation)</h3>
<p><a href="http://docs.python-guide.org/en/latest/writing/documentation/#documentation">链接</a></p>
<p>感受一下：Readability is a primary focus for Python developers, in both project and code documentation.</p>
<p>具体还是读原文吧</p>
<p>项目文档组成</p>
<div class="codehilite"><pre>1.A README file
  at the root directory should give general information to the users and the maintainers.

  reStructuredText 或 Markdown
2.An INSTALL file
  is less necessary with python

  setup.py

3.A LICENSE file
  should always be present and specify the license under which the software is made available to the public
4.A TODO file or a TODO section in README
  should list the planned development for the code.
5.A CHANGELOG file or section in README
  should compile a short overview of the changes in the code base for the latest versions.
</pre></div>
<p>几种文档工具</p>
<div class="codehilite"><pre>Sphinx(听说最强大....)
reStructuredText
Markdown(俺的最爱...)
</pre></div>
<p>代码文档建议</p>
<p>Comments clarify code and begin with a hash (#).</p>
<p>In Python, docstrings describe modules, classes, and functions:</p>
<div class="codehilite"><pre>def square_and_rooter(x):
    """Returns the square root of self times self."""
</pre></div>
<p>注解代码块</p>
<p>Do not use triple-quote strings to comment code.</p>
<p>This is not a good practice, because line-oriented command-line tools such as grep will not be aware that the commented code is inactive.</p>
<p>It is better to add hashes at the proper indentation level for every commented line.</p>
<p>最佳实践:</p>
<div class="codehilite"><pre>不用三引号注解代码块
每一行加#来注释
</pre></div>
<h3 id="testing-your-code">测试你的代码(Testing Your Code)</h3>
<p><a href="http://docs.python-guide.org/en/latest/writing/tests/#testing-your-code">链接</a></p>
<p>测试一些通用原则</p>
<div class="codehilite"><pre><span class="mi">1</span><span class="p">.</span><span class="nx">A</span> <span class="nx">testing</span> <span class="nx">unit</span> <span class="nx">should</span> <span class="nx">focus</span> <span class="nx">on</span> <span class="nx">one</span> <span class="nx">tiny</span> <span class="nx">bit</span> <span class="nx">of</span> <span class="nx">functionality</span> <span class="nx">and</span> <span class="nx">prove</span> <span class="nx">it</span> <span class="nx">correct</span><span class="p">.</span>
<span class="mi">2</span><span class="p">.</span><span class="nx">Each</span> <span class="nx">test</span> <span class="nx">unit</span> <span class="nx">must</span> <span class="nx">be</span> <span class="nx">fully</span> <span class="nx">independent</span>
<span class="mi">3</span><span class="p">.</span><span class="nx">Try</span> <span class="nx">hard</span> <span class="nx">to</span> <span class="nx">make</span> <span class="nx">tests</span> <span class="nx">that</span> <span class="nx">run</span> <span class="nx">fast</span>
<span class="mi">4</span><span class="p">.</span><span class="nx">Learn</span> <span class="nx">your</span> <span class="nx">tools</span> <span class="nx">and</span> <span class="nx">learn</span> <span class="nx">how</span> <span class="nx">to</span> <span class="nx">run</span> <span class="nx">a</span> <span class="nx">single</span> <span class="nx">test</span> <span class="nx">or</span> <span class="nx">a</span> <span class="nx">test</span> <span class="k">case</span>
<span class="mi">5</span><span class="p">.</span><span class="nx">Always</span> <span class="nx">run</span> <span class="nx">the</span> <span class="nx">full</span> <span class="nx">test</span> <span class="nx">suite</span> <span class="nx">before</span> <span class="nx">a</span> <span class="nx">coding</span> <span class="nx">session</span><span class="p">,</span> <span class="nx">and</span> <span class="nx">run</span> <span class="nx">it</span> <span class="nx">again</span> <span class="nx">after</span><span class="p">.</span>
<span class="mi">6</span><span class="p">.</span><span class="nx">It</span> <span class="nx">is</span> <span class="nx">a</span> <span class="nx">good</span> <span class="nx">idea</span> <span class="nx">to</span> <span class="nx">implement</span> <span class="nx">a</span> <span class="nx">hook</span> <span class="nx">that</span> <span class="nx">runs</span> <span class="nx">all</span> <span class="nx">tests</span> <span class="nx">before</span> <span class="nx">pushing</span> <span class="nx">code</span> <span class="nx">to</span> <span class="nx">a</span> <span class="nx">shared</span> <span class="nx">repository</span><span class="p">.</span>
<span class="mi">7</span><span class="p">.</span><span class="nx">If</span> <span class="nx">you</span> <span class="nx">are</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">middle</span> <span class="nx">of</span> <span class="nx">a</span> <span class="nx">development</span> <span class="nx">session</span> <span class="nx">and</span> <span class="nx">have</span> <span class="nx">to</span> <span class="nx">interrupt</span> <span class="nx">your</span> <span class="nx">work</span><span class="p">,</span>
  <span class="nx">it</span> <span class="nx">is</span> <span class="nx">a</span> <span class="nx">good</span> <span class="nx">idea</span> <span class="nx">to</span> <span class="nx">write</span> <span class="nx">a</span> <span class="nx">broken</span> <span class="nx">unit</span> <span class="nx">test</span> <span class="nx">about</span> <span class="nx">what</span> <span class="nx">you</span> <span class="nx">want</span> <span class="nx">to</span> <span class="nx">develop</span> <span class="nx">next</span><span class="p">.</span>
<span class="mi">8</span><span class="p">.</span><span class="nx">The</span> <span class="nx">first</span> <span class="nx">step</span> <span class="nx">when</span> <span class="nx">you</span> <span class="nx">are</span> <span class="nx">debugging</span> <span class="nx">your</span> <span class="nx">code</span> <span class="nx">is</span> <span class="nx">to</span> <span class="nx">write</span> <span class="nx">a</span> <span class="k">new</span> <span class="nx">test</span> <span class="nx">pinpointing</span> <span class="nx">the</span> <span class="nx">bug</span><span class="p">.</span>
<span class="mi">9</span><span class="p">.</span><span class="nx">Use</span> <span class="kr">long</span> <span class="nx">and</span> <span class="nx">descriptive</span> <span class="nx">names</span> <span class="k">for</span> <span class="nx">testing</span> <span class="nx">functions</span>
<span class="mi">10</span><span class="p">.</span><span class="nx">When</span> <span class="nx">something</span> <span class="nx">goes</span> <span class="nx">wrong</span> <span class="nx">or</span> <span class="nx">has</span> <span class="nx">to</span> <span class="nx">be</span> <span class="nx">changed</span><span class="p">,</span> <span class="nx">and</span> <span class="k">if</span> <span class="nx">your</span> <span class="nx">code</span> <span class="nx">has</span> <span class="nx">a</span> <span class="nx">good</span> <span class="nx">set</span> <span class="nx">of</span> <span class="nx">tests</span><span class="p">,</span>
  <span class="nx">you</span> <span class="nx">or</span> <span class="nx">other</span> <span class="nx">maintainers</span> <span class="nx">will</span> <span class="nx">rely</span> <span class="nx">largely</span> <span class="nx">on</span> <span class="nx">the</span> <span class="nx">testing</span> <span class="nx">suite</span> <span class="nx">to</span> <span class="nx">fix</span> <span class="nx">the</span> <span class="nx">problem</span> <span class="nx">or</span> <span class="nx">modify</span> <span class="nx">a</span> <span class="nx">given</span> <span class="nx">behavior</span><span class="p">.</span>
<span class="mi">11</span><span class="p">.</span><span class="nx">Another</span> <span class="nx">use</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">testing</span> <span class="nx">code</span> <span class="nx">is</span> <span class="nx">as</span> <span class="nx">an</span> <span class="nx">introduction</span> <span class="nx">to</span> <span class="k">new</span> <span class="nx">developers</span><span class="p">.</span>
</pre></div>
<p>单元测试(Unittest)</p>
<p>Python内置模块, <a href="http://docs.python.org/library/unittest.html">文档</a></p>
<div class="codehilite"><pre><span class="kn">import</span> <span class="nn">unittest</span>

<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>

<span class="k">class</span> <span class="nc">MyTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fun</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
<p>文档测试(Doctest)</p>
<p>非精细case，只验证主体功能可用</p>
<div class="codehilite"><pre><span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">"""Squares x.</span>

<span class="sd">    &gt;&gt;&gt; square(2)</span>
<span class="sd">    4</span>
<span class="sd">    &gt;&gt;&gt; square(-2)</span>
<span class="sd">    4</span>
<span class="sd">    """</span>

    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">doctest</span>
    <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">()</span>
</pre></div>
<p>相关工具</p>
<p><a href="http://pytest.org/latest/">py.text</a>
    $ pip install pytest</p>
<p><a href="http://readthedocs.org/docs/nose/en/latest/">Nose</a> unittest的扩展
    $ pip install nose</p>
<p><a href="http://testrun.org/tox/latest/">tox</a>
    $ pip install tox</p>
<p><a href="http://pypi.python.org/pypi/unittest2">Unittest2</a>
    $ pip install unittest2</p>
<p><a href="http://www.voidspace.org.uk/python/mock/">mock</a>
    $ pip install mock</p>
<h3 id="common-gotchas">Common Gotchas(不懂怎么翻...╮(╯▽╰)╭ )</h3>
<p>一些新手可能疑惑的例子</p>
<p>两个例子</p>
<p>1.可变默认参数</p>
<p>What You Wrote</p>
<div class="codehilite"><pre>def append_to(element, to=[]):
    to.append(element)
    return to
</pre></div>
<p>What You Might Have Expected to Happen</p>
<div class="codehilite"><pre>my_list = append_to(12)
print my_list

my_other_list = append_to(42)
print my_other_list

[12]
[42]
</pre></div>
<p>What Does Happen</p>
<div class="codehilite"><pre><span class="k">[12]</span>
<span class="k">[12, 42]</span>
</pre></div>
<p>What You Should Do Instead</p>
<div class="codehilite"><pre>def append_to(element, to=None):
    if to is None:
        to = []
    to.append(element)
    return to
</pre></div>
<p>Python默认参数在函数定义处执行一次，而不是每次函数调用时执行。</p>
<p>2.Late Binding Closures(又一个，延迟绑定闭包?)</p>
<p>What You Wrote</p>
<div class="codehilite"><pre>def create_multipliers():
    return [lambda x : i * x for i in range(5)] #
</pre></div>
<p>What You Might Have Expected to Happen</p>
<div class="codehilite"><pre>for multiplier in create_multipliers():
    print multiplier(2) # 任意一个返回的函数被调用时，内部循环i=4

0
2
4
6
8
</pre></div>
<p>What Does Happen</p>
<div class="codehilite"><pre>8
8
8
8
8
</pre></div>
<p>What You Should Do Instead</p>
<div class="codehilite"><pre><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">mul</span>

<span class="k">def</span> <span class="nf">create_multipliers</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">partial</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
</pre></div>
<p>Python的闭包是延时绑定</p>
<h3 id="choosing-a-license">选择证书(Choosing a License)</h3>
<p><a href="http://docs.python-guide.org/en/latest/writing/license/#choosing-a-license">链接</a></p>
<p>开源证书 <a href="http://opensource.org/licenses/alphabetical">列表</a></p>
<p>证书选择器 <a href="http://three.org/openart/license_chooser/">入口</a></p>
<hr/>
<h1 id="scenario-guide_1">第二部分 Scenario Guide</h1>
<p>都是介绍性质的，类似工具目录,而且大部分是空的，目前没详细信息</p>
<p>要了解具体，goole相关关键词吧</p>
<p>具体自己翻吧 <a href="http://docs.python-guide.org/en/latest/#scenario-guide">位置</a></p>
<p>目录：</p>
<h3 id="network-applications">Network Applications</h3>
<p>Http:</p>
<div class="codehilite"><pre>Requests
</pre></div>
<p>Distributed Systems</p>
<div class="codehilite"><pre>ZeroMQ
RabbitMQ
</pre></div>
<h3 id="web-applications">Web Applications</h3>
<p>Context</p>
<div class="codehilite"><pre>WSGI
</pre></div>
<p>Frameworks</p>
<div class="codehilite"><pre>Django
Flask
Werkzeug
Tornado
Pyramid
</pre></div>
<p>Web Servers</p>
<div class="codehilite"><pre>Nginx
</pre></div>
<p>WSGI Servers</p>
<div class="codehilite"><pre>Gunicorn
</pre></div>
<p>Hosting</p>
<div class="codehilite"><pre>PasS (Platform as a service)
Heroku
DotCloud
Gondor
</pre></div>
<p>Templating</p>
<div class="codehilite"><pre>Jinja2
</pre></div>
<h3 id="html-scraping">HTML Scraping</h3>
<div class="codehilite"><pre>lxml
Requests
</pre></div>
<h3 id="command-line-applications">Command Line Applications</h3>
<div class="codehilite"><pre>Clint
docopt
</pre></div>
<h3 id="gui-applications">GUI Applications</h3>
<div class="codehilite"><pre>Qt
Cocoa
wxPython
GTk
Tk
Kivy
PyjamasDesktop (pyjs Desktop)
Camelot
</pre></div>
<h3 id="databases">Databases</h3>
<div class="codehilite"><pre>DB-API
SQLAlchemy
Django ORM
</pre></div>
<h3 id="networking">Networking</h3>
<div class="codehilite"><pre>Twisted
PyZMQ
gevent
</pre></div>
<h3 id="systems-administration">Systems Administration</h3>
<div class="codehilite"><pre>Fabric
Salt
Psutil
Chef
Puppet
Blueprint
Buildout
</pre></div>
<h3 id="continuous-integration">Continuous Integration</h3>
<div class="codehilite"><pre>Jenkins
Buildbot
Mule?
Tox
Travis-CI
</pre></div>
<h3 id="speed">Speed</h3>
<p>C Extensions</p>
<div class="codehilite"><pre>GIL
Cython
Pyrex
Shedskin
Numba
</pre></div>
<p>Threading</p>
<div class="codehilite"><pre>Threading
Multiprocessing
</pre></div>
<h3 id="scientific-applications">Scientific Applications</h3>
<p>Tools</p>
<div class="codehilite"><pre>IPython
</pre></div>
<p>Libraries</p>
<div class="codehilite"><pre>NumPy
Numba
SciPy
Matplotlib
Pandas
Rpy2
PsychoPy
</pre></div>
<h3 id="image-manipulation">Image Manipulation</h3>
<div class="codehilite"><pre>Python Imaging Library(PIL)
</pre></div>
<h3 id="xml-parsing">XML parsing</h3>
<div class="codehilite"><pre>untangle
xmltodict
</pre></div>
<hr/>
<p>有需要自取.....</p>
<h1 id="shipping-great-code_1">第三部分 Shipping Great Code</h1>
<p>http://docs.python-guide.org/en/latest/#shipping-great-code</p>
<h1 id="development-environment">第四部分 Development Environment</h1>
<p>http://docs.python-guide.org/en/latest/#development-environment</p>
<h1 id="additional-notes">第五部分 Additional Notes</h1>
<p>http://docs.python-guide.org/en/latest/#additional-notes</p>
<hr/>
<p>The end!</p>
<p>2013-11-25</p>
<p>wklken</p>
    </section>

    <section id="copyright">
        <div class="copyright">
            版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" >Creative Commons BY-NC-ND 3.0</a>
        </div>

        <div class="donation">
            <center>
            <img src="/imgs/life/donation.png"/>
            <strong> 如果你觉得我的文章或项目对你有所帮助, You can buy me a coffee:) </strong>
            </center>
        </div>
    </section>


    <section id="neighbors">
        <div>
                        <a class="left" href="http://www.wklken.me/posts/2013/11/24/the-clean-coder.html">
                            上一篇:  读书笔记-程序员的职业素养
                        </a>
                        <a class="right" href="http://www.wklken.me/posts/2013/12/01/git-base.html">
                            下一篇: Git操作小结
                        </a>
        </div>
    </section>

<section id="comments">
        <div class="comments">
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                var disqus_identifier = "posts/2013/11/25/summary-of-the-hitchhikers-guide-2-python.html";
                (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://wklken.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            </div>
</section>
</article>
        </section><!--end #main-->

            <footer class="row">
                <div class="large-12 columns">
                    <p>
                            Copyright © 2015 wklken <br>
                            Hosted on <a href="http://www.vultr.com/?ref=6847203"> vultr </a> . Powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Social Icons by <a href="http://fortawesome.github.io/Font-Awesome/">Font-Awesome</a>.
                    </p>
                </div>
            </footer>

            </div>
        </div>

        <section id="extras" class="body">
        </section><!-- /#extras -->



<script src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://apps.bdimg.com/libs/jquery-scrollUp/2.1.0/jquery.scrollUp.min.js"></script>
<script src="http://apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
<script>
    $(function(){
        $.scrollUp({
              scrollText: '', // Text for element, can contain HTML
            });
    });
</script>


<script type="text/javascript">
  /* var Swiftype = window.Swiftype || {}; */
  /* Swiftype.searchSearchFields = { */
    /* "page": ["title^10", "body"] */
  /* }; */

  /* (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){ */
  /* (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t); */
  /* e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e); */
  /* })(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st'); */

  /* _st('install','v6K-_DamCeHvwX6z3o2F'); */
</script>

<script src="/theme/js/instantclick.min.js" data-no-instant></script>
<script data-no-instant>
$(document).ready(function(){
InstantClick.init();
});
</script>


<div id="share">
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":["mshare","tsina","weixin","douban","meilishuo","mogujie","youdao","sdo","mail","twi","copy","print"],"bdPic":"","bdStyle":"0","bdSize":"16"},"slide":{"type":"slide","bdImg":"5","bdPos":"right","bdTop":"96.5"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
</div>



<script  src="http://www.wklken.me/theme/js/scroll-header.js" type="text/javascript"></script>



    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-42275748-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>


</body>
</html>