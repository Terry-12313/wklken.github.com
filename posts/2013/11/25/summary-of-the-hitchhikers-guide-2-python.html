<!DOCTYPE html>
<html lang="en">

<!--[if IE 8]> <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<head>
    <meta name="google-site-verification" content="SzE6WCs23qFevgBzRIuG9vcfLU0lW_Vd5hFT-cJOLBE" />
    <title>[摘要]Python 最佳实践指南</title>
    <meta charset="utf-8" />
    <meta name="description" content="">
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

        <link rel="shortcut icon" href="/favicon.ico"/>
        <link rel="stylesheet" href="http://www.wklken.me/theme/css/styles.css" media="all" />
        <link rel="stylesheet" href="http://www.wklken.me/theme/css/tab.css" media="all" />

        <link rel="stylesheet" href="http://www.wklken.me/theme/css/font-awesome.min.css">
        <!--[if IE 7]>
            <link rel="stylesheet" href="http://www.wklken.me/theme/css/font-awesome-ie7.min.css">
        <![endif]-->

        <link href="http://www.wklken.me/" type="application/atom+xml" rel="alternate" title="wklken's blog ATOM Feed" />
        <link href="http://www.wklken.me/feed.xml" type="application/atom+xml" rel="alternate" title="wklken's blog RSS Feed" />

</head>

<body id="index" class="home">
    <div id="page" class="row">
        <div class="large-8 large-centered columns">

        <header id="header">
            <div class="constraint">
                <div class="o">
                    <a href="/"><h1 class="banner">Wklken <span class="blue"> Python</span></h1></a>

                <div class="social">
                            <a href="https://github.com/wklken" target='_blank'><i class="icon-github-sign icon-2x"></i></a>
                            <a href="http://weibo.com/wklken" target='_blank'><i class="icon-weibo icon-2x"></i></a>
                            <a href="mailto:wklken@yeah.net"><i class="icon-envelope icon-2x"></i></a>
                            <a href="http://www.wklken.me/feed.xml" target='_blank'><i class="icon-rss-sign icon-2x"></i></a>
                </div>
                <div class="nav">
                            <a href="/">首页</a>
                            <a href="/categories.html">分类</a>
                            <a href="/archives.html">归档</a>
                            <a href="/pages/projects.html">项目</a>
                            <a href="/pages/tools.html">工具</a>
                            <a href="/pages/books.html">书单</a>
                            <a href="/pages/aboutme.html">关于</a>

                </div>

                </div>
            </div>
        </header><!-- /#banner -->

        <section id="main">

<article id="article">
    <section id="header">
        <!--
        <div class="meta">2013年11月25日</div>
        <h1 id="title"> [摘要]Python 最佳实践指南 </h1>
        -->
        <div class="meta"> &nbsp; </div>
        <h1> [摘要]Python 最佳实践指南 </h1>
    </section>
    <section id="content">
        <p>文档地址 <a href="http://docs.python-guide.org/en/latest/">The Hitchhiker's Guide to Python!</a></p>
<p>这份文档</p>
<div class="codehilite"><pre><span class="err">目标对象：入门后，有一定基础的</span><span class="n">Pythonista</span>
<span class="err">关键词：最佳实践，</span><span class="n">Pythonic</span><span class="err">，各类工具介绍</span>
</pre></div>


<p>粗粗粗略地过了一遍，大体捞了一些东西出来，大段大段英文太费眼了，回头细读在更新进来</p>
<p>浓缩版，20分钟可大体过完，然后根据自己需要去看详细的吧</p>
<p>整体内容还是很不错的，建议细读英文</p>
<p>PS:文档含有巨量的TODO(没写空白着待补充的)，不过但从目录上来看还是很强大滴，相信完善后，会成为一份很牛逼的指南(难度比官方指南高一点点)</p>
<hr />
<h1>第零部分 Getting Started</h1>
<p><a href="http://docs.python-guide.org/en/latest/#getting-started">链接</a></p>
<p>不解释，不翻译，自个看....真的没啥(每本入门书籍第一章...)</p>
<hr />
<h1>第一部分 Writing Great Code</h1>
<h3>Structuring Your Project</h3>
<p><a href="http://docs.python-guide.org/en/latest/writing/structure/#structuring-your-project">链接</a></p>
<p>import 最佳实践</p>
<p>Very bad</p>
<div class="codehilite"><pre><span class="k">[...]</span>
<span class="err">from</span> <span class="err">modu</span> <span class="err">import</span> <span class="err">*</span>
<span class="k">[...]</span>
<span class="na">x</span> <span class="o">=</span> <span class="s">sqrt(4)  # Is sqrt part of modu? A builtin? Defined above?</span>
</pre></div>


<p>Better</p>
<div class="codehilite"><pre><span class="n">from</span> <span class="n">modu</span> <span class="n">import</span> <span class="n">sqrt</span>
<span class="p">[...]</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="err">#</span> <span class="n">sqrt</span> <span class="n">may</span> <span class="n">be</span> <span class="n">part</span> <span class="n">of</span> <span class="n">modu</span><span class="p">,</span> <span class="k">if</span> <span class="n">not</span> <span class="n">redefined</span> <span class="n">in</span> <span class="n">between</span>
</pre></div>


<p>Best</p>
<div class="codehilite"><pre><span class="n">import</span> <span class="n">modu</span>
<span class="p">[...]</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">modu</span><span class="p">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="err">#</span> <span class="n">sqrt</span> <span class="n">is</span> <span class="n">visibly</span> <span class="n">part</span> <span class="n">of</span> <span class="n">modu</span><span class="err">&#39;</span><span class="n">s</span> <span class="n">namespace</span>
</pre></div>


<p>Python中关于OOP的 <a href="http://docs.python-guide.org/en/latest/writing/structure/#object-oriented-programming">观点</a></p>
<p>Decorators</p>
<div class="codehilite"><pre><span class="n">def</span> <span class="n">foo</span><span class="p">()</span><span class="o">:</span>
    <span class="err">#</span> <span class="k">do</span> <span class="n">something</span>

<span class="n">def</span> <span class="n">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">)</span><span class="o">:</span>
    <span class="err">#</span> <span class="n">manipulate</span> <span class="n">func</span>
    <span class="k">return</span> <span class="n">func</span>

<span class="n">foo</span> <span class="o">=</span> <span class="n">decorator</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>  <span class="err">#</span> <span class="n">Manually</span> <span class="n">decorate</span>

<span class="err">@</span><span class="n">decorator</span>
<span class="n">def</span> <span class="n">bar</span><span class="p">()</span><span class="o">:</span>
    <span class="err">#</span> <span class="n">Do</span> <span class="n">something</span>
<span class="cp"># bar() is decorated</span>
</pre></div>


<p>动态类型(Dynamic typing)</p>
<p>Avoid using the same variable name for different things.</p>
<p>Bad</p>
<div class="codehilite"><pre><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">a</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">a</span> <span class="n">string</span><span class="err">&#39;</span>
<span class="n">def</span> <span class="n">a</span><span class="p">()</span><span class="o">:</span>
    <span class="n">pass</span>  <span class="err">#</span> <span class="n">Do</span> <span class="n">something</span>
</pre></div>


<p>Good</p>
<div class="codehilite"><pre><span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">msg</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">a</span> <span class="n">string</span><span class="err">&#39;</span>
<span class="n">def</span> <span class="n">func</span><span class="p">()</span><span class="o">:</span>
    <span class="n">pass</span>  <span class="err">#</span> <span class="n">Do</span> <span class="n">something</span>
</pre></div>


<p>It is better to use different names even for things that are related, when they have a different type:</p>
<div class="codehilite"><pre><span class="n">Bad</span>

<span class="n">items</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span><span class="err">&#39;</span>  <span class="err">#</span> <span class="n">This</span> <span class="n">is</span> <span class="n">a</span> <span class="n">string</span><span class="p">...</span>
<span class="n">items</span> <span class="o">=</span> <span class="n">items</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="sc">&#39; &#39;</span><span class="p">)</span>  <span class="err">#</span> <span class="p">...</span><span class="n">becoming</span> <span class="n">a</span> <span class="n">list</span>
<span class="n">items</span> <span class="o">=</span> <span class="n">set</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>  <span class="err">#</span> <span class="p">...</span><span class="n">and</span> <span class="n">then</span> <span class="n">a</span> <span class="n">set</span>
</pre></div>


<p>可变和不可变类型(Mutable and immutable types)</p>
<p>字符串拼接最佳实践</p>
<p>Bad</p>
<div class="codehilite"><pre><span class="cp"># create a concatenated string from 0 to 19 (e.g. &quot;012..1819&quot;)</span>
<span class="n">nums</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
<span class="k">for</span> <span class="n">n</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="o">:</span>
  <span class="n">nums</span> <span class="o">+=</span> <span class="n">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>   <span class="err">#</span> <span class="n">slow</span> <span class="n">and</span> <span class="n">inefficient</span>
<span class="n">print</span> <span class="n">nums</span>
</pre></div>


<p>Good</p>
<div class="codehilite"><pre><span class="cp"># create a concatenated string from 0 to 19 (e.g. &quot;012..1819&quot;)</span>
<span class="n">nums</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">n</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="o">:</span>
  <span class="n">nums</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">str</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
<span class="n">print</span> <span class="s">&quot;&quot;</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>  <span class="err">#</span> <span class="n">much</span> <span class="n">more</span> <span class="n">efficient</span>
</pre></div>


<p>Best</p>
<div class="codehilite"><pre><span class="cp"># create a concatenated string from 0 to 19 (e.g. &quot;012..1819&quot;)</span>
<span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="n">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)]</span>
<span class="n">print</span> <span class="s">&quot;&quot;</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
</pre></div>


<p>join() is not always best
创建新字符串和修改原有字符串</p>
<div class="codehilite"><pre><span class="n">foo</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">foo</span><span class="err">&#39;</span>
<span class="n">bar</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">bar</span><span class="err">&#39;</span>

<span class="n">foobar</span> <span class="o">=</span> <span class="n">foo</span> <span class="o">+</span> <span class="n">bar</span>  <span class="err">#</span> <span class="n">This</span> <span class="n">is</span> <span class="n">good</span>
<span class="n">foo</span> <span class="o">+=</span> <span class="err">&#39;</span><span class="n">ooo</span><span class="err">&#39;</span>  <span class="err">#</span> <span class="n">This</span> <span class="n">is</span> <span class="n">bad</span><span class="p">,</span> <span class="n">instead</span> <span class="n">you</span> <span class="n">should</span> <span class="k">do</span><span class="o">:</span>
<span class="n">foo</span> <span class="o">=</span> <span class="err">&#39;&#39;</span><span class="p">.</span><span class="n">join</span><span class="p">([</span><span class="n">foo</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">ooo</span><span class="err">&#39;</span><span class="p">])</span>
</pre></div>


<p>字符串格式化</p>
<div class="codehilite"><pre><span class="n">foo</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">foo</span><span class="err">&#39;</span>
<span class="n">bar</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">bar</span><span class="err">&#39;</span>

<span class="n">foobar</span> <span class="o">=</span> <span class="err">&#39;</span><span class="o">%</span><span class="n">s</span><span class="o">%</span><span class="n">s</span><span class="err">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">bar</span><span class="p">)</span> <span class="err">#</span> <span class="n">It</span> <span class="n">is</span> <span class="n">OK</span>
<span class="n">foobar</span> <span class="o">=</span> <span class="err">&#39;</span><span class="p">{</span><span class="mi">0</span><span class="p">}{</span><span class="mi">1</span><span class="p">}</span><span class="err">&#39;</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">bar</span><span class="p">)</span> <span class="err">#</span> <span class="n">It</span> <span class="n">is</span> <span class="n">better</span>
<span class="n">foobar</span> <span class="o">=</span> <span class="err">&#39;</span><span class="p">{</span><span class="n">foo</span><span class="p">}{</span><span class="n">bar</span><span class="p">}</span><span class="err">&#39;</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="n">foo</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="n">bar</span><span class="p">)</span> <span class="err">#</span> <span class="n">It</span> <span class="n">is</span> <span class="n">best</span>
</pre></div>


<h3>Code Style</h3>
<p><a href="http://docs.python-guide.org/en/latest/writing/style/#code-style">链接</a></p>
<h4>一般概念(General concepts)</h4>
<p>明确的代码</p>
<p>Bad</p>
<div class="codehilite"><pre><span class="n">def</span> <span class="n">make_complex</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span><span class="o">:</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">args</span>
    <span class="k">return</span> <span class="n">dict</span><span class="p">(</span><span class="o">**</span><span class="n">locals</span><span class="p">())</span>
</pre></div>


<p>Good</p>
<div class="codehilite"><pre><span class="n">def</span> <span class="n">make_complex</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span><span class="o">:</span>
    <span class="k">return</span> <span class="p">{</span><span class="sc">&#39;x&#39;</span><span class="o">:</span> <span class="n">x</span><span class="p">,</span> <span class="sc">&#39;y&#39;</span><span class="o">:</span> <span class="n">y</span><span class="p">}</span>
</pre></div>


<p>每行一个声明</p>
<p>Bad</p>
<div class="codehilite"><pre><span class="n">print</span> <span class="err">&#39;</span><span class="n">one</span><span class="err">&#39;</span><span class="p">;</span> <span class="n">print</span> <span class="err">&#39;</span><span class="n">two</span><span class="err">&#39;</span>

<span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">1</span><span class="o">:</span> <span class="n">print</span> <span class="err">&#39;</span><span class="n">one</span><span class="err">&#39;</span>

<span class="k">if</span> <span class="o">&lt;</span><span class="n">complex</span> <span class="n">comparison</span><span class="o">&gt;</span> <span class="n">and</span> <span class="o">&lt;</span><span class="n">other</span> <span class="n">complex</span> <span class="n">comparison</span><span class="o">&gt;:</span>
    <span class="err">#</span> <span class="k">do</span> <span class="n">something</span>
</pre></div>


<p>Good</p>
<div class="codehilite"><pre><span class="n">print</span> <span class="err">&#39;</span><span class="n">one</span><span class="err">&#39;</span>
<span class="n">print</span> <span class="err">&#39;</span><span class="n">two</span><span class="err">&#39;</span>

<span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">1</span><span class="o">:</span>
    <span class="n">print</span> <span class="err">&#39;</span><span class="n">one</span><span class="err">&#39;</span>

<span class="n">cond1</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">complex</span> <span class="n">comparison</span><span class="o">&gt;</span>
<span class="n">cond2</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">other</span> <span class="n">complex</span> <span class="n">comparison</span><span class="o">&gt;</span>
<span class="k">if</span> <span class="n">cond1</span> <span class="n">and</span> <span class="n">cond2</span><span class="o">:</span>
    <span class="err">#</span> <span class="k">do</span> <span class="n">something</span>
</pre></div>


<p>函数参数</p>
<div class="codehilite"><pre><span class="cp">#不解释了</span>
<span class="err">位置参数，默认参数，</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span>
</pre></div>


<p>Avoid the magical wand(这个肿么翻...)</p>
<div class="codehilite"><pre><span class="err">原因：</span>
<span class="n">Python</span> <span class="n">comes</span> <span class="n">with</span> <span class="n">a</span> <span class="n">very</span> <span class="n">rich</span> <span class="n">set</span> <span class="n">of</span> <span class="n">hooks</span> <span class="n">and</span> <span class="n">tools</span> <span class="n">allowing</span> <span class="n">to</span> <span class="k">do</span> <span class="n">almost</span> <span class="n">any</span> <span class="n">kind</span> <span class="n">of</span> <span class="n">tricky</span> <span class="n">tricks</span>

<span class="err">建议：</span>
<span class="n">it</span> <span class="n">is</span> <span class="n">always</span> <span class="n">better</span> <span class="n">to</span> <span class="n">use</span> <span class="n">the</span> <span class="n">most</span> <span class="n">straightforward</span> <span class="n">way</span> <span class="n">to</span> <span class="n">achieve</span> <span class="n">your</span> <span class="n">goal</span>

<span class="err">感受一下</span><span class="o">:</span>
<span class="n">We</span> <span class="n">consider</span> <span class="n">that</span> <span class="n">a</span> <span class="n">Python</span> <span class="n">developer</span> <span class="n">should</span> <span class="n">know</span> <span class="n">about</span> <span class="n">these</span> <span class="n">nearly</span> <span class="n">infinite</span> <span class="n">possibilities</span><span class="p">,</span>
<span class="n">because</span> <span class="n">it</span> <span class="n">grows</span> <span class="n">the</span> <span class="n">confidence</span> <span class="n">that</span> <span class="n">no</span> <span class="n">hard</span><span class="o">-</span><span class="n">wall</span> <span class="n">will</span> <span class="n">be</span> <span class="n">on</span> <span class="n">the</span> <span class="n">way</span><span class="p">.</span>
<span class="n">However</span><span class="p">,</span> <span class="n">knowing</span> <span class="n">how</span> <span class="n">to</span> <span class="n">use</span> <span class="n">them</span> <span class="n">and</span> <span class="n">particularly</span> <span class="n">when</span> <span class="n">not</span> <span class="n">to</span> <span class="n">use</span> <span class="n">them</span> <span class="n">is</span> <span class="n">the</span> <span class="n">most</span> <span class="n">important</span><span class="p">.</span>

<span class="n">Like</span> <span class="n">a</span> <span class="n">Kungfu</span> <span class="n">master</span><span class="p">,</span> <span class="n">a</span> <span class="n">Pythonista</span> <span class="n">knows</span> <span class="n">how</span> <span class="n">to</span> <span class="n">kill</span> <span class="n">with</span> <span class="n">a</span> <span class="n">single</span> <span class="n">finger</span><span class="p">,</span> <span class="n">and</span> <span class="n">never</span> <span class="n">to</span> <span class="n">actually</span> <span class="k">do</span> <span class="n">it</span><span class="p">.</span>

<span class="err">其实就是告诉你，骚年，这玩意你要去学习去了解去掌握，目的是增强实力保持自信，但是不要去用啊</span>
<span class="p">(</span><span class="err">说的原子弹吧</span><span class="p">....)</span>
</pre></div>


<h4>方言(Idioms)</h4>
<p>Idiomatic Python code is often referred to as being Pythonic.</p>
<p>列举了一些：</p>
<p>Unpacking</p>
<div class="codehilite"><pre><span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">item</span> <span class="n">in</span> <span class="n">enumerate</span><span class="p">(</span><span class="n">some_list</span><span class="p">)</span><span class="o">:</span>
    <span class="err">#</span> <span class="k">do</span> <span class="n">something</span> <span class="n">with</span> <span class="n">index</span> <span class="n">and</span> <span class="n">item</span>

<span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span>

<span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>


<p>忽略接收变量,这里用的是两个下划线，原因
http://docs.python-guide.org/en/latest/writing/style/#create-an-ignored-variable</p>
<div class="codehilite"><pre><span class="n">filename</span> <span class="o">=</span> <span class="err">&#39;</span><span class="n">foobar</span><span class="p">.</span><span class="n">txt</span><span class="err">&#39;</span>
<span class="n">basename</span><span class="p">,</span> <span class="n">__</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">filename</span><span class="p">.</span><span class="n">rpartition</span><span class="p">(</span><span class="sc">&#39;.&#39;</span><span class="p">)</span>
</pre></div>


<p>同一个元素创建一个长度为N的列表</p>
<div class="codehilite"><pre><span class="n">four_nones</span> <span class="o">=</span> <span class="p">[</span><span class="n">None</span><span class="p">]</span> <span class="o">*</span> <span class="mi">4</span>
</pre></div>


<p>创建一个长度N的嵌套列表</p>
<div class="codehilite"><pre><span class="n">four_lists</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">__</span> <span class="n">in</span> <span class="n">xrange</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span>
</pre></div>


<p>由列表拼接字符串</p>
<div class="codehilite"><pre><span class="n">letters</span> <span class="o">=</span> <span class="p">[</span><span class="sc">&#39;s&#39;</span><span class="p">,</span> <span class="sc">&#39;p&#39;</span><span class="p">,</span> <span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="sc">&#39;m&#39;</span><span class="p">]</span>
<span class="n">word</span> <span class="o">=</span> <span class="err">&#39;&#39;</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">letters</span><span class="p">)</span>
</pre></div>


<p>快速查找</p>
<div class="codehilite"><pre><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="sc">&#39;s&#39;</span><span class="o">:</span> <span class="p">[],</span> <span class="sc">&#39;p&#39;</span><span class="o">:</span> <span class="p">[],</span> <span class="sc">&#39;a&#39;</span><span class="o">:</span> <span class="p">[],</span> <span class="sc">&#39;m&#39;</span><span class="o">:</span> <span class="p">[]}</span>
<span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="sc">&#39;s&#39;</span><span class="p">,</span> <span class="sc">&#39;p&#39;</span><span class="p">,</span> <span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="sc">&#39;m&#39;</span><span class="p">]</span>

<span class="n">def</span> <span class="n">lookup_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">:</span> <span class="err">#</span><span class="n">O</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="sc">&#39;s&#39;</span> <span class="n">in</span> <span class="n">d</span>

<span class="n">def</span> <span class="n">lookup_list</span><span class="p">(</span><span class="n">l</span><span class="p">)</span><span class="o">:</span> <span class="err">#</span><span class="n">O</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">return</span> <span class="sc">&#39;s&#39;</span> <span class="n">in</span> <span class="n">l</span>
</pre></div>


<p>Zen of Python</p>
<div class="codehilite"><pre><span class="n">import</span> <span class="n">this</span>
</pre></div>


<p>PEP8</p>
<div class="codehilite"><pre><span class="err">$</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">pep8</span>
<span class="err">$</span> <span class="n">pep8</span> <span class="n">optparse</span><span class="p">.</span><span class="n">py</span>
<span class="n">optparse</span><span class="p">.</span><span class="n">py</span><span class="o">:</span><span class="mi">69</span><span class="o">:</span><span class="mi">11</span><span class="o">:</span> <span class="n">E401</span> <span class="n">multiple</span> <span class="n">imports</span> <span class="n">on</span> <span class="n">one</span> <span class="n">line</span>
<span class="n">optparse</span><span class="p">.</span><span class="n">py</span><span class="o">:</span><span class="mi">77</span><span class="o">:</span><span class="mi">1</span><span class="o">:</span> <span class="n">E302</span> <span class="n">expected</span> <span class="mi">2</span> <span class="n">blank</span> <span class="n">lines</span><span class="p">,</span> <span class="n">found</span> <span class="mi">1</span>
</pre></div>


<h3>惯例(Conventions)</h3>
<p>判断值是否等于常量</p>
<p>Bad:</p>
<div class="codehilite"><pre><span class="k">if</span> <span class="n">attr</span> <span class="o">==</span> <span class="n">True</span><span class="o">:</span>
    <span class="n">print</span> <span class="err">&#39;</span><span class="n">True</span><span class="o">!</span><span class="err">&#39;</span>

<span class="k">if</span> <span class="n">attr</span> <span class="o">==</span> <span class="n">None</span><span class="o">:</span>
    <span class="n">print</span> <span class="err">&#39;</span><span class="n">attr</span> <span class="n">is</span> <span class="n">None</span><span class="o">!</span><span class="err">&#39;</span>
</pre></div>


<p>Good:</p>
<div class="codehilite"><pre><span class="cp"># Just check the value</span>
<span class="k">if</span> <span class="n">attr</span><span class="o">:</span>
    <span class="n">print</span> <span class="err">&#39;</span><span class="n">attr</span> <span class="n">is</span> <span class="n">truthy</span><span class="o">!</span><span class="err">&#39;</span>

<span class="cp"># or check for the opposite</span>
<span class="k">if</span> <span class="n">not</span> <span class="n">attr</span><span class="o">:</span>
    <span class="n">print</span> <span class="err">&#39;</span><span class="n">attr</span> <span class="n">is</span> <span class="n">falsey</span><span class="o">!</span><span class="err">&#39;</span>

<span class="cp"># or, since None is considered false, explicitly check for it</span>
<span class="k">if</span> <span class="n">attr</span> <span class="n">is</span> <span class="n">None</span><span class="o">:</span>
    <span class="n">print</span> <span class="err">&#39;</span><span class="n">attr</span> <span class="n">is</span> <span class="n">None</span><span class="o">!</span><span class="err">&#39;</span>
</pre></div>


<p>获取字典元素</p>
<p>Bad:</p>
<div class="codehilite"><pre><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="err">&#39;</span><span class="n">hello</span><span class="err">&#39;</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">world</span><span class="err">&#39;</span><span class="p">}</span>
<span class="k">if</span> <span class="n">d</span><span class="p">.</span><span class="n">has_key</span><span class="p">(</span><span class="err">&#39;</span><span class="n">hello</span><span class="err">&#39;</span><span class="p">)</span><span class="o">:</span>
    <span class="n">print</span> <span class="n">d</span><span class="p">[</span><span class="err">&#39;</span><span class="n">hello</span><span class="err">&#39;</span><span class="p">]</span>    <span class="err">#</span> <span class="n">prints</span> <span class="err">&#39;</span><span class="n">world</span><span class="err">&#39;</span>
<span class="nl">else:</span>
    <span class="n">print</span> <span class="err">&#39;</span><span class="n">default_value</span><span class="err">&#39;</span>
</pre></div>


<p>Good:</p>
<div class="codehilite"><pre><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="err">&#39;</span><span class="n">hello</span><span class="err">&#39;</span><span class="o">:</span> <span class="err">&#39;</span><span class="n">world</span><span class="err">&#39;</span><span class="p">}</span>

<span class="n">print</span> <span class="n">d</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="err">&#39;</span><span class="n">hello</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">default_value</span><span class="err">&#39;</span><span class="p">)</span> <span class="err">#</span> <span class="n">prints</span> <span class="err">&#39;</span><span class="n">world</span><span class="err">&#39;</span>
<span class="n">print</span> <span class="n">d</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="err">&#39;</span><span class="n">thingy</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">default_value</span><span class="err">&#39;</span><span class="p">)</span> <span class="err">#</span> <span class="n">prints</span> <span class="err">&#39;</span><span class="n">default_value</span><span class="err">&#39;</span>

<span class="cp"># Or:</span>
<span class="k">if</span> <span class="err">&#39;</span><span class="n">hello</span><span class="err">&#39;</span> <span class="n">in</span> <span class="n">d</span><span class="o">:</span>
    <span class="n">print</span> <span class="n">d</span><span class="p">[</span><span class="err">&#39;</span><span class="n">hello</span><span class="err">&#39;</span><span class="p">]</span>
</pre></div>


<p>快捷列表操作</p>
<p>Bad:</p>
<div class="codehilite"><pre><span class="cp"># Filter elements greater than 4</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">a</span><span class="o">:</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="o">:</span>
        <span class="n">b</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>


<p>Good:</p>
<div class="codehilite"><pre><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">a</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">filter</span><span class="p">(</span><span class="n">lambda</span> <span class="n">x</span><span class="o">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</pre></div>


<p>Bad:</p>
<div class="codehilite"><pre><span class="cp"># Add three to all list members.</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="n">len</span><span class="p">(</span><span class="n">a</span><span class="p">))</span><span class="o">:</span>
    <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">3</span>
</pre></div>


<p>Good:</p>
<div class="codehilite"><pre><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">3</span> <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">a</span><span class="p">]</span>
<span class="cp"># Or:</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">map</span><span class="p">(</span><span class="n">lambda</span> <span class="n">i</span><span class="o">:</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">3</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
</pre></div>


<p>使用enumerate</p>
<div class="codehilite"><pre><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">item</span> <span class="n">in</span> <span class="n">enumerate</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">:</span>
    <span class="n">print</span> <span class="n">i</span><span class="p">,</span> <span class="n">item</span>
<span class="cp"># prints</span>
<span class="cp"># 0 3</span>
<span class="cp"># 1 4</span>
<span class="cp"># 2 5</span>
</pre></div>


<p>读文件</p>
<p>Bad:</p>
<div class="codehilite"><pre><span class="n">f</span> <span class="o">=</span> <span class="n">open</span><span class="p">(</span><span class="err">&#39;</span><span class="n">file</span><span class="p">.</span><span class="n">txt</span><span class="err">&#39;</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">print</span> <span class="n">a</span>
<span class="n">f</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>


<p>Good:</p>
<div class="codehilite"><pre><span class="n">with</span> <span class="n">open</span><span class="p">(</span><span class="err">&#39;</span><span class="n">file</span><span class="p">.</span><span class="n">txt</span><span class="err">&#39;</span><span class="p">)</span> <span class="n">as</span> <span class="n">f</span><span class="o">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="n">in</span> <span class="n">f</span><span class="o">:</span>
        <span class="n">print</span> <span class="n">line</span>
</pre></div>


<p>超长的行</p>
<p>Bad:</p>
<div class="codehilite"><pre><span class="nx">my_very_big_string</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;For a long time I used to go to bed early. Sometimes, \</span>
<span class="s2">    when I had put out my candle, my eyes would close so quickly that I had not even \</span>
<span class="s2">    time to say “I’m going to sleep.”&quot;&quot;&quot;</span>

<span class="nx">from</span> <span class="nx">some</span><span class="p">.</span><span class="nx">deep</span><span class="p">.</span><span class="nx">module</span><span class="p">.</span><span class="nx">inside</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">module</span> <span class="kr">import</span> <span class="nx">a_nice_function</span><span class="p">,</span> <span class="nx">another_nice_function</span><span class="p">,</span> <span class="o">\</span>
    <span class="nx">yet_another_nice_function</span>
</pre></div>


<p>Good:</p>
<div class="codehilite"><pre><span class="err">#受教了</span><span class="p">....</span>
<span class="nx">my_very_big_string</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;For a long time I used to go to bed early. Sometimes, &quot;</span>
    <span class="s2">&quot;when I had put out my candle, my eyes would close so quickly &quot;</span>
    <span class="s2">&quot;that I had not even time to say “I’m going to sleep.”&quot;</span>
<span class="p">)</span>

<span class="nx">from</span> <span class="nx">some</span><span class="p">.</span><span class="nx">deep</span><span class="p">.</span><span class="nx">module</span><span class="p">.</span><span class="nx">inside</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">module</span> <span class="kr">import</span> <span class="p">(</span>
    <span class="nx">a_nice_function</span><span class="p">,</span> <span class="nx">another_nice_function</span><span class="p">,</span> <span class="nx">yet_another_nice_function</span><span class="p">)</span>
</pre></div>


<h3>Reading Great Code</h3>
<p><a href="http://docs.python-guide.org/en/latest/writing/reading/#reading-great-code">链接</a></p>
<p>感受下：The number one thing that Python programmers do is read code.</p>
<p>再感受一把：One of the secrets of becoming a great Python programmer is to read, understand, and comprehend excellent code.</p>
<p>几个推荐阅读源代码项目</p>
<p><a href="https://github.com/gleitz/howdoi">Howdoi</a></p>
<p><a href="https://github.com/mitsuhiko/flask">Flask</a></p>
<p><a href="https://github.com/mitsuhiko/werkzeug">Werkzeug</a></p>
<p><a href="https://github.com/kennethreitz/requests">Requests</a></p>
<p><a href="https://github.com/kennethreitz/tablib">Tablib</a></p>
<h3>文档(Documentation)</h3>
<p><a href="http://docs.python-guide.org/en/latest/writing/documentation/#documentation">链接</a></p>
<p>感受一下：Readability is a primary focus for Python developers, in both project and code documentation.</p>
<p>具体还是读原文吧</p>
<p>项目文档组成</p>
<div class="codehilite"><pre><span class="mf">1.</span><span class="n">A</span> <span class="n">README</span> <span class="n">file</span>
  <span class="n">at</span> <span class="n">the</span> <span class="n">root</span> <span class="n">directory</span> <span class="n">should</span> <span class="n">give</span> <span class="n">general</span> <span class="n">information</span> <span class="n">to</span> <span class="n">the</span> <span class="n">users</span> <span class="n">and</span> <span class="n">the</span> <span class="n">maintainers</span><span class="p">.</span>

  <span class="n">reStructuredText</span> <span class="err">或</span> <span class="n">Markdown</span>
<span class="mf">2.</span><span class="n">An</span> <span class="n">INSTALL</span> <span class="n">file</span>
  <span class="n">is</span> <span class="n">less</span> <span class="n">necessary</span> <span class="n">with</span> <span class="n">python</span>

  <span class="n">setup</span><span class="p">.</span><span class="n">py</span>

<span class="mf">3.</span><span class="n">A</span> <span class="n">LICENSE</span> <span class="n">file</span>
  <span class="n">should</span> <span class="n">always</span> <span class="n">be</span> <span class="n">present</span> <span class="n">and</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">license</span> <span class="n">under</span> <span class="n">which</span> <span class="n">the</span> <span class="n">software</span> <span class="n">is</span> <span class="n">made</span> <span class="n">available</span> <span class="n">to</span> <span class="n">the</span> <span class="n">public</span>
<span class="mf">4.</span><span class="n">A</span> <span class="n">TODO</span> <span class="n">file</span> <span class="n">or</span> <span class="n">a</span> <span class="n">TODO</span> <span class="n">section</span> <span class="n">in</span> <span class="n">README</span>
  <span class="n">should</span> <span class="n">list</span> <span class="n">the</span> <span class="n">planned</span> <span class="n">development</span> <span class="k">for</span> <span class="n">the</span> <span class="n">code</span><span class="p">.</span>
<span class="mf">5.</span><span class="n">A</span> <span class="n">CHANGELOG</span> <span class="n">file</span> <span class="n">or</span> <span class="n">section</span> <span class="n">in</span> <span class="n">README</span>
  <span class="n">should</span> <span class="n">compile</span> <span class="n">a</span> <span class="kt">short</span> <span class="n">overview</span> <span class="n">of</span> <span class="n">the</span> <span class="n">changes</span> <span class="n">in</span> <span class="n">the</span> <span class="n">code</span> <span class="n">base</span> <span class="k">for</span> <span class="n">the</span> <span class="n">latest</span> <span class="n">versions</span><span class="p">.</span>
</pre></div>


<p>几种文档工具</p>
<div class="codehilite"><pre><span class="n">Sphinx</span><span class="p">(</span><span class="err">听说最强大</span><span class="p">....)</span>
<span class="n">reStructuredText</span>
<span class="n">Markdown</span><span class="p">(</span><span class="err">俺的最爱</span><span class="p">...)</span>
</pre></div>


<p>代码文档建议</p>
<p>Comments clarify code and begin with a hash (#).</p>
<p>In Python, docstrings describe modules, classes, and functions:</p>
<div class="codehilite"><pre><span class="n">def</span> <span class="n">square_and_rooter</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">:</span>
    <span class="s">&quot;&quot;&quot;Returns the square root of self times self.&quot;&quot;&quot;</span>
</pre></div>


<p>注解代码块</p>
<p>Do not use triple-quote strings to comment code.</p>
<p>This is not a good practice, because line-oriented command-line tools such as grep will not be aware that the commented code is inactive.</p>
<p>It is better to add hashes at the proper indentation level for every commented line.</p>
<p>最佳实践:</p>
<div class="codehilite"><pre><span class="err">不用三引号注解代码块</span>
<span class="err">每一行加#来注释</span>
</pre></div>


<h3>测试你的代码(Testing Your Code)</h3>
<p><a href="http://docs.python-guide.org/en/latest/writing/tests/#testing-your-code">链接</a></p>
<p>测试一些通用原则</p>
<div class="codehilite"><pre><span class="mi">1</span><span class="p">.</span><span class="nx">A</span> <span class="nx">testing</span> <span class="nx">unit</span> <span class="nx">should</span> <span class="nx">focus</span> <span class="nx">on</span> <span class="nx">one</span> <span class="nx">tiny</span> <span class="nx">bit</span> <span class="nx">of</span> <span class="nx">functionality</span> <span class="nx">and</span> <span class="nx">prove</span> <span class="nx">it</span> <span class="nx">correct</span><span class="p">.</span>
<span class="mi">2</span><span class="p">.</span><span class="nx">Each</span> <span class="nx">test</span> <span class="nx">unit</span> <span class="nx">must</span> <span class="nx">be</span> <span class="nx">fully</span> <span class="nx">independent</span>
<span class="mi">3</span><span class="p">.</span><span class="nx">Try</span> <span class="nx">hard</span> <span class="nx">to</span> <span class="nx">make</span> <span class="nx">tests</span> <span class="nx">that</span> <span class="nx">run</span> <span class="nx">fast</span>
<span class="mi">4</span><span class="p">.</span><span class="nx">Learn</span> <span class="nx">your</span> <span class="nx">tools</span> <span class="nx">and</span> <span class="nx">learn</span> <span class="nx">how</span> <span class="nx">to</span> <span class="nx">run</span> <span class="nx">a</span> <span class="nx">single</span> <span class="nx">test</span> <span class="nx">or</span> <span class="nx">a</span> <span class="nx">test</span> <span class="k">case</span>
<span class="mi">5</span><span class="p">.</span><span class="nx">Always</span> <span class="nx">run</span> <span class="nx">the</span> <span class="nx">full</span> <span class="nx">test</span> <span class="nx">suite</span> <span class="nx">before</span> <span class="nx">a</span> <span class="nx">coding</span> <span class="nx">session</span><span class="p">,</span> <span class="nx">and</span> <span class="nx">run</span> <span class="nx">it</span> <span class="nx">again</span> <span class="nx">after</span><span class="p">.</span>
<span class="mi">6</span><span class="p">.</span><span class="nx">It</span> <span class="nx">is</span> <span class="nx">a</span> <span class="nx">good</span> <span class="nx">idea</span> <span class="nx">to</span> <span class="nx">implement</span> <span class="nx">a</span> <span class="nx">hook</span> <span class="nx">that</span> <span class="nx">runs</span> <span class="nx">all</span> <span class="nx">tests</span> <span class="nx">before</span> <span class="nx">pushing</span> <span class="nx">code</span> <span class="nx">to</span> <span class="nx">a</span> <span class="nx">shared</span> <span class="nx">repository</span><span class="p">.</span>
<span class="mi">7</span><span class="p">.</span><span class="nx">If</span> <span class="nx">you</span> <span class="nx">are</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">middle</span> <span class="nx">of</span> <span class="nx">a</span> <span class="nx">development</span> <span class="nx">session</span> <span class="nx">and</span> <span class="nx">have</span> <span class="nx">to</span> <span class="nx">interrupt</span> <span class="nx">your</span> <span class="nx">work</span><span class="p">,</span>
  <span class="nx">it</span> <span class="nx">is</span> <span class="nx">a</span> <span class="nx">good</span> <span class="nx">idea</span> <span class="nx">to</span> <span class="nx">write</span> <span class="nx">a</span> <span class="nx">broken</span> <span class="nx">unit</span> <span class="nx">test</span> <span class="nx">about</span> <span class="nx">what</span> <span class="nx">you</span> <span class="nx">want</span> <span class="nx">to</span> <span class="nx">develop</span> <span class="nx">next</span><span class="p">.</span>
<span class="mi">8</span><span class="p">.</span><span class="nx">The</span> <span class="nx">first</span> <span class="nx">step</span> <span class="nx">when</span> <span class="nx">you</span> <span class="nx">are</span> <span class="nx">debugging</span> <span class="nx">your</span> <span class="nx">code</span> <span class="nx">is</span> <span class="nx">to</span> <span class="nx">write</span> <span class="nx">a</span> <span class="k">new</span> <span class="nx">test</span> <span class="nx">pinpointing</span> <span class="nx">the</span> <span class="nx">bug</span><span class="p">.</span>
<span class="mi">9</span><span class="p">.</span><span class="nx">Use</span> <span class="kr">long</span> <span class="nx">and</span> <span class="nx">descriptive</span> <span class="nx">names</span> <span class="k">for</span> <span class="nx">testing</span> <span class="nx">functions</span>
<span class="mi">10</span><span class="p">.</span><span class="nx">When</span> <span class="nx">something</span> <span class="nx">goes</span> <span class="nx">wrong</span> <span class="nx">or</span> <span class="nx">has</span> <span class="nx">to</span> <span class="nx">be</span> <span class="nx">changed</span><span class="p">,</span> <span class="nx">and</span> <span class="k">if</span> <span class="nx">your</span> <span class="nx">code</span> <span class="nx">has</span> <span class="nx">a</span> <span class="nx">good</span> <span class="nx">set</span> <span class="nx">of</span> <span class="nx">tests</span><span class="p">,</span>
  <span class="nx">you</span> <span class="nx">or</span> <span class="nx">other</span> <span class="nx">maintainers</span> <span class="nx">will</span> <span class="nx">rely</span> <span class="nx">largely</span> <span class="nx">on</span> <span class="nx">the</span> <span class="nx">testing</span> <span class="nx">suite</span> <span class="nx">to</span> <span class="nx">fix</span> <span class="nx">the</span> <span class="nx">problem</span> <span class="nx">or</span> <span class="nx">modify</span> <span class="nx">a</span> <span class="nx">given</span> <span class="nx">behavior</span><span class="p">.</span>
<span class="mi">11</span><span class="p">.</span><span class="nx">Another</span> <span class="nx">use</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">testing</span> <span class="nx">code</span> <span class="nx">is</span> <span class="nx">as</span> <span class="nx">an</span> <span class="nx">introduction</span> <span class="nx">to</span> <span class="k">new</span> <span class="nx">developers</span><span class="p">.</span>
</pre></div>


<p>单元测试(Unittest)</p>
<p>Python内置模块, <a href="http://docs.python.org/library/unittest.html">文档</a></p>
<div class="codehilite"><pre><span class="n">import</span> <span class="n">unittest</span>

<span class="n">def</span> <span class="n">fun</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">:</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>

<span class="n">class</span> <span class="n">MyTest</span><span class="p">(</span><span class="n">unittest</span><span class="p">.</span><span class="n">TestCase</span><span class="p">)</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">test</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="o">:</span>
        <span class="n">self</span><span class="p">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">fun</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>


<p>文档测试(Doctest)</p>
<p>非精细case，只验证主体功能可用</p>
<div class="codehilite"><pre><span class="n">def</span> <span class="n">square</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">:</span>
    <span class="s">&quot;&quot;&quot;Squares x.</span>

    <span class="o">&gt;&gt;&gt;</span> <span class="n">square</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="mi">4</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="n">square</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
    <span class="mi">4</span>
    <span class="s">&quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="err">&#39;</span><span class="n">__main__</span><span class="err">&#39;</span><span class="o">:</span>
    <span class="n">import</span> <span class="n">doctest</span>
    <span class="n">doctest</span><span class="p">.</span><span class="n">testmod</span><span class="p">()</span>
</pre></div>


<p>相关工具</p>
<p><a href="http://pytest.org/latest/">py.text</a>
    $ pip install pytest</p>
<p><a href="http://readthedocs.org/docs/nose/en/latest/">Nose</a> unittest的扩展
    $ pip install nose</p>
<p><a href="http://testrun.org/tox/latest/">tox</a>
    $ pip install tox</p>
<p><a href="http://pypi.python.org/pypi/unittest2">Unittest2</a>
    $ pip install unittest2</p>
<p><a href="http://www.voidspace.org.uk/python/mock/">mock</a>
    $ pip install mock</p>
<h3>Common Gotchas(不懂怎么翻...╮(╯▽╰)╭ )</h3>
<p>一些新手可能疑惑的例子</p>
<p>两个例子</p>
<p>1.可变默认参数</p>
<p>What You Wrote</p>
<div class="codehilite"><pre><span class="n">def</span> <span class="n">append_to</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="p">[])</span><span class="o">:</span>
    <span class="n">to</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">to</span>
</pre></div>


<p>What You Might Have Expected to Happen</p>
<div class="codehilite"><pre><span class="n">my_list</span> <span class="o">=</span> <span class="n">append_to</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
<span class="n">print</span> <span class="n">my_list</span>

<span class="n">my_other_list</span> <span class="o">=</span> <span class="n">append_to</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="n">print</span> <span class="n">my_other_list</span>

<span class="p">[</span><span class="mi">12</span><span class="p">]</span>
<span class="p">[</span><span class="mi">42</span><span class="p">]</span>
</pre></div>


<p>What Does Happen</p>
<div class="codehilite"><pre><span class="k">[12]</span>
<span class="k">[12, 42]</span>
</pre></div>


<p>What You Should Do Instead</p>
<div class="codehilite"><pre><span class="n">def</span> <span class="n">append_to</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="n">None</span><span class="p">)</span><span class="o">:</span>
    <span class="k">if</span> <span class="n">to</span> <span class="n">is</span> <span class="n">None</span><span class="o">:</span>
        <span class="n">to</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">to</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">to</span>
</pre></div>


<p>Python默认参数在函数定义处执行一次，而不是每次函数调用时执行。</p>
<p>2.Late Binding Closures(又一个，延迟绑定闭包?)</p>
<p>What You Wrote</p>
<div class="codehilite"><pre><span class="n">def</span> <span class="n">create_multipliers</span><span class="p">()</span><span class="o">:</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">lambda</span> <span class="n">x</span> <span class="o">:</span> <span class="n">i</span> <span class="o">*</span> <span class="n">x</span> <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span> <span class="err">#</span>
</pre></div>


<p>What You Might Have Expected to Happen</p>
<div class="codehilite"><pre><span class="k">for</span> <span class="n">multiplier</span> <span class="n">in</span> <span class="n">create_multipliers</span><span class="p">()</span><span class="o">:</span>
    <span class="n">print</span> <span class="n">multiplier</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="err">#</span> <span class="err">任意一个返回的函数被调用时，内部循环</span><span class="n">i</span><span class="o">=</span><span class="mi">4</span>

<span class="mi">0</span>
<span class="mi">2</span>
<span class="mi">4</span>
<span class="mi">6</span>
<span class="mi">8</span>
</pre></div>


<p>What Does Happen</p>
<div class="codehilite"><pre><span class="mi">8</span>
<span class="mi">8</span>
<span class="mi">8</span>
<span class="mi">8</span>
<span class="mi">8</span>
</pre></div>


<p>What You Should Do Instead</p>
<div class="codehilite"><pre><span class="n">from</span> <span class="n">functools</span> <span class="n">import</span> <span class="n">partial</span>
<span class="n">from</span> <span class="n">operator</span> <span class="n">import</span> <span class="n">mul</span>

<span class="n">def</span> <span class="n">create_multipliers</span><span class="p">()</span><span class="o">:</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">partial</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>
</pre></div>


<p>Python的闭包是延时绑定</p>
<h3>选择证书(Choosing a License)</h3>
<p><a href="http://docs.python-guide.org/en/latest/writing/license/#choosing-a-license">链接</a></p>
<p>开源证书 <a href="http://opensource.org/licenses/alphabetical">列表</a></p>
<p>证书选择器 <a href="http://three.org/openart/license_chooser/">入口</a></p>
<hr />
<h1>第二部分 Scenario Guide</h1>
<p>都是介绍性质的，类似工具目录,而且大部分是空的，目前没详细信息</p>
<p>要了解具体，goole相关关键词吧</p>
<p>具体自己翻吧 <a href="http://docs.python-guide.org/en/latest/#scenario-guide">位置</a></p>
<p>目录：</p>
<h3>Network Applications</h3>
<p>Http:</p>
<div class="codehilite"><pre><span class="n">Requests</span>
</pre></div>


<p>Distributed Systems</p>
<div class="codehilite"><pre><span class="n">ZeroMQ</span>
<span class="n">RabbitMQ</span>
</pre></div>


<h3>Web Applications</h3>
<p>Context</p>
<div class="codehilite"><pre><span class="n">WSGI</span>
</pre></div>


<p>Frameworks</p>
<div class="codehilite"><pre><span class="n">Django</span>
<span class="n">Flask</span>
<span class="n">Werkzeug</span>
<span class="n">Tornado</span>
<span class="n">Pyramid</span>
</pre></div>


<p>Web Servers</p>
<div class="codehilite"><pre><span class="n">Nginx</span>
</pre></div>


<p>WSGI Servers</p>
<div class="codehilite"><pre><span class="n">Gunicorn</span>
</pre></div>


<p>Hosting</p>
<div class="codehilite"><pre><span class="n">PasS</span> <span class="p">(</span><span class="n">Platform</span> <span class="n">as</span> <span class="n">a</span> <span class="n">service</span><span class="p">)</span>
<span class="n">Heroku</span>
<span class="n">DotCloud</span>
<span class="n">Gondor</span>
</pre></div>


<p>Templating</p>
<div class="codehilite"><pre><span class="n">Jinja2</span>
</pre></div>


<h3>HTML Scraping</h3>
<div class="codehilite"><pre><span class="n">lxml</span>
<span class="n">Requests</span>
</pre></div>


<h3>Command Line Applications</h3>
<div class="codehilite"><pre><span class="n">Clint</span>
<span class="n">docopt</span>
</pre></div>


<h3>GUI Applications</h3>
<div class="codehilite"><pre><span class="n">Qt</span>
<span class="n">Cocoa</span>
<span class="n">wxPython</span>
<span class="n">GTk</span>
<span class="n">Tk</span>
<span class="n">Kivy</span>
<span class="n">PyjamasDesktop</span> <span class="p">(</span><span class="n">pyjs</span> <span class="n">Desktop</span><span class="p">)</span>
<span class="n">Camelot</span>
</pre></div>


<h3>Databases</h3>
<div class="codehilite"><pre><span class="n">DB</span><span class="o">-</span><span class="n">API</span>
<span class="n">SQLAlchemy</span>
<span class="n">Django</span> <span class="n">ORM</span>
</pre></div>


<h3>Networking</h3>
<div class="codehilite"><pre><span class="n">Twisted</span>
<span class="n">PyZMQ</span>
<span class="n">gevent</span>
</pre></div>


<h3>Systems Administration</h3>
<div class="codehilite"><pre><span class="n">Fabric</span>
<span class="n">Salt</span>
<span class="n">Psutil</span>
<span class="n">Chef</span>
<span class="n">Puppet</span>
<span class="n">Blueprint</span>
<span class="n">Buildout</span>
</pre></div>


<h3>Continuous Integration</h3>
<div class="codehilite"><pre><span class="n">Jenkins</span>
<span class="n">Buildbot</span>
<span class="n">Mule</span><span class="o">?</span>
<span class="n">Tox</span>
<span class="n">Travis</span><span class="o">-</span><span class="n">CI</span>
</pre></div>


<h3>Speed</h3>
<p>C Extensions</p>
<div class="codehilite"><pre><span class="n">GIL</span>
<span class="n">Cython</span>
<span class="n">Pyrex</span>
<span class="n">Shedskin</span>
<span class="n">Numba</span>
</pre></div>


<p>Threading</p>
<div class="codehilite"><pre><span class="n">Threading</span>
<span class="n">Multiprocessing</span>
</pre></div>


<h3>Scientific Applications</h3>
<p>Tools</p>
<div class="codehilite"><pre><span class="n">IPython</span>
</pre></div>


<p>Libraries</p>
<div class="codehilite"><pre><span class="n">NumPy</span>
<span class="n">Numba</span>
<span class="n">SciPy</span>
<span class="n">Matplotlib</span>
<span class="n">Pandas</span>
<span class="n">Rpy2</span>
<span class="n">PsychoPy</span>
</pre></div>


<h3>Image Manipulation</h3>
<div class="codehilite"><pre><span class="n">Python</span> <span class="n">Imaging</span> <span class="n">Library</span><span class="p">(</span><span class="n">PIL</span><span class="p">)</span>
</pre></div>


<h3>XML parsing</h3>
<div class="codehilite"><pre><span class="n">untangle</span>
<span class="n">xmltodict</span>
</pre></div>


<hr />
<p>有需要自取.....</p>
<h1>第三部分 Shipping Great Code</h1>
<p>http://docs.python-guide.org/en/latest/#shipping-great-code</p>
<h1>第四部分 Development Environment</h1>
<p>http://docs.python-guide.org/en/latest/#development-environment</p>
<h1>第五部分 Additional Notes</h1>
<p>http://docs.python-guide.org/en/latest/#additional-notes</p>
<hr />
<p>The end!</p>
<p>2013-11-25</p>
<p>wklken</p>
    </section>

    <section id="copyright">
        <div class="copyright">
            版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" >Creative Commons BY-NC-ND 3.0</a>
        </div>
    </section>


    <section id="neighbors">
        <div>
                        <a class="left" href="http://www.wklken.me/posts/2013/11/24/the-clean-coder.html">
                            上一篇:  读书笔记-程序员的职业素养
                        </a>
                        <a class="right" href="http://www.wklken.me/posts/2013/12/01/git-base.html">
                            下一篇: Git操作小结
                        </a>
        </div>
    </section>

    <section id="comments">

        <div class="comments">
            <h2>Comments !</h2>
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                var disqus_identifier = "posts/2013/11/25/summary-of-the-hitchhikers-guide-2-python.html";
                (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://wklken.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            </div>
    </section>

</article>
        </section><!--end #main-->

            <footer class="row">
                <div class="large-12 columns">
                    <p>
                            Copyright © 2014 wklken <br>
                            Hosted on <a href="https://www.digitalocean.com/?refcode=8ee73f2c47ce"> digitalocean </a>. Powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Social Icons by <a href="http://fortawesome.github.io/Font-Awesome/">Font-Awesome</a>.
                    </p>
                </div>
            </footer>

            </div>
        </div>

        <section id="extras" class="body">
        </section><!-- /#extras -->

    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-42275748-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>



</body>
<script src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://apps.bdimg.com/libs/jquery-scrollUp/2.1.0/jquery.scrollUp.min.js"></script>
<script>
    $(function(){
        $.scrollUp();
    });
</script>




</html>