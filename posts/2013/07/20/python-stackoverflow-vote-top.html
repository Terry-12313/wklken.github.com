<!DOCTYPE html>
<html lang="en">
<head>
        <title>[翻译整理]stackoverflow python 百问</title>
        <meta charset="utf-8" />
     <meta name="description" content="">
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

        <link rel="shortcut icon" href="/favicon.ico"/>
        <link rel="stylesheet" href="http://wklken.github.io/theme/css/style.css" media="all" />
        <link rel="stylesheet" href="http://wklken.github.io/theme/css/mobile.css" media="all" />
        <link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,300italic,600italic,400,600,700,800' rel='stylesheet' type='text/css">

        <link href="http://wklken.github.io/" type="application/atom+xml" rel="alternate" title="wklken's blog ATOM Feed" />
                <link href="http://wklken.github.io/feed" type="application/atom+xml" rel="alternate" title="wklken's blog RSS Feed" />
        
        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://wklken.github.io/css/ie.css"/>
                <script src="http://wklken.github.io/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://wklken.github.io/css/ie6.css"/><![endif]-->
        <script src="http://upcdn.b0.upaiyun.com/libs/jquery/jquery-1.9.1.min.js"></script>
        <script src="http://wklken.github.io/theme/js/jquery.scrollToTop.js"></script>
                <script type="text/javascript">
            $(function() {
                $("#toTop").scrollToTop(1000);
            });
        </script>

</head>

<body id="index" class="home">
  <header id="header">
     <div class="constraint">
       <div class="o"> 

   <a href="/"><h1>Wklken <span class="red"> Python</span></h1></a>
   <!--                       <li><a href="http://wklken.github.io/feed"><i class="icon-rss"></i>  </a></li>
                           -->

		<div class="nav">
                                    <a href="/">首页</a>
                                    <a href="/categories.html">分类</a>
                                    <a href="/archives.html">归档</a>
                                    <a href="/pages/projects.html">项目</a>
                                    <a href="/pages/tools.html">工具</a>
                                    <a href="/pages/aboutme.html">关于</a>
                                        <a id='rss' href="http://wklken.github.io/feed"><img src="http://wklken.github.io/theme/images/icons/rss.png"></img></a>

           </div>
         </div>
         </div>
         </header><!-- /#banner -->

        <section class="content blog">
<div class="constraint">
<div class="posts">
<article>
        <aside class="sidebar">
<h3 class="published" title="2013-07-20T00:00:00">
               2013年07月20日
</h3>

<p>
<div class="tag">
    分类: <a href="/category/pythonru-men-ji-jin-jie-bi-ji.html">python入门及进阶笔记</a>

    </div>


<div class="tag">
    标签: <a href="http://wklken.github.io/tag/python.html">python</a><a href="http://wklken.github.io/tag/translation.html">translation</a>
   </div>


</p>

</aside><!-- /.post-info -->        <header> <h1 class="blog-title"><a href=""
        rel="bookmark" title="Permalink to [翻译整理]stackoverflow python 百问">[翻译整理]stackoverflow python 百问</a></h1> 
                </header>


        <div class="entry-content">
        <p>刚刚注册，好东西</p>
<p>查看了下前面(vote前15页,挑了下,vote都是100+的样子,大概120个)的问题，<a href="http://stackoverflow.com/questions/tagged/python?page=1&amp;sort=votes&amp;pagesize=15">链接</a>, 大体梳理了下,本来想放一页搞定，奈何排版太乱，按类型分了下</p>
<p>第一页的前几个比较长，目测都有中文翻译版本，大家可以网上搜下</p>
<p>其他问题相对比较杂，有些简单，有些复杂，拉过来参考参考也不错</p>
<p>总结整理，复习印证(注意，合并了每个问题的多个答案，但是时间仓促，疏漏难免，感兴趣问题直接点链接看原文吧)</p>
<hr />
<h2>基本数据结构(列表，元组，字典等)</h2>
<h3>判断一个列表为空得最佳实践</h3>
<p>问题 <a href="http://stackoverflow.com/questions/53513/python-what-is-the-best-way-to-check-if-a-list-is-empty">链接</a></p>
<p>答案:</p>
<div class="highlight"><pre><span class="k">if</span> <span class="n">not</span> <span class="n">a</span><span class="o">:</span>
    <span class="n">print</span> <span class="s">&quot;List is empty&quot;</span>
<span class="cp">#不要用len(a)来判断</span>
</pre></div>


<h3>为什么是string.join(list)而不是list.join(string)</h3>
<p>问题 <a href="http://stackoverflow.com/questions/493819/python-join-why-is-it-string-joinlist-instead-of-list-joinstring">链接</a></p>
<div class="highlight"><pre><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;Hello&quot;</span><span class="p">,</span> <span class="s">&quot;world&quot;</span><span class="p">]</span>
<span class="n">print</span> <span class="s">&quot;-&quot;</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
<span class="cp">#为什么不是 my_list.join(&quot;-&quot;) 。。。。这个....</span>
</pre></div>


<p>答案：</p>
<p>因为所有可迭代对象都可以被连接，但是连接者总是字符串</p>
<h3>如何合并两个列表</h3>
<p>问题 <a href="http://stackoverflow.com/questions/1720421/merge-two-lists-in-python">链接</a></p>
<div class="highlight"><pre><span class="n">listone</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">listtwo</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="cp">#outcome we expect: mergedlist == [1, 2, 3, 4, 5, 6]</span>
</pre></div>


<p>1.不考虑顺序（原来问题不是很明确）</p>
<div class="highlight"><pre><span class="n">listone</span> <span class="o">+</span> <span class="n">listtwo</span>
<span class="cp">#linstone.extend(listtwo)也行，就是会修改listone</span>
</pre></div>


<p>2.考虑顺序做些处理</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">listone</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">listtwo</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">import</span> <span class="n">itertools</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">item</span> <span class="n">in</span> <span class="n">itertools</span><span class="p">.</span><span class="n">chain</span><span class="p">(</span><span class="n">listone</span><span class="p">,</span> <span class="n">listtwo</span><span class="p">)</span><span class="o">:</span>
<span class="p">...</span>     <span class="n">print</span> <span class="n">item</span>
<span class="p">...</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">4</span>
<span class="mi">5</span>
<span class="mi">6</span>
</pre></div>


<h3>如何扁平一个二维数组</h3>
<p>问题 <a href="http://stackoverflow.com/questions/952914/making-a-flat-list-out-of-list-of-lists-in-python">链接</a></p>
<div class="highlight"><pre><span class="n">l</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]]</span>
<span class="err">变为</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
</pre></div>


<p>列表解析</p>
<div class="highlight"><pre><span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">sublist</span> <span class="n">in</span> <span class="n">l</span> <span class="k">for</span> <span class="n">item</span> <span class="n">in</span> <span class="n">sublist</span><span class="p">]</span>
</pre></div>


<p>itertools</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">import</span> <span class="n">itertools</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">list2d</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">merged</span> <span class="o">=</span> <span class="n">list</span><span class="p">(</span><span class="n">itertools</span><span class="p">.</span><span class="n">chain</span><span class="p">(</span><span class="o">*</span><span class="n">list2d</span><span class="p">))</span>

<span class="cp"># python &gt;= 2.6</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">import</span> <span class="n">itertools</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">list2d</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">merged</span> <span class="o">=</span> <span class="n">list</span><span class="p">(</span><span class="n">itertools</span><span class="p">.</span><span class="n">chain</span><span class="p">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">list2d</span><span class="p">))</span>
</pre></div>


<p>sum</p>
<div class="highlight"><pre><span class="n">sum</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="p">[])</span>
</pre></div>


<h3>列表的append和extend的区别</h3>
<p>问题 <a href="http://stackoverflow.com/questions/252703/python-append-vs-extend">链接</a></p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">append</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
</pre></div>


<h3>如何随机地从列表中抽取变量</h3>
<p>问题 <a href="http://stackoverflow.com/questions/306400/how-do-i-randomly-select-an-item-from-a-list-using-python">链接</a></p>
<div class="highlight"><pre><span class="n">foo</span> <span class="o">=</span> <span class="p">[</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="p">,</span> <span class="sc">&#39;c&#39;</span><span class="p">,</span> <span class="sc">&#39;d&#39;</span><span class="p">,</span> <span class="sc">&#39;e&#39;</span><span class="p">]</span>
<span class="n">from</span> <span class="n">random</span> <span class="n">import</span> <span class="n">choice</span>
<span class="n">print</span> <span class="n">choice</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
</pre></div>


<h3>如何利用下标从列表中删除一个元素</h3>
<p>问题 <a href="http://stackoverflow.com/questions/627435/how-to-remove-an-element-from-a-list-by-index-in-python">链接</a></p>
<p>1.del</p>
<div class="highlight"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]</span><span class="o">:</span> <span class="n">a</span> <span class="o">=</span> <span class="n">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="o">:</span> <span class="n">a</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">11</span><span class="p">]</span><span class="o">:</span> <span class="n">del</span> <span class="n">a</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">12</span><span class="p">]</span><span class="o">:</span> <span class="n">a</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</pre></div>


<p>2.pop</p>
<div class="highlight"><pre><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="p">,</span> <span class="sc">&#39;c&#39;</span><span class="p">,</span> <span class="sc">&#39;d&#39;</span><span class="p">]</span>
<span class="n">a</span><span class="p">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="cp"># now a is [&#39;a&#39;, &#39;c&#39;, &#39;d&#39;]</span>

<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="p">,</span> <span class="sc">&#39;c&#39;</span><span class="p">,</span> <span class="sc">&#39;d&#39;</span><span class="p">]</span>
<span class="n">a</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span>
<span class="cp"># now a is [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span>
</pre></div>


<h3>获取列表的最后一个元素</h3>
<p>问题 <a href="http://stackoverflow.com/questions/930397/how-to-get-the-last-element-of-a-list">链接</a></p>
<p>囧</p>
<div class="highlight"><pre><span class="n">result</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">l</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span>
</pre></div>


<h3>序列的切片操作</h3>
<p>问题 <a href="http://stackoverflow.com/questions/509211/the-python-slice-notation">链接</a></p>
<p>It's pretty simple really:
很简单:</p>
<div class="highlight"><pre><span class="n">a</span><span class="p">[</span><span class="n">start</span><span class="o">:</span><span class="n">end</span><span class="p">]</span> <span class="err">#</span> <span class="n">start</span> <span class="err">到</span> <span class="n">end</span><span class="o">-</span><span class="mi">1</span>
<span class="n">a</span><span class="p">[</span><span class="n">start</span><span class="o">:</span><span class="p">]</span>    <span class="err">#</span> <span class="n">start</span> <span class="err">到</span> <span class="err">末尾</span>
<span class="n">a</span><span class="p">[</span><span class="o">:</span><span class="n">end</span><span class="p">]</span>      <span class="err">#</span> <span class="mi">0</span> <span class="err">到</span> <span class="n">end</span><span class="o">-</span><span class="mi">1</span>
<span class="n">a</span><span class="p">[</span><span class="o">:</span><span class="p">]</span>         <span class="err">#</span> <span class="err">整个列表的拷贝</span>
</pre></div>


<p>还有一个step变量，控制步长,可在上面语法中使用</p>
<div class="highlight"><pre><span class="n">a</span><span class="p">[</span><span class="n">start</span><span class="o">:</span><span class="n">end</span><span class="o">:</span><span class="n">step</span><span class="p">]</span> <span class="err">#</span> <span class="n">start</span> <span class="n">through</span> <span class="n">not</span> <span class="n">past</span> <span class="n">end</span><span class="p">,</span> <span class="n">by</span> <span class="n">step</span>
</pre></div>


<p>注意，左闭右开</p>
<p>其他特点，开始或结束下标可能是负数，表示从序列末尾开始计算而非从头开始计算,所以</p>
<div class="highlight"><pre><span class="s-Atom">a</span><span class="p">[</span><span class="o">-</span><span class="m">1</span><span class="p">]</span>    <span class="s-Atom">#</span> <span class="s-Atom">最后一个元素</span>
<span class="s-Atom">a</span><span class="p">[</span><span class="o">-</span><span class="m">2</span><span class="s-Atom">:</span><span class="p">]</span>   <span class="s-Atom">#</span> <span class="s-Atom">最后两个元素</span>
<span class="s-Atom">a</span><span class="p">[:-</span><span class="m">2</span><span class="p">]</span>   <span class="s-Atom">#</span> <span class="s-Atom">除了最后两个元素</span>
</pre></div>


<p>Python对程序员很友好，如果序列中存在的元素数量少于你要的，例如，你请求 a[:-2] 但是a只有一个元素，你会得到一个空列表，而不是一个错误.有时候你或许希望返回的是一个错误，所以你必须知道这点</p>
<h3>如何将一个列表切分成若干个长度相同的子序列</h3>
<p>问题 <a href="http://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks-in-python">链接</a></p>
<p>想要得到这样的效果</p>
<div class="highlight"><pre><span class="n">l</span> <span class="o">=</span> <span class="n">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">print</span> <span class="n">chunks</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span> <span class="p">[</span> <span class="mf">1..10</span> <span class="p">],</span> <span class="p">[</span> <span class="mf">11..20</span> <span class="p">],</span> <span class="p">..,</span> <span class="p">[</span> <span class="mf">991..999</span> <span class="p">]</span> <span class="p">]</span>
</pre></div>


<p>使用yield:</p>
<div class="highlight"><pre><span class="n">def</span> <span class="n">chunks</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span><span class="o">:</span>
    <span class="s">&quot;&quot;&quot; Yield successive n-sized chunks from l.</span>
    <span class="s">&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">len</span><span class="p">(</span><span class="n">l</span><span class="p">),</span> <span class="n">n</span><span class="p">)</span><span class="o">:</span>
        <span class="n">yield</span> <span class="n">l</span><span class="p">[</span><span class="n">i</span><span class="o">:</span><span class="n">i</span><span class="o">+</span><span class="n">n</span><span class="p">]</span>
<span class="n">list</span><span class="p">(</span><span class="n">chunks</span><span class="p">(</span><span class="n">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">75</span><span class="p">),</span> <span class="mi">10</span><span class="p">))</span>
</pre></div>


<p>直接处理</p>
<div class="highlight"><pre><span class="n">def</span> <span class="n">chunks</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span><span class="o">:</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">l</span><span class="p">[</span><span class="n">i</span><span class="o">:</span><span class="n">i</span><span class="o">+</span><span class="n">n</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">len</span><span class="p">(</span><span class="n">l</span><span class="p">),</span> <span class="n">n</span><span class="p">)]</span>
</pre></div>


<h3>使用列表解析创建一个字典</h3>
<p>问题 <a href="http://stackoverflow.com/questions/1747817/python-create-a-dictionary-with-list-comprehension">链接</a></p>
<p>python 2.6</p>
<div class="highlight"><pre><span class="n">d</span> <span class="o">=</span> <span class="n">dict</span><span class="p">((</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="n">in</span> <span class="n">sequence</span><span class="p">)</span>
</pre></div>


<p>python 2.7+ or 3, 使用 <a href="http://www.python.org/dev/peps/pep-0274/">字典解析语法</a></p>
<div class="highlight"><pre><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="o">:</span> <span class="n">value</span> <span class="k">for</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="n">in</span> <span class="n">sequence</span><span class="p">}</span>
</pre></div>


<h3>使用"in"还是"has_key()"</h3>
<p>问题 <a href="http://stackoverflow.com/questions/1323410/has-key-or-in">链接</a></p>
<div class="highlight"><pre><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="sc">&#39;a&#39;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="o">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="sc">&#39;a&#39;</span> <span class="n">in</span> <span class="n">d</span>
<span class="n">True</span>
<span class="nl">or:</span>

<span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="sc">&#39;a&#39;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="o">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="n">d</span><span class="p">.</span><span class="n">has_key</span><span class="p">(</span><span class="sc">&#39;a&#39;</span><span class="p">)</span>
<span class="n">True</span>
</pre></div>


<p>哪种更好</p>
<p>in更pythonic, 另外 has_key()在Python3.x中已经被移除</p>
<h3>字典默认值</h3>
<p>问题 <a href="http://stackoverflow.com/questions/1602934/check-if-a-given-key-already-exists-in-a-dictionary">链接</a></p>
<p>和问题有点偏</p>
<div class="highlight"><pre><span class="cp">#获取时,如不存在，得到默认值</span>
<span class="n">d</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="cp">#设置时，若key不存在，设置默认值，已存在，返回已存在value</span>
<span class="n">d</span><span class="p">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="p">[]).</span><span class="n">append</span><span class="p">(</span><span class="n">new_element</span><span class="p">)</span>
<span class="cp">#初始即默认值</span>
<span class="n">from</span> <span class="n">collections</span> <span class="n">import</span> <span class="n">defaultdict</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="n">lambda</span><span class="o">:</span> <span class="mi">0</span><span class="p">)</span>
<span class="cp">#or d = defaultdict(int)</span>
</pre></div>


<h3>如何给字典添加一个值</h3>
<p>问题 <a href="http://stackoverflow.com/questions/1024847/add-to-a-dictionary-in-python">链接</a></p>
<div class="highlight"><pre><span class="cp">#### Making a dictionary ####</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="cp"># OR #</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">dict</span><span class="p">()</span>

<span class="cp">#### Initially adding values ####</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="sc">&#39;a&#39;</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="sc">&#39;b&#39;</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span><span class="sc">&#39;c&#39;</span><span class="o">:</span><span class="mi">3</span><span class="p">}</span>
<span class="cp"># OR #</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="cp">#### Inserting/Updating value ####</span>
<span class="n">data</span><span class="p">[</span><span class="sc">&#39;a&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>  <span class="err">#</span> <span class="n">updates</span> <span class="k">if</span> <span class="sc">&#39;a&#39;</span> <span class="n">exists</span><span class="p">,</span> <span class="k">else</span> <span class="n">adds</span> <span class="sc">&#39;a&#39;</span>
<span class="cp"># OR #</span>
<span class="n">data</span><span class="p">.</span><span class="n">update</span><span class="p">({</span><span class="sc">&#39;a&#39;</span><span class="o">:</span><span class="mi">1</span><span class="p">})</span>
<span class="cp"># OR #</span>
<span class="n">data</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>

<span class="cp">#### Merging 2 dictionaries ####</span>
<span class="n">data</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">data2</span><span class="p">)</span>  <span class="err">#</span> <span class="n">Where</span> <span class="n">data2</span> <span class="n">is</span> <span class="n">also</span> <span class="n">a</span> <span class="n">dict</span><span class="p">.</span>
</pre></div>


<h3>如何将字段转换成一个object，然后使用对象-属性的方式读取</h3>
<p>问题 <a href="http://stackoverflow.com/questions/1305532/convert-python-dict-to-object">链接</a></p>
<p>有dict</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="sc">&#39;a&#39;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="o">:</span> <span class="p">{</span><span class="sc">&#39;c&#39;</span><span class="o">:</span> <span class="mi">2</span><span class="p">},</span> <span class="sc">&#39;d&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s">&quot;hi&quot;</span><span class="p">,</span> <span class="p">{</span><span class="err">&#39;</span><span class="n">foo</span><span class="err">&#39;</span><span class="o">:</span> <span class="s">&quot;bar&quot;</span><span class="p">}]}}</span>
</pre></div>


<p>想用这种方式访问</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">dict2obj</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">a</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">b</span><span class="p">.</span><span class="n">c</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">foo</span>
<span class="n">bar</span>
</pre></div>


<p>使用namedtuple</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">from</span> <span class="n">collections</span> <span class="n">import</span> <span class="n">namedtuple</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">MyStruct</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="err">&#39;</span><span class="n">MyStruct</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">a</span> <span class="n">b</span> <span class="n">d</span><span class="err">&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="n">MyStruct</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="p">{</span><span class="sc">&#39;c&#39;</span><span class="o">:</span> <span class="mi">2</span><span class="p">},</span> <span class="n">d</span><span class="o">=</span><span class="p">[</span><span class="err">&#39;</span><span class="n">hi</span><span class="err">&#39;</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="n">MyStruct</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="p">{</span><span class="sc">&#39;c&#39;</span><span class="o">:</span> <span class="mi">2</span><span class="p">},</span> <span class="n">d</span><span class="o">=</span><span class="p">[</span><span class="err">&#39;</span><span class="n">hi</span><span class="err">&#39;</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">.</span><span class="n">a</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">.</span><span class="n">b</span>
<span class="p">{</span><span class="sc">&#39;c&#39;</span><span class="o">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">.</span><span class="n">c</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">.</span><span class="n">d</span>
<span class="p">[</span><span class="err">&#39;</span><span class="n">hi</span><span class="err">&#39;</span><span class="p">]</span>
</pre></div>


<p>使用类</p>
<div class="highlight"><pre><span class="n">class</span> <span class="n">Struct</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="o">**</span><span class="n">entries</span><span class="p">)</span><span class="o">:</span>
        <span class="n">self</span><span class="p">.</span><span class="n">__dict__</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">args</span> <span class="o">=</span> <span class="p">{</span><span class="sc">&#39;a&#39;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="o">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="o">**</span><span class="n">args</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="o">&lt;</span><span class="n">__main__</span><span class="p">.</span><span class="n">Struct</span> <span class="n">instance</span> <span class="n">at</span> <span class="mh">0x01D6A738</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">.</span><span class="n">a</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">.</span><span class="n">b</span>
<span class="mi">2</span>
</pre></div>


<h2>字符串，文件</h2>
<h3>如何创建不存在的目录结构</h3>
<p>问题 <a href="http://stackoverflow.com/questions/273192/python-best-way-to-create-directory-if-it-doesnt-exist-for-file-write">链接</a></p>
<div class="highlight"><pre><span class="k">if</span> <span class="n">not</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">exists</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span><span class="o">:</span>
    <span class="n">os</span><span class="p">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
</pre></div>


<p>需要注意的是，当目录在exists和makedirs两个函数调用之间被创建时，makedirs将抛出OSError</p>
<h3>如何拷贝一个文件</h3>
<p>问题 <a href="http://stackoverflow.com/questions/123198/how-do-i-copy-a-file-in-python">链接</a></p>
<p><a href="http://docs.python.org/2/library/shutil.html">shutil</a>模块</p>
<div class="highlight"><pre><span class="n">copyfile</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">)</span>
</pre></div>


<p>将src文件内容拷贝到dst，目标文件夹必须可写，否则将抛出IOError异常</p>
<p>如果目标文件已存在，将被覆盖</p>
<p>另外特殊文件，想字符文件，块设备文件，无法用这个方法进行拷贝</p>
<p>src/dst是字符串</p>
<h3>字符串转为float/int</h3>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;545.2222&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nx">float</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
<span class="mf">545.2222</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nx">int</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
<span class="nx">Traceback</span> <span class="p">(</span><span class="nx">most</span> <span class="nx">recent</span> <span class="nb">call</span> <span class="nb">last</span><span class="p">):</span>
<span class="nb">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="nb">line</span> <span class="mi">1</span><span class="p">,</span> <span class="k">in</span> <span class="o">&lt;</span><span class="nx">module</span><span class="o">&gt;</span>
<span class="nx">ValueError</span><span class="p">:</span> <span class="nx">invalid</span> <span class="nb">literal</span> <span class="nb">for</span> <span class="nx">int</span><span class="p">()</span> <span class="k">with</span> <span class="nx">base</span> <span class="mi">10</span><span class="p">:</span> <span class="s1">&#39;545.2222&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nx">int</span><span class="p">(</span><span class="nx">float</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span>
<span class="mi">545</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nx">int</span><span class="p">(</span><span class="s1">&#39;544&#39;</span><span class="p">)</span>
<span class="mi">544</span>
</pre></div>


<p>另一种，用 <a href="http://docs.python.org/2/library/ast.html#ast.literal_eval">ast</a>模块</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">import</span> <span class="n">ast</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ast</span><span class="p">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="s">&quot;545.2222&quot;</span><span class="p">)</span>
<span class="mf">545.2222</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ast</span><span class="p">.</span><span class="n">literal_eval</span><span class="p">(</span><span class="s">&quot;31&quot;</span><span class="p">)</span>
<span class="mi">31</span>
</pre></div>


<h3>如何反向输出一个字符串</h3>
<p>问题 <a href="http://stackoverflow.com/questions/931092/reverse-a-string-in-python">链接</a></p>
<p>做法</p>
<div class="highlight"><pre><span class="s-Atom">&gt;&gt;&gt;</span> <span class="s-Atom">&#39;hello world&#39;</span><span class="p">[</span><span class="s-Atom">::-</span><span class="m">1</span><span class="p">]</span>
<span class="s-Atom">&#39;dlrow olleh&#39;</span>
</pre></div>


<h3>如何随机生成大写字母和数字组成的字符串</h3>
<div class="highlight"><pre><span class="mi">6U1</span><span class="n">S75</span>
<span class="mi">4</span><span class="n">Z4UKK</span>
<span class="n">U911K4</span>
</pre></div>


<p>解决</p>
<div class="highlight"><pre><span class="n">import</span> <span class="n">string</span><span class="p">,</span> <span class="n">random</span>
<span class="err">&#39;&#39;</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">random</span><span class="p">.</span><span class="n">choice</span><span class="p">(</span><span class="n">string</span><span class="p">.</span><span class="n">ascii_uppercase</span> <span class="o">+</span> <span class="n">string</span><span class="p">.</span><span class="n">digits</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="n">in</span> <span class="n">range</span><span class="p">(</span><span class="n">N</span><span class="p">))</span>
</pre></div>


<h3>逐行读文件去除换行符(perl chomp line)</h3>
<p>问题 <a href="http://stackoverflow.com/questions/275018/how-can-i-remove-chomp-a-newline-in-python">链接</a>
类似问题 <a href="http://stackoverflow.com/questions/761804/trimming-a-string-in-python">链接</a></p>
<p>读一个文件，如何获取每一行内容（不包括换行符）</p>
<p>比较pythonic的做法:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">text</span> <span class="o">=</span> <span class="s">&quot;line 1</span><span class="se">\n</span><span class="s">line 2</span><span class="se">\r\n</span><span class="s">line 3</span><span class="se">\n</span><span class="s">line 4&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">text</span><span class="p">.</span><span class="n">splitlines</span><span class="p">()</span>
<span class="p">[</span><span class="err">&#39;</span><span class="n">line</span> <span class="mi">1</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">line</span> <span class="mi">2</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">line</span> <span class="mi">3</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">line</span> <span class="mi">4</span><span class="err">&#39;</span><span class="p">]</span>
</pre></div>


<p>用rstrip,(rstrip/lstrip/strip)</p>
<div class="highlight"><pre><span class="cp">#去除了空白+换行</span>
<span class="o">&gt;&gt;&gt;</span> <span class="err">&#39;</span><span class="n">test</span> <span class="n">string</span> <span class="err">\</span><span class="n">n</span><span class="err">&#39;</span><span class="p">.</span><span class="n">rstrip</span><span class="p">()</span>
<span class="err">&#39;</span><span class="n">test</span> <span class="n">string</span><span class="err">&#39;</span>
<span class="cp">#只去换行</span>
<span class="o">&gt;&gt;&gt;</span> <span class="err">&#39;</span><span class="n">test</span> <span class="n">string</span> <span class="err">\</span><span class="n">n</span><span class="err">&#39;</span><span class="p">.</span><span class="n">rstrip</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">)</span>
<span class="err">&#39;</span><span class="n">test</span> <span class="n">string</span> <span class="err">&#39;</span>
<span class="cp">#更通用的做法，系统相关</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">import</span> <span class="n">os</span><span class="p">,</span> <span class="n">sys</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">sys</span><span class="p">.</span><span class="n">platform</span>
<span class="err">&#39;</span><span class="n">linux2</span><span class="err">&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">&quot;foo</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">.</span><span class="n">rstrip</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">linesep</span><span class="p">)</span>
<span class="err">&#39;</span><span class="n">foo</span><span class="err">\</span><span class="n">r</span><span class="err">&#39;</span>
</pre></div>


<h3>python中字符串的contains</h3>
<p>问题 <a href="http://stackoverflow.com/questions/3437059/does-python-have-a-string-contains-method">链接</a></p>
<p>python中字符串判断contains</p>
<p>使用in关键字</p>
<div class="highlight"><pre><span class="k">if</span> <span class="n">not</span> <span class="s">&quot;blah&quot;</span> <span class="n">in</span> <span class="n">somestring</span><span class="o">:</span> <span class="k">continue</span>
<span class="k">if</span> <span class="s">&quot;blah&quot;</span> <span class="n">not</span> <span class="n">in</span> <span class="n">somestring</span><span class="o">:</span> <span class="k">continue</span>
</pre></div>


<p>使用字符串的find/index  (注意index查找失败抛异常)</p>
<div class="highlight"><pre><span class="n">s</span> <span class="o">=</span> <span class="s">&quot;This be a string&quot;</span>
<span class="k">if</span> <span class="n">s</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;is&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">:</span>
    <span class="n">print</span> <span class="s">&quot;No &#39;is&#39; here!&quot;</span>
<span class="nl">else:</span>
    <span class="n">print</span> <span class="s">&quot;Found &#39;is&#39; in the string.&quot;</span>
</pre></div>


<h3>如何判断一个字符串是数字</h3>
<p>问题 <a href="http://stackoverflow.com/questions/354038/how-do-i-check-if-a-string-is-a-number-in-python">链接</a></p>
<p>使用这种方法会不会十分丑陋和低效</p>
<div class="highlight"><pre><span class="n">def</span> <span class="n">is_number</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">:</span>
    <span class="nl">try:</span>
        <span class="kt">float</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">True</span>
    <span class="n">except</span> <span class="n">ValueError</span><span class="o">:</span>
        <span class="k">return</span> <span class="n">False</span>
</pre></div>


<p>使用这种方法并不丑陋和低效</p>
<p>使用isdigit(缺点，对非整数无能为力)</p>
<div class="highlight"><pre><span class="n">a</span> <span class="o">=</span> <span class="s">&quot;03523&quot;</span>
<span class="n">a</span><span class="p">.</span><span class="n">isdigit</span><span class="p">()</span>
</pre></div>


<h3>如何填充0到数字字符串中保证统一长度</h3>
<p>问题 <a href="http://stackoverflow.com/questions/339007/python-nicest-way-to-pad-zeroes-to-string">链接</a></p>
<p>对于字符串</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">n</span> <span class="o">=</span> <span class="sc">&#39;4&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">print</span> <span class="n">n</span><span class="p">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="err">&#39;</span><span class="mo">004</span><span class="err">&#39;</span>
</pre></div>


<p>对于数字,<a href="http://docs.python.org/2/library/string.html#formatexamples">相关文档</a></p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">4</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">print</span> <span class="err">&#39;</span><span class="o">%</span><span class="mo">03</span><span class="n">d</span><span class="err">&#39;</span> <span class="o">%</span> <span class="n">n</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mo">004</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">print</span> <span class="s">&quot;{0:03d}&quot;</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="err">#</span> <span class="n">python</span> <span class="o">&gt;=</span> <span class="mf">2.6</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mo">004</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">print</span><span class="p">(</span><span class="s">&quot;{0:03d}&quot;</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>  <span class="err">#</span> <span class="n">python</span> <span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mo">004</span>
</pre></div>


<h2>控制结构（条件、循环）</h2>
<h3>如何在循环中获取下标</h3>
<p>问题 <a href="http://stackoverflow.com/questions/522563/accessing-the-index-in-python-for-loops">链接</a></p>
<p>使用enumerate</p>
<div class="highlight"><pre><span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">val</span> <span class="n">in</span> <span class="n">enumerate</span><span class="p">(</span><span class="n">ints</span><span class="p">)</span><span class="o">:</span>
    <span class="n">print</span> <span class="n">idx</span><span class="p">,</span> <span class="n">val</span>
</pre></div>


<h3>如何判断一个变量的类型</h3>
<p>问题 <a href="http://stackoverflow.com/questions/402504/how-to-determine-the-variable-type-in-python">链接</a></p>
<p>使用type</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">123</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">type</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">type</span> <span class="err">&#39;</span><span class="kt">int</span><span class="err">&#39;</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">type</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="n">is</span> <span class="kt">int</span>
<span class="n">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">123456789L</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">type</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">type</span> <span class="err">&#39;</span><span class="kt">long</span><span class="err">&#39;</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">type</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="n">is</span> <span class="kt">long</span>
<span class="n">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">i</span> <span class="o">=</span> <span class="mf">123.456</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">type</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">type</span> <span class="err">&#39;</span><span class="kt">float</span><span class="err">&#39;</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">type</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="n">is</span> <span class="kt">float</span>
<span class="n">True</span>
</pre></div>


<p>另外一个相同的问题  <a href="http://stackoverflow.com/questions/2225038/python-determine-the-type-of-an-object">链接</a></p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">type</span><span class="p">(</span> <span class="p">[]</span> <span class="p">)</span> <span class="o">==</span> <span class="n">list</span>
<span class="n">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">type</span><span class="p">(</span> <span class="p">{}</span> <span class="p">)</span> <span class="o">==</span> <span class="n">dict</span>
<span class="n">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">type</span><span class="p">(</span> <span class="s">&quot;&quot;</span> <span class="p">)</span> <span class="o">==</span> <span class="n">str</span>
<span class="n">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">type</span><span class="p">(</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">==</span> <span class="kt">int</span>
<span class="n">True</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">class</span> <span class="n">Test1</span> <span class="p">(</span> <span class="n">object</span> <span class="p">)</span><span class="o">:</span>
    <span class="n">pass</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">class</span> <span class="n">Test2</span> <span class="p">(</span> <span class="n">Test1</span> <span class="p">)</span><span class="o">:</span>
    <span class="n">pass</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">Test1</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">Test2</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">type</span><span class="p">(</span> <span class="n">a</span> <span class="p">)</span> <span class="o">==</span> <span class="n">Test1</span>
<span class="n">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">type</span><span class="p">(</span> <span class="n">b</span> <span class="p">)</span> <span class="o">==</span> <span class="n">Test2</span>
<span class="n">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">type</span><span class="p">(</span> <span class="n">b</span> <span class="p">)</span> <span class="o">==</span> <span class="n">Test1</span>
<span class="n">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">isinstance</span><span class="p">(</span> <span class="n">b</span><span class="p">,</span> <span class="n">Test1</span> <span class="p">)</span>
<span class="n">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">isinstance</span><span class="p">(</span> <span class="n">b</span><span class="p">,</span> <span class="n">Test2</span> <span class="p">)</span>
<span class="n">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">isinstance</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">Test1</span> <span class="p">)</span>
<span class="n">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">isinstance</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">Test2</span> <span class="p">)</span>
<span class="n">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">isinstance</span><span class="p">(</span> <span class="p">[],</span> <span class="n">list</span> <span class="p">)</span>
<span class="n">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">isinstance</span><span class="p">(</span> <span class="p">{},</span> <span class="n">dict</span> <span class="p">)</span>
<span class="n">True</span>
</pre></div>


<h2>类</h2>
<h3>如何判断一个对象是否拥有某个属性</h3>
<p>问题 <a href="http://stackoverflow.com/questions/610883/how-to-know-if-an-object-has-an-attribute-in-python">链接</a></p>
<div class="highlight"><pre><span class="k">if</span> <span class="n">hasattr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">property</span><span class="err">&#39;</span><span class="p">)</span><span class="o">:</span>
    <span class="n">a</span><span class="p">.</span><span class="n">property</span>
</pre></div>


<p>两种风格</p>
<p>EAFP(easier to ask for forgiveness than permission)</p>
<p>LBYL(look before you leap)</p>
<p>相关内容 
<a href="http://web.archive.org/web/20070929122422/http://mail.python.org/pipermail/python-list/2003-May/205182.html">EAFP vs LBYL (was Re: A little disappointed so far)</a>
<a href="http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#eafp-vs-lbyl">EAFP vs. LBYL @Code Like a Pythonista: Idiomatic Python</a></p>
<div class="highlight"><pre><span class="k">try</span><span class="o">:</span>
    <span class="n">doStuff</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">property</span><span class="o">)</span>
<span class="n">except</span> <span class="n">AttributeError</span><span class="o">:</span>
    <span class="n">otherStuff</span><span class="o">()</span>
<span class="n">or</span>

<span class="k">if</span> <span class="n">hasattr</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="s1">&#39;property&#39;</span><span class="o">):</span>
    <span class="n">doStuff</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">property</span><span class="o">)</span>
<span class="k">else</span><span class="o">:</span>
    <span class="n">otherStuff</span><span class="o">()</span>
</pre></div>


<h3>Python中的类变量(环境变量)</h3>
<p>问题 <a href="http://stackoverflow.com/questions/68645/static-class-variables-in-python">链接</a></p>
<p>在类中定义的变量，不在方法定义中，成为类变量或静态变量</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">class</span> <span class="n">MyClass</span><span class="o">:</span>
<span class="p">...</span>     <span class="n">i</span> <span class="o">=</span> <span class="mi">3</span>
<span class="p">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">MyClass</span><span class="p">.</span><span class="n">i</span>
<span class="mi">3</span>
</pre></div>


<p>i是类级别的变量，但这里要和实例级别的变量i区分开</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">m</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">m</span><span class="p">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">4</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">MyClass</span><span class="p">.</span><span class="n">i</span><span class="p">,</span> <span class="n">m</span><span class="p">.</span><span class="n">i</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>


<p>这和C++/java完全不同，但和C#区别不大，C#不允许类实例获取静态变量</p>
<p>具体见 <a href="http://docs.python.org/2/tutorial/classes.html#SECTION0011320000000000000000">what the Python tutorial has to say on the subject of classes and class objects</a></p>
<p>另外，静态方法</p>
<div class="highlight"><pre><span class="n">class</span> <span class="n">C</span><span class="o">:</span>
    <span class="err">@</span><span class="n">staticmethod</span>
    <span class="n">def</span> <span class="n">f</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">,</span> <span class="p">...)</span><span class="o">:</span> <span class="p">...</span>
</pre></div>


<h3>如何定义静态方法(static method)</h3>
<p>问题 <a href="http://stackoverflow.com/questions/735975/static-methods-in-python">链接</a></p>
<p>使用 <a href="http://docs.python.org/2/library/functions.html#staticmethod">staticmethod</a>装饰器</p>
<div class="highlight"><pre><span class="n">class</span> <span class="n">MyClass</span><span class="p">(</span><span class="n">object</span><span class="p">)</span><span class="o">:</span>
    <span class="err">@</span><span class="n">staticmethod</span>
    <span class="n">def</span> <span class="n">the_static_method</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">:</span>
        <span class="n">print</span> <span class="n">x</span>
<span class="n">MyClass</span><span class="p">.</span><span class="n">the_static_method</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="err">#</span> <span class="n">outputs</span> <span class="mi">2</span>
</pre></div>


<h3>@staticmethod和@classmethod的区别</h3>
<p>问题 <a href="http://stackoverflow.com/questions/136097/what-is-the-difference-between-staticmethod-and-classmethod-in-python">链接</a></p>
<p>staticmethod，静态方法在调用时，对类及实例一无所知</p>
<p>仅仅是获取传递过来的参数，没有隐含的第一个参数，在Python里基本上用处不大，你完全可以用一个模块函数替换它</p>
<p>classmethod, 在调用时，将会获取到其所在的类，或者类实例，作为其第一个参数</p>
<p>当你想将函数作为一个类工厂时，这非常有用: 第一个参数是类，你可以实例化出对应实例对象，甚至子类对象。</p>
<p>可以观察下 dict.fromkey(),是一个类方法，当子类调用时，返回子类的实例</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">class</span> <span class="n">DictSubclass</span><span class="p">(</span><span class="n">dict</span><span class="p">)</span><span class="o">:</span>
<span class="p">...</span>     <span class="n">def</span> <span class="n">__repr__</span><span class="p">(</span><span class="n">self</span><span class="p">)</span><span class="o">:</span>
<span class="p">...</span>         <span class="k">return</span> <span class="s">&quot;DictSubclass&quot;</span>
<span class="p">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dict</span><span class="p">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">)</span>
<span class="p">{</span><span class="sc">&#39;a&#39;</span><span class="o">:</span> <span class="n">None</span><span class="p">,</span> <span class="sc">&#39;c&#39;</span><span class="o">:</span> <span class="n">None</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="o">:</span> <span class="n">None</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">DictSubclass</span><span class="p">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">)</span>
<span class="n">DictSubclass</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>


<h3>如何获取一个实例的类名</h3>
<p>问题 <a href="http://stackoverflow.com/questions/510972/getting-the-class-name-of-an-instance-in-python">链接</a></p>
<div class="highlight"><pre><span class="n">x</span><span class="p">.</span><span class="n">__class__</span><span class="p">.</span><span class="n">__name__</span>
</pre></div>


<h2>模块</h2>
<h3>如何列出一个目录的所有文件</h3>
<p>问题 <a href="http://stackoverflow.com/questions/3207219/how-to-list-all-files-of-a-directory-in-python">链接</a></p>
<p>1.使用os.listdir(),得到目录下的所有文件和文件夹</p>
<div class="highlight"><pre><span class="cp">#只需要文件</span>
<span class="n">from</span> <span class="n">os</span> <span class="n">import</span> <span class="n">listdir</span>
<span class="n">from</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span> <span class="n">import</span> <span class="n">isfile</span><span class="p">,</span> <span class="n">join</span>
<span class="n">onlyfiles</span> <span class="o">=</span> <span class="p">[</span> <span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="n">in</span> <span class="n">listdir</span><span class="p">(</span><span class="n">mypath</span><span class="p">)</span> <span class="k">if</span> <span class="n">isfile</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">mypath</span><span class="p">,</span><span class="n">f</span><span class="p">))</span> <span class="p">]</span>
</pre></div>


<p>2.os.walk()</p>
<div class="highlight"><pre><span class="n">from</span> <span class="n">os</span> <span class="n">import</span> <span class="n">walk</span>

<span class="n">f</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="p">(</span><span class="n">dirpath</span><span class="p">,</span> <span class="n">dirnames</span><span class="p">,</span> <span class="n">filenames</span><span class="p">)</span> <span class="n">in</span> <span class="n">walk</span><span class="p">(</span><span class="n">mypath</span><span class="p">)</span><span class="o">:</span>
    <span class="n">f</span><span class="p">.</span><span class="n">extend</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span>
    <span class="k">break</span>
</pre></div>


<p>3.glob</p>
<div class="highlight"><pre><span class="n">import</span> <span class="n">glob</span>
<span class="n">print</span> <span class="n">glob</span><span class="p">.</span><span class="n">glob</span><span class="p">(</span><span class="s">&quot;/home/adam/*.txt&quot;</span><span class="p">)</span>
</pre></div>


<p>重复问题 <a href="http://stackoverflow.com/questions/120656/directory-listing-in-python">链接</a></p>
<p>import os</p>
<div class="highlight"><pre><span class="k">for</span> <span class="n">dirname</span><span class="p">,</span> <span class="n">dirnames</span><span class="p">,</span> <span class="n">filenames</span> <span class="n">in</span> <span class="n">os</span><span class="p">.</span><span class="n">walk</span><span class="p">(</span><span class="sc">&#39;.&#39;</span><span class="p">)</span><span class="o">:</span>
    <span class="err">#</span> <span class="n">print</span> <span class="n">path</span> <span class="n">to</span> <span class="n">all</span> <span class="n">subdirectories</span> <span class="n">first</span><span class="p">.</span>
    <span class="k">for</span> <span class="n">subdirname</span> <span class="n">in</span> <span class="n">dirnames</span><span class="o">:</span>
        <span class="n">print</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirname</span><span class="p">,</span> <span class="n">subdirname</span><span class="p">)</span>

    <span class="err">#</span> <span class="n">print</span> <span class="n">path</span> <span class="n">to</span> <span class="n">all</span> <span class="n">filenames</span><span class="p">.</span>
    <span class="k">for</span> <span class="n">filename</span> <span class="n">in</span> <span class="n">filenames</span><span class="o">:</span>
        <span class="n">print</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirname</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</pre></div>


<h3>json和simplejson的区别</h3>
<p>问题 <a href="http://stackoverflow.com/questions/712791/json-and-simplejson-module-differences-in-python">链接</a></p>
<p>json就是simple，加入到标准库. json在2.6加入，simplejson在2.4+,2.6+,更有优势</p>
<p>另外，simplejson更新频率更高，如果你想使用最新版本，建议用simplejson</p>
<p>好的做法是</p>
<div class="highlight"><pre><span class="k">try</span><span class="o">:</span> <span class="k">import</span> <span class="nn">simplejson</span> <span class="k">as</span> <span class="n">json</span>
<span class="n">except</span> <span class="n">ImportError</span><span class="o">:</span> <span class="k">import</span> <span class="nn">json</span>
</pre></div>


<p>另外,可以关注二者性能上的比较</p>
<h3>python中如何获取当前时间</h3>
<p>问题 <a href="http://stackoverflow.com/questions/415511/how-to-get-current-time-in-python">链接</a></p>
<p>时间日期</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">import</span> <span class="n">datetime</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">datetime</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">78915</span><span class="p">)</span>
</pre></div>


<p>如果仅获取时间</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">time</span><span class="p">(</span><span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">())</span>
<span class="n">datetime</span><span class="p">.</span><span class="n">time</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">78915</span><span class="p">))</span>
<span class="cp">#等价</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">().</span><span class="n">time</span><span class="p">()</span>
</pre></div>


<p>可以从文档中获取更多 <a href="http://docs.python.org/2/library/datetime.html">文档</a></p>
<p>如果想避免额外的datetime.</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">from</span> <span class="n">datetime</span> <span class="n">import</span> <span class="n">datetime</span>
</pre></div>


<h2>其他</h2>
<h3>如何从标准输入读取内容stdin</h3>
<p>问题 <a href="http://stackoverflow.com/questions/1450393/how-do-you-read-from-stdin-in-python">链接</a></p>
<p>使用<a href="http://docs.python.org/2/library/fileinput.html">fileinput</a></p>
<div class="highlight"><pre><span class="n">import</span> <span class="n">fileinput</span>
<span class="k">for</span> <span class="n">line</span> <span class="n">in</span> <span class="n">fileinput</span><span class="p">.</span><span class="n">input</span><span class="p">()</span><span class="o">:</span>
    <span class="n">pass</span>
</pre></div>


<h3>foo is None 和 foo == None的区别</h3>
<p>问题 <a href="http://stackoverflow.com/questions/26595/is-there-any-difference-between-foo-is-none-and-foo-none">链接</a></p>
<div class="highlight"><pre><span class="k">if</span> <span class="n">foo</span> <span class="n">is</span> <span class="n">None</span><span class="o">:</span> <span class="n">pass</span>
<span class="k">if</span> <span class="n">foo</span> <span class="o">==</span> <span class="n">None</span><span class="o">:</span> <span class="n">pass</span>
</pre></div>


<p>如果比较相同的对象实例，is总是返回True
而 == 最终取决于 "<strong>eq</strong>()"</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">class</span> <span class="n">foo</span><span class="p">(</span><span class="n">object</span><span class="p">)</span><span class="o">:</span>
    <span class="n">def</span> <span class="n">__eq__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span><span class="o">:</span>
        <span class="k">return</span> <span class="n">True</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n">foo</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">==</span> <span class="n">None</span>
<span class="n">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="n">is</span> <span class="n">None</span>
<span class="n">False</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">list1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">list2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">list1</span><span class="o">==</span><span class="n">list2</span>
<span class="n">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">list1</span> <span class="n">is</span> <span class="n">list2</span>
<span class="n">False</span>
</pre></div>


<p>另外</p>
<div class="highlight"><pre><span class="p">(</span><span class="n">ob1</span> <span class="n">is</span> <span class="n">ob2</span><span class="p">)</span> <span class="err">等价于</span> <span class="p">(</span><span class="n">id</span><span class="p">(</span><span class="n">ob1</span><span class="p">)</span> <span class="o">==</span> <span class="n">id</span><span class="p">(</span><span class="n">ob2</span><span class="p">))</span>
</pre></div>


<h3>__init__.py是做什么用的</h3>
<p>问题 <a href="http://stackoverflow.com/questions/448271/what-is-init-py-for">链接</a></p>
<p>这是包的一部分，<a href="http://docs.python.org/2/tutorial/modules.html#packages">具体文档</a></p>
<p>__init__.py让Python把目录当成包，</p>
<p>最简单的例子，__init__.py仅是一个空文件，但它可以一样执行包初始化代码或者设置__all__变量，后续说明</p>
<h3>如何获取安装的python模块列表</h3>
<p>问题 <a href="http://stackoverflow.com/questions/739993/get-a-list-of-installed-python-modules">链接</a></p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">help</span><span class="p">(</span><span class="err">&#39;</span><span class="n">modules</span><span class="err">&#39;</span><span class="p">)</span>
</pre></div>


<h2>环境相关</h2>
<h3>setup.py安装后如何卸载</h3>
<p>问题 <a href="http://stackoverflow.com/questions/1550226/python-setup-py-uninstall">链接</a></p>
<p>使用下面命令安装的包如何卸载</p>
<div class="highlight"><pre><span class="n">python</span> <span class="n">setup</span><span class="p">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>


<p>手工删除的话</p>
<div class="highlight"><pre><span class="n">python</span> <span class="n">setup</span><span class="p">.</span><span class="n">py</span> <span class="n">install</span> <span class="o">--</span><span class="n">record</span> <span class="n">files</span><span class="p">.</span><span class="n">txt</span>
<span class="n">cat</span> <span class="n">files</span><span class="p">.</span><span class="n">txt</span> <span class="o">|</span> <span class="n">xargs</span> <span class="n">rm</span> <span class="o">-</span><span class="n">rf</span>
</pre></div>


<h2>异常</h2>
<h3>如何一行内处理多个异常</h3>
<p>问题 <a href="http://stackoverflow.com/questions/6470428/catch-multiple-exceptions-in-one-line-except-block">链接</a></p>
<p>我知道可以这么做</p>
<div class="highlight"><pre><span class="nl">try:</span>
    <span class="err">#</span> <span class="k">do</span> <span class="n">something</span> <span class="n">that</span> <span class="n">may</span> <span class="n">fail</span>
<span class="nl">except:</span>
    <span class="err">#</span> <span class="k">do</span> <span class="n">this</span> <span class="k">if</span> <span class="n">ANYTHING</span> <span class="n">goes</span> <span class="n">wrong</span>
</pre></div>


<p>也可以</p>
<div class="highlight"><pre><span class="nl">try:</span>
    <span class="err">#</span> <span class="k">do</span> <span class="n">something</span> <span class="n">that</span> <span class="n">may</span> <span class="n">fail</span>
<span class="n">except</span> <span class="n">IDontLikeYourFaceException</span><span class="o">:</span>
    <span class="err">#</span> <span class="n">put</span> <span class="n">on</span> <span class="n">makeup</span> <span class="n">or</span> <span class="n">smile</span>
<span class="n">except</span> <span class="n">YouAreTooShortException</span><span class="o">:</span>
    <span class="err">#</span> <span class="n">stand</span> <span class="n">on</span> <span class="n">a</span> <span class="n">ladder</span>
</pre></div>


<p>如果想在一行里处理多个异常的话</p>
<div class="highlight"><pre><span class="nl">try:</span>
    <span class="err">#</span> <span class="k">do</span> <span class="n">something</span> <span class="n">that</span> <span class="n">may</span> <span class="n">fail</span>
<span class="n">except</span> <span class="n">IDontLIkeYouException</span><span class="p">,</span> <span class="n">YouAreBeingMeanException</span><span class="o">:</span> <span class="err">#没生效</span>
<span class="n">except</span> <span class="n">Exception</span><span class="p">,</span> <span class="n">e</span><span class="o">:</span> <span class="err">#捕获了所有</span>
    <span class="err">#</span> <span class="n">say</span> <span class="n">please</span>
</pre></div>


<p>答案</p>
<div class="highlight"><pre><span class="cp"># as在python2.6,python2.7中仍然可以使用</span>
<span class="n">except</span> <span class="p">(</span><span class="n">IDontLIkeYouException</span><span class="p">,</span> <span class="n">YouAreBeingMeanException</span><span class="p">)</span> <span class="n">as</span> <span class="n">e</span><span class="o">:</span>
    <span class="n">pass</span>
</pre></div>


<h3>如何flush Python的print输出</h3>
<p>问题 <a href="http://stackoverflow.com/questions/230751/how-to-flush-output-of-python-print">链接</a>
重复问题 <a href="http://stackoverflow.com/questions/107705/python-output-buffering">链接</a></p>
<p>默认print输出到sys.stdout</p>
<div class="highlight"><pre><span class="n">import</span> <span class="n">sys</span>
<span class="n">sys</span><span class="p">.</span><span class="n">stdout</span><span class="p">.</span><span class="n">flush</span><span class="p">()</span>
</pre></div>


<p>参考
<a href="http://docs.python.org/2/reference/simple_stmts.html#the-print-statement">http://docs.python.org/reference/simple_stmts.html#the-print-statement</a>
<a href="http://docs.python.org/2/library/sys.html">http://docs.python.org/library/sys.html</a>
<a href="http://docs.python.org/2/library/stdtypes.html#file-objects">http://docs.python.org/library/stdtypes.html#file-objects</a></p>
        </div><!-- /.entry-content -->
                <div class="comments">
            版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" >Creative Commons BY-NC-ND 3.0</a>
        <h2>Comments !</h2>
            <div id="disqus_thread"></div>
            <script type="text/javascript">
               var disqus_identifier = "posts/2013/07/20/python-stackoverflow-vote-top.html";
               (function() {
               var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
               dsq.src = 'http://wklken.disqus.com/embed.js';
               (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
              })();
            </script>
        </div>
        
        </article>
</div>


</div>
</section>
<script type="text/javascript">
    var disqus_shortname = 'wklken';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>


<!-- JiaThis Button BEGIN -->
<script type="text/javascript" >
var jiathis_config={
    siteNum:15,
    sm:"fav,copy,ishare,tsina,googleplus,fb,twitter,evernote,ydnote,sdonote,xianguo,digg,qingbiji,weixin",
    summary:"",
    boldNum:3,
    showClose:false,
    hideMore:true
}
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code_mini/jiathis_r.js?btn=r2.gif&move=0" charset="utf-8"></script>
<!-- JiaThis Button END -->
<a href="#top" id="toTop" style="display: inline;"></a>



        <section id="extras" class="body">
                        </section><!-- /#extras -->

		<footer id="footer">
		<p class="copyright">
                <address id="about" class="vcard body">
                    Powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Theme by <a href="https://github.com/daker">Adnane Belmadiaf</a> and modify by <a href="https://github.com/wklken">wklken</a>.

                    <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">License <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">CC BY-NC-ND</a>.
             </address><!-- /#about -->

			 </p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-42275748-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>


</body>
</html>