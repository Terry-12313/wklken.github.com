<!DOCTYPE html>
<html lang="en">

<!--[if IE 8]> <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<head>
    <meta name="google-site-verification" content="SzE6WCs23qFevgBzRIuG9vcfLU0lW_Vd5hFT-cJOLBE" />
    <title>Vim技巧补充</title>
    <meta charset="utf-8" />
    <meta name="description" content="">
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

        <link rel="shortcut icon" href="/favicon.ico"/>
        <link rel="stylesheet" href="/theme/css/styles.css" media="all" />
        <link rel="stylesheet" href="/theme/css/ui.totop.css" media="all" />

        <!--
        <link href='http://fonts.googleapis.com/css?family=Gentium+Basic:400,700,400italic,700italic|Gentium+Book+Basic:400,700|PT+Sans+Narrow|Source+Code+Pro' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="/theme/css/normalize.css" media="all" />
        -->

        <link rel="stylesheet" href="/theme/css/font-awesome.min.css">
        <!--[if IE 7]>
            <link rel="stylesheet" href="/theme/css/font-awesome-ie7.min.css">
        <![endif]-->

        <link href="/" type="application/atom+xml" rel="alternate" title="wklken's blog ATOM Feed" />
        <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="wklken's blog RSS Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie.css"/>
                <script src="/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie6.css"/><![endif]-->

<script src="/theme/js/jquery.ui.totop.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $().UItoTop({ easingType: 'easeOutQuart' });
    });
</script>

</head>

<body id="index" class="home">
    <div id="page" class="row">
        <div class="large-8 large-centered columns">

        <header id="header">
            <div class="constraint">
                <div class="o"> 
                    <a href="/"><h1 class="banner">Wklken <span class="blue"> Python</span></h1></a>

                <div class="social">
                            <a href="https://github.com/wklken" target='_blank'><i class="icon-github-sign icon-2x"></i></a>
                            <a href="http://weibo.com/wklken" target='_blank'><i class="icon-weibo icon-2x"></i></a>
                            <a href="mailto:wklken@yeah.net"><i class="icon-envelope icon-2x"></i></a>
                            <a href="/feed.xml" target='_blank'><i class="icon-rss-sign icon-2x"></i></a>
                </div>
                <div class="nav">
                            <a href="/">首页</a>
                            <a href="/categories.html">分类</a>
                            <a href="/archives.html">归档</a>
                            <a href="/pages/projects.html">项目</a>
                            <a href="/pages/tools.html">工具</a>
                            <a href="/pages/books.html">书单</a>
                            <a href="/pages/aboutme.html">关于</a>

                </div>

                </div>
            </div>
        </header><!-- /#banner -->

        <section id="main">

<article id="article">
    <section id="header">
        <!--
        <div class="meta">2014年04月13日</div>
        <h1 id="title"> Vim技巧补充 </h1>
        -->
        <div class="meta"> &nbsp; </div>
        <h1> Vim技巧补充 </h1>
    </section>
    <section id="content">
        <p>读了一些文章，重新理一理，大部分是平常操作中容易忽视的,很容易忘了其实还可以这么干</p>
<h3>Text Object</h3>
<p>y/d/c + text-object-operation</p>
<div class="codehilite"><pre>    <span class="o">*</span> <span class="n">iw</span> <span class="err">…</span><span class="n">inner</span> <span class="n">word</span>
    <span class="o">*</span> <span class="n">aw</span> <span class="err">…</span><span class="n">a</span> <span class="n">word</span>
    <span class="o">*</span> <span class="n">iW</span> <span class="err">…</span><span class="n">inner</span> <span class="n">WORD</span>
    <span class="o">*</span> <span class="n">aW</span> <span class="err">…</span><span class="n">a</span> <span class="n">WORD</span>

    <span class="o">*</span> <span class="n">is</span> <span class="err">…</span><span class="n">inner</span> <span class="n">sentence</span>
    <span class="o">*</span> <span class="n">as</span> <span class="err">…</span><span class="n">a</span> <span class="n">sentence</span>

    <span class="o">*</span> <span class="n">ip</span> <span class="err">…</span><span class="n">inner</span> <span class="n">paragraph</span>
    <span class="o">*</span> <span class="n">ap</span> <span class="err">…</span><span class="n">a</span> <span class="n">paragraph</span>

    <span class="o">-------------------------</span>

    <span class="o">*</span> <span class="n">i</span><span class="p">(</span> <span class="n">or</span> <span class="n">i</span><span class="p">)</span> <span class="err">…</span><span class="n">inner</span> <span class="n">block</span>
    <span class="o">*</span> <span class="n">a</span><span class="p">(</span> <span class="n">or</span> <span class="n">a</span><span class="p">)</span> <span class="err">…</span><span class="n">a</span> <span class="n">block</span>
    <span class="o">*</span> <span class="n">i</span><span class="o">&lt;</span> <span class="n">or</span> <span class="n">i</span><span class="o">&gt;</span> <span class="err">…</span><span class="n">inner</span> <span class="n">block</span>
    <span class="o">*</span> <span class="n">a</span><span class="o">&lt;</span> <span class="n">or</span> <span class="n">i</span><span class="o">&gt;</span> <span class="err">…</span><span class="n">a</span> <span class="n">block</span>
    <span class="o">*</span> <span class="n">i</span><span class="p">{</span> <span class="n">or</span> <span class="n">i</span><span class="p">}</span> <span class="err">…</span><span class="n">inner</span> <span class="n">block</span>
    <span class="o">*</span> <span class="n">a</span><span class="p">{</span> <span class="n">or</span> <span class="n">a</span><span class="p">}</span> <span class="err">…</span><span class="n">a</span> <span class="n">block</span>

    <span class="o">*</span> <span class="n">i</span><span class="s">&quot; …inner block</span>
    <span class="o">*</span> <span class="n">a</span><span class="s">&quot; …a block</span>
    <span class="o">*</span> <span class="n">i</span><span class="err">`</span> <span class="err">…</span><span class="n">inner</span> <span class="n">block</span>
    <span class="o">*</span> <span class="n">a</span><span class="err">`</span> <span class="err">…</span><span class="n">a</span> <span class="n">block</span>
</pre></div>


<h3>替换</h3>
<p>命令格式</p>
<div class="codehilite"><pre><span class="o">:</span><span class="p">[</span><span class="n">range</span><span class="p">]</span><span class="n">s</span><span class="o">/</span><span class="n">pattern</span><span class="o">/</span><span class="n">string</span><span class="o">/</span><span class="p">[</span><span class="n">c</span><span class="p">,</span><span class="n">e</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">i</span><span class="p">]</span>

<span class="n">range</span><span class="p">,</span><span class="err">范围，</span> <span class="mi">1</span><span class="p">,</span><span class="mi">7</span><span class="err">指从第一行到第七行</span>  <span class="mi">1</span><span class="p">,</span><span class="err">$第一行到最后一行</span>
<span class="n">pattern</span><span class="p">,</span><span class="err">被替换字符串，可以用</span><span class="n">regexp</span><span class="err">来表示</span>
<span class="n">string</span><span class="p">,</span><span class="err">替换成的字符串</span>

<span class="nl">c:</span> <span class="n">confirm</span><span class="err">，每次替换前寻味</span>
<span class="nl">e:</span> <span class="err">不提示</span><span class="n">error</span>
<span class="nl">g:</span> <span class="n">globe</span><span class="p">,</span> <span class="err">不询问，整行替换</span><span class="p">[</span><span class="err">默认只替换第一个</span><span class="p">]</span>
<span class="nl">i:</span> <span class="n">ignore</span><span class="p">,</span><span class="err">不区分大小写</span>
</pre></div>


<p>e.g.</p>
<div class="codehilite"><pre><span class="o">:</span><span class="n">s</span><span class="o">/</span><span class="n">vivian</span><span class="o">/</span><span class="n">sky</span><span class="o">/</span>
<span class="err">替换当前行第一个</span><span class="n">vivian</span><span class="err">为</span><span class="n">sky</span>

<span class="o">:</span><span class="n">s</span><span class="o">/</span><span class="n">vivian</span><span class="o">/</span><span class="n">sky</span><span class="o">/</span><span class="n">g</span>
<span class="err">替换当前行所有</span><span class="n">vivian</span><span class="err">为</span><span class="n">sky</span><span class="err">，</span><span class="n">g</span><span class="err">表示</span><span class="n">global</span>

<span class="o">:</span><span class="n">n</span><span class="p">,</span><span class="err">$</span><span class="n">s</span><span class="o">/</span><span class="n">vivian</span><span class="o">/</span><span class="n">sky</span><span class="o">/</span>
<span class="err">替换第</span><span class="n">n</span><span class="err">行开始到最后一行中每一行的第一个</span><span class="n">vivian</span><span class="err">为</span><span class="n">sky</span><span class="err">，</span><span class="n">n</span><span class="err">为数字</span>

<span class="o">:</span><span class="p">.,</span><span class="err">$</span><span class="n">s</span><span class="o">/</span><span class="n">vivian</span><span class="o">/</span><span class="n">sky</span><span class="o">/</span><span class="n">g</span>
<span class="err">替换当前行开始到最后一行中每一行所有</span><span class="n">vivian</span><span class="err">为</span><span class="n">sky</span>

<span class="o">:%</span><span class="n">s</span><span class="o">/</span><span class="n">vivian</span><span class="o">/</span><span class="n">sky</span><span class="o">/</span><span class="n">g</span><span class="err">（等同于</span> <span class="o">:</span><span class="n">g</span><span class="o">/</span><span class="n">vivian</span><span class="o">/</span><span class="n">sky</span><span class="o">/</span><span class="n">g</span><span class="err">）</span>
<span class="err">替换每一行中所有</span> <span class="n">vivian</span> <span class="err">为</span> <span class="n">sky</span>

<span class="o">:</span><span class="n">s</span><span class="o">/</span><span class="n">vivian</span><span class="err">\</span><span class="c1">//sky\//</span>
<span class="err">替换当前行第一个</span><span class="n">vivian</span><span class="o">/</span><span class="err">为</span><span class="n">sky</span><span class="o">/</span><span class="err">，可以使用\作为转义符</span>

<span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="err">$</span><span class="n">s</span><span class="o">/^/</span><span class="n">some</span> <span class="n">string</span><span class="o">/</span>
<span class="err">在文件的第一行至最后一行的行首前插入</span><span class="n">some</span> <span class="n">string</span>

<span class="o">:%</span><span class="n">s</span><span class="o">/</span><span class="err">$</span><span class="o">/</span><span class="n">some</span> <span class="n">string</span><span class="o">/</span><span class="n">g</span>
<span class="err">在整个文件每一行的行尾添加</span><span class="n">some</span> <span class="n">string</span>

<span class="o">:%</span><span class="n">s</span><span class="o">/</span><span class="err">\</span><span class="n">s</span><span class="err">\</span><span class="o">+</span><span class="err">$</span><span class="c1">//</span>
<span class="err">去掉所有的行尾空格，“\</span><span class="n">s</span><span class="err">”表示空白字符（空格和制表符），“\</span><span class="o">+</span><span class="err">”对前面的字符匹配一次或多次（越多越好），“$”匹配行尾（使用“\$”表示单纯的“$”字符）</span>
</pre></div>


<p>反向引用</p>
<div class="codehilite"><pre><span class="c">%s/\(aa\)/\1-/g</span>
</pre></div>


<h3>修改</h3>
<p>1.字符修改-大小写</p>
<div class="codehilite"><pre><span class="n">v</span><span class="err">选中</span><span class="p">,</span> <span class="n">U</span><span class="err">切换大写，</span><span class="n">u</span><span class="err">切花小写</span>
<span class="o">~</span>      <span class="err">光标所在之处字符大小写呼唤</span>
<span class="n">guw</span>    <span class="err">光标下的单词变为小写</span>
<span class="n">gUw</span>    <span class="err">光标下的单词变为大写</span>
</pre></div>


<p>2.字符互换</p>
<div class="codehilite"><pre><span class="n">xp</span>  <span class="err">左右交换光标处两字符的位置</span>
</pre></div>


<p>3.行-合并</p>
<div class="codehilite"><pre><span class="n">J</span>   <span class="err">上下两行连起来</span>
<span class="err">选中多行，然后</span> <span class="n">J</span>    <span class="err">多行连起来</span>
</pre></div>


<p>4.操作</p>
<p>命令格式</p>
<div class="codehilite"><pre><span class="n">c</span><span class="p">{</span><span class="n">motion</span><span class="p">}</span>
<span class="err">删除并进入输入模式</span> <span class="n">c</span><span class="err">$</span>  <span class="n">ct</span><span class="o">!</span>
</pre></div>


<p>e.g.</p>
<div class="codehilite"><pre><span class="n">ciw</span>  <span class="n">change</span> <span class="n">inner</span> <span class="n">word</span><span class="p">,</span> <span class="err">修改当前光标下单词</span>
<span class="n">cis</span>  <span class="n">change</span> <span class="n">inner</span> <span class="n">sentence</span><span class="p">,</span> <span class="err">修改一整个句子</span>

<span class="cp">#text-object</span>
<span class="n">ci</span><span class="s">&quot;</span>
<span class="n">ci</span><span class="p">(</span>

<span class="n">cw</span>   <span class="err">修改一个单词</span>
<span class="n">cc</span>   <span class="n">change</span> <span class="n">the</span> <span class="n">whole</span> <span class="n">line</span><span class="p">,</span><span class="err">剪切光标所在行并进入插入模式</span>

<span class="n">ctx</span>  <span class="err">剪切光标至字符</span><span class="n">x</span><span class="err">，进入插入模式</span>
</pre></div>


<h3>删除</h3>
<div class="codehilite"><pre><span class="n">dG</span> <span class="err">删除至文件末尾</span>
<span class="n">dgg</span> <span class="err">删除只文件开头</span>
</pre></div>


<h3>查找和跳转</h3>
<p>跳转到当前行某个位置</p>
<div class="codehilite"><pre><span class="n">fx</span>  <span class="err">到第一个</span><span class="n">x</span>
<span class="mf">2f</span><span class="n">x</span> <span class="err">到第二个</span><span class="n">x</span>

<span class="n">Fx</span>  <span class="err">往回查找</span>
</pre></div>


<p>跳转到某行</p>
<div class="codehilite"><pre><span class="mi">50</span><span class="n">G</span> <span class="err">移动到</span> <span class="mi">50</span><span class="err">行</span>
<span class="o">:</span><span class="mi">50</span>
</pre></div>


<p>标记并跳转</p>
<div class="codehilite"><pre><span class="cp">#对26个字母有效</span>
<span class="n">ma</span> <span class="err">标记书签</span>
<span class="err">&#39;</span><span class="n">a</span> <span class="err">跳到书签</span>
<span class="err">&#39;</span><span class="p">.</span>  <span class="err">最后一次编辑的地方</span>
</pre></div>


<p>段落跳转</p>
<div class="codehilite"><pre><span class="p">{</span>   <span class="err">上一段</span><span class="p">(</span><span class="err">以空白行分隔</span><span class="p">)</span>
<span class="p">}</span>   <span class="err">下一段</span><span class="p">(</span><span class="err">以空白行分隔</span><span class="p">)</span>

<span class="p">)</span> <span class="err">下一个句子</span>
<span class="p">(</span> <span class="err">上一个句子</span>
</pre></div>


<h3>选中</h3>
<p>操作</p>
<div class="codehilite"><pre><span class="n">v</span>   <span class="err">按字符</span>
<span class="n">V</span>   <span class="err">按行</span>
<span class="n">ctrl</span><span class="o">+</span><span class="n">v</span> <span class="err">按块</span>
</pre></div>


<p>命令格式</p>
<div class="codehilite"><pre><span class="nx">va</span><span class="o">&lt;</span><span class="nb">object</span><span class="o">&gt;</span> <span class="ow">or</span> <span class="nx">vi</span><span class="o">&lt;</span><span class="nb">object</span><span class="o">&gt;</span>

<span class="nb">object</span> <span class="err">：</span>
    <span class="nx">w</span> <span class="err">一个单词，</span> <span class="nx">W</span> <span class="err">一个以空格为分隔的单词，</span>
    <span class="nb">s</span> <span class="err">一个句子，</span>
    <span class="nx">p</span> <span class="err">一个段落。</span>
    <span class="err">也可以是一个特别的字符：</span><span class="s2">&quot;、 &#39;、 )、 }、 ]。</span>
<span class="s2">注意，这里v换成d/y就成了删除，拷贝的命令</span>
</pre></div>


<p>e.g.</p>
<div class="codehilite"><pre><span class="err">假设你有一个字符串</span>
    <span class="p">(</span><span class="n">map</span> <span class="p">(</span><span class="o">+</span><span class="p">)</span> <span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)).</span>

<span class="err">而光标键在第一个</span> <span class="n">o</span> <span class="err">的位置。</span>
<span class="n">vi</span><span class="s">&quot; → 会选择 foo.</span>
<span class="n">va</span><span class="s">&quot; → 会选择 &quot;</span><span class="n">foo</span><span class="s">&quot;.</span>
<span class="n">vi</span><span class="p">)</span> <span class="err">→</span> <span class="err">会选择</span> <span class="s">&quot;foo&quot;</span><span class="p">.</span>
<span class="n">va</span><span class="p">)</span> <span class="err">→</span> <span class="err">会选择</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">).</span>
<span class="n">v2i</span><span class="p">)</span> <span class="err">→</span> <span class="err">会选择</span> <span class="n">map</span> <span class="p">(</span><span class="o">+</span><span class="p">)</span> <span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
<span class="n">v2a</span><span class="p">)</span> <span class="err">→</span> <span class="err">会选择</span> <span class="p">(</span><span class="n">map</span> <span class="p">(</span><span class="o">+</span><span class="p">)</span> <span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">))</span><span class="err">&#39;</span><span class="s">&quot;</span>
</pre></div>


<p>选中括号里的内容</p>
<div class="codehilite"><pre><span class="n">v</span><span class="o">%</span> <span class="err">光标在一侧括号</span>
</pre></div>


<p>全选</p>
<div class="codehilite"><pre><span class="n">ggVG</span>
</pre></div>


<h3>保存和退出</h3>
<div class="codehilite"><pre><span class="o">:</span><span class="n">e</span> <span class="n">file</span> <span class="err">打开文件</span>
<span class="n">ZQ</span>  <span class="err">无条件退出</span>
<span class="n">ZZ</span>  <span class="err">存盘退出</span>
</pre></div>


<p>保存部分内容</p>
<div class="codehilite"><pre><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span> <span class="n">w</span> <span class="n">a</span><span class="p">.</span><span class="n">txt</span>
<span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span> <span class="n">w</span> <span class="o">&gt;&gt;</span> <span class="n">a</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<p>另存为</p>
<div class="codehilite"><pre><span class="o">:</span><span class="n">saveas</span> <span class="n">new_file</span>
</pre></div>


<p>执行外部命令</p>
<div class="codehilite"><pre><span class="o">:!</span><span class="n">cmd</span>
<span class="o">:</span><span class="n">r</span><span class="o">!</span><span class="n">cmd</span>  <span class="err">指向外部命令的结果插入到当前</span>
</pre></div>


<h3>关于vim学习的建议</h3>
<p>来自网上两篇文章</p>
<div class="codehilite"><pre><span class="err">更多的是技能而非知识</span>
<span class="err">更多的是双手而非头脑</span>
<span class="n">Vim</span><span class="err">技巧</span>
<span class="err">不贪图一下子掌握</span>
<span class="err">不断实践</span>
<span class="err">不是由头脑来搜索该用哪条操作技巧</span>
<span class="err">而是建立手指的自然反应</span>
</pre></div>


<p>一定要阅读一下Bram Moolenaar(vim的作者)写的Seven habits of effective text editing(七个有效的文本编辑习惯)</p>
<p>七个习惯</p>
<div class="codehilite"><pre><span class="err">快速移动</span>
<span class="err">不要两次键入同样的东西</span>
<span class="err">错误修复</span>
<span class="err">经常需要编辑不止一个文件</span>
<span class="err">协同作业</span>
<span class="err">文本是结构化的</span>
<span class="err">养成习惯</span>
</pre></div>


<h3>其他</h3>
<p>大写的</p>
<div class="codehilite"><pre><span class="n">D</span> <span class="err">删除当前到行尾，不要用</span><span class="n">d</span><span class="err">$</span>
<span class="n">Y</span> <span class="err">复制整行，建议改写成复制当前到行尾</span>
<span class="n">C</span> <span class="err">修改当前到行尾</span>
</pre></div>


<p>repeat:</p>
<div class="codehilite"><pre><span class="nx">.</span> <span class="err">→</span> <span class="p">(</span><span class="err">小数点</span><span class="p">)</span> <span class="err">可以重复上一次的命令</span>
<span class="nb">N</span><span class="o">&lt;</span><span class="nb">command</span><span class="o">&gt;</span> <span class="err">→</span> <span class="err">重复某个命令</span><span class="nb">N</span><span class="err">次</span>
</pre></div>


<p>宏录制和使用</p>
<div class="codehilite"><pre><span class="err">待补充</span>
</pre></div>
    </section>

    <section id="copyright">
        <div class="copyright">
            版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" >Creative Commons BY-NC-ND 3.0</a>
        </div>
    </section>

    <section id="comments">

        <div class="comments">
            <h2>Comments !</h2>
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                var disqus_identifier = "/posts/2014/04/13/vim-addition-skills.html";
                (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://wklken.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            </div>
    </section>

</article>
        </section><!--end #main-->

            <footer class="row">
                <div class="large-12 columns">
                    <p>
                            Copyright © 2014 wklken <br>
                            Powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Social Icons by <a href="http://fortawesome.github.io/Font-Awesome/">Font-Awesome</a>.
                    </p>
                </div>
            </footer>

            </div>
        </div>

        <section id="extras" class="body">
        </section><!-- /#extras -->

    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-42275748-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>


<script src="http://upcdn.b0.upaiyun.com/libs/jquery/jquery-1.9.1.min.js"></script>

<!--
<script src="/theme/js/instantclick.min.js" data-no-instant></script>
<script data-no-instant>InstantClick.init(50);</script>
-->


</body>
</html>