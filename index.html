<!DOCTYPE html>
<html lang="en">
<head>
        <title>wklken blog</title>
        <meta charset="utf-8" />
     <meta name="description" content="">
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

        <link rel="shortcut icon" href="/favicon.ico"/>
        <link rel="stylesheet" href="http://wklken.github.io/theme/css/style.css" media="all" />
        <link rel="stylesheet" href="http://wklken.github.io/theme/css/mobile.css" media="all" />
        <link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,300italic,600italic,400,600,700,800' rel='stylesheet' type='text/css">

        <link href="http://wklken.github.io/" type="application/atom+xml" rel="alternate" title="wklken blog ATOM Feed" />
                <link href="http://wklken.github.io/feed" type="application/atom+xml" rel="alternate" title="wklken blog RSS Feed" />
        
        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://wklken.github.io/css/ie.css"/>
                <script src="http://wklken.github.io/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://wklken.github.io/css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
  <header id="header">
     <div class="constraint">
       <div class="o"> 

   <a href="/"><h1>Wklken <span class="red"> Python</span></h1></a>
   <!--                       <li><a href="http://wklken.github.io/feed"><i class="icon-rss"></i>  </a></li>
                           -->

		<div class="nav">
                                    <a href="/">Home</a>
                                    <a href="/archives.html">Archives</a>
                                    <a href="/categories.html">Categories</a>
                                    <a href="/pages/projects.html">Projects</a>
                                    <a href="/pages/tools.html">Tools</a>
                                    <a href="/pages/aboutme.html">AboutMe</a>
                                        <a id='rss' href="http://wklken.github.io/feed"><img src="http://wklken.github.io/theme/images/icons/rss.png"></img></a>

           </div>
         </div>
         </div>
         </header><!-- /#banner -->

        <section class="content blog">
<div class="constraint">
<div class="posts">

    
        		
            <article>
                    <h1 class="blog-title"><a href="http://wklken.github.io/posts/2013/07/04/note-of-linux-shell-scripting-cookbook.html">Linux Shell脚本攻略笔记[速查]</a></h1>
<p>Linux Shell脚本攻略的笔记，markdown编写，可以速查(ctrl+f)</p>
<hr />
<h3>run shell script</h3>
<div class="highlight"><pre><span class="n">sh</span> <span class="n">script</span><span class="p">.</span><span class="n">sh</span>

<span class="n">or</span>

<span class="n">chmod</span> <span class="n">a</span><span class="o">+</span><span class="n">x</span> <span class="n">script</span><span class="p">.</span><span class="n">sh</span>
<span class="p">.</span><span class="o">/</span><span class="n">script</span><span class="p">.</span><span class="n">sh</span>
</pre></div>


<p>cmd</p>
<div class="highlight"><pre><span class="n">cmd1</span><span class="p">;</span> <span class="n">cmd2</span>

<span class="n">or</span>

<span class="n">cmd1</span>
<span class="n">cmd2</span>
</pre></div>


<h3>echo</h3>
<div class="highlight"><pre><span class="n">echo</span> <span class="s">&quot;welcome to bash&quot;</span>
<span class="n">echo</span> <span class="n">welcome</span> <span class="n">to</span> <span class="n">bash</span>
</pre></div>


<p>使用不带引号的echo时，无法显示分号</p>
<p>使用单引号echo时，bash不会对单引号中变量求值  $var</p>
<p>echo 中转义换行符
默认情况，echo将换行标志追加到文本尾部，可以 忽略</p>
<div class="highlight"><pre><span class="n">echo</span> <span class="o">-</span><span class="n">n</span> <span class="err">&#39;</span><span class="n">test</span><span class="err">\</span><span class="n">n</span><span class="err">&#39;</span>
</pre></div>


<p>对字符串进行转义</p>
<div class="highlight"><pre><span class="n">echo</span> <span class="o">-</span><span class="n">e</span> <span class="err">&#39;</span><span class="mi">1</span><span class="err">\</span><span class="n">t2</span><span class="err">\</span><span class="n">t3</span><span class="err">&#39;</span>
</pre></div>


<p>打印彩色输出</p>
<div class="highlight"><pre><span class="err">文字颜色码</span>
    <span class="err">重置</span><span class="mi">0</span>
    <span class="err">黑色</span><span class="mi">30</span>
    <span class="err">红色</span><span class="mi">31</span>
    <span class="err">绿色</span><span class="mi">32</span>
    <span class="err">黄色</span><span class="mi">33</span>
    <span class="err">蓝色</span><span class="mi">34</span>
    <span class="err">洋红</span><span class="mi">35</span>
    <span class="err">青色</span><span class="mi">36</span>
    <span class="err">白色</span><span class="mi">37</span>

<span class="n">echo</span> <span class="o">-</span><span class="n">e</span> <span class="s">&quot;\e[1;31m This is red test \e[0m&quot;</span>

<span class="err">背景颜色码</span>
    <span class="err">重置</span><span class="mi">0</span>
    <span class="err">黑色</span><span class="mi">40</span>
    <span class="err">红色</span><span class="mi">41</span>
    <span class="err">绿色</span><span class="mi">42</span>
    <span class="err">黄色</span><span class="mi">43</span>
    <span class="err">蓝色</span><span class="mi">44</span>
    <span class="err">洋红</span><span class="mi">45</span>
    <span class="err">青色</span><span class="mi">46</span>
    <span class="err">白色</span><span class="mi">47</span>

<span class="n">echo</span> <span class="o">-</span><span class="n">e</span> <span class="s">&quot;\e[1;42m Green Background \e[0m&quot;</span>
</pre></div>


<h3>printf</h3>
<p>可以格式化字符串
默认不会加换行符</p>
<div class="highlight"><pre><span class="n">printf</span> <span class="s">&quot;%-5s %-10s %-4.2f</span><span class="se">\n</span><span class="s">&quot;</span> <span class="mi">3</span> <span class="n">Jeff</span> <span class="mf">77.564</span>

<span class="mi">3</span>    <span class="n">Jeff</span>      <span class="mf">77.56</span>
</pre></div>


<p>同c语言的格式化意义</p>
<h3>环境变量和变量</h3>
<p>bash中，每个变量的值都是字符串，无论你给变量赋值时是否使用引号，值都会以字符串的形式存储</p>
<p>查看所有与此终端进程相关的环境变量</p>
<div class="highlight"><pre><span class="n">env</span>
</pre></div>


<p>查看某个进程的环境变量</p>
<div class="highlight"><pre><span class="n">cat</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="err">$</span><span class="n">PID</span><span class="o">/</span><span class="n">environ</span>
</pre></div>


<p>变量赋值</p>
<div class="highlight"><pre><span class="n">var</span><span class="o">=</span><span class="n">value</span>
<span class="n">var</span><span class="o">=</span><span class="err">&#39;</span><span class="n">the</span> <span class="n">value</span><span class="err">&#39;</span>
<span class="n">var</span><span class="o">=</span><span class="s">&quot;the $PARAM&quot;</span>

<span class="n">echo</span> <span class="err">$</span><span class="n">var</span>

<span class="n">var</span> <span class="o">=</span> <span class="n">value</span><span class="err">非变量赋值是相等操作</span>
</pre></div>


<p>环境变量</p>
<div class="highlight"><pre><span class="err">未在当前进程中定义，而是从父进程中继承而来的变量</span>

<span class="n">export</span> <span class="n">PYTHONPATH</span><span class="o">=</span><span class="err">$</span><span class="n">PYTHONPATH</span><span class="o">:/</span><span class="n">home</span><span class="o">/</span><span class="n">ken</span><span class="o">/</span><span class="n">workspace</span>
</pre></div>


<p>常用的环境变量</p>
<div class="highlight"><pre><span class="n">HOME</span>
<span class="n">PWD</span>
<span class="n">USER</span>
<span class="n">UID</span>
<span class="n">SHELL</span>
</pre></div>


<p>获取字符串长度</p>
<div class="highlight"><pre>length=<span class="cp">${</span><span class="c">#var</span><span class="cp">}</span>
</pre></div>


<p>识别当前shell版本</p>
<div class="highlight"><pre><span class="n">echo</span> <span class="err">$</span><span class="n">SHELL</span>
    <span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">bash</span>
<span class="n">echo</span> <span class="err">$</span><span class="mi">0</span>
    <span class="n">bash</span>
</pre></div>


<p>检查是否为超级用户</p>
<div class="highlight"><pre><span class="n">root</span><span class="err">的</span><span class="n">UID</span><span class="o">=</span><span class="mi">0</span>

<span class="k">if</span> <span class="p">[</span> <span class="err">$</span><span class="n">UID</span> <span class="o">-</span><span class="n">ne</span> <span class="mi">0</span> <span class="p">]</span>
<span class="n">then</span>
    <span class="n">echo</span> <span class="s">&quot;not root user&quot;</span>
<span class="k">else</span>
    <span class="n">echo</span> <span class="s">&quot;root&quot;</span>
<span class="n">fi</span>
</pre></div>


<p>修改bash的提示字符</p>
<div class="highlight"><pre><span class="err">设置</span><span class="n">PS1</span><span class="err">变量</span>
<span class="err">\</span><span class="n">u</span><span class="err">用户名</span>
<span class="err">\</span><span class="n">h</span><span class="err">主机名</span>
<span class="err">\</span><span class="n">w</span><span class="err">当前工作目录</span>
</pre></div>


<h3>pgrep</h3>
<p>获取某个进程名对应进程id</p>
<div class="highlight"><pre><span class="n">pgrep</span> <span class="n">gedit</span>
</pre></div>


<h3>tr</h3>
<p>字符替换</p>
<div class="highlight"><pre><span class="n">cat</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="mi">12501</span><span class="o">/</span><span class="n">environ</span> <span class="o">|</span> <span class="n">tr</span> <span class="sc">&#39;\0&#39;</span> <span class="sc">&#39;\n&#39;</span>
</pre></div>


<h3>shell数学运算</h3>
<p>整数运算</p>
<p>let</p>
<div class="highlight"><pre><span class="n">no1</span><span class="o">=</span><span class="mi">4</span>
<span class="n">no2</span><span class="o">=</span><span class="mi">5</span>
<span class="n">let</span> <span class="n">result</span><span class="o">=</span><span class="n">no1</span><span class="o">+</span><span class="n">no2</span>

<span class="n">let</span> <span class="n">no1</span><span class="o">++</span>
<span class="n">let</span> <span class="n">no2</span><span class="o">--</span>
<span class="n">let</span> <span class="n">no1</span><span class="o">+=</span><span class="mi">7</span>
<span class="n">let</span> <span class="n">no2</span><span class="o">-=</span><span class="mi">7</span>
</pre></div>


<p>expr</p>
<div class="highlight"><pre><span class="n">result</span><span class="o">=</span><span class="err">`</span><span class="n">expr</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span><span class="err">`</span>
<span class="n">result</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="n">expr</span> <span class="err">$</span><span class="n">no1</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>


<p>其他方法</p>
<div class="highlight"><pre><span class="n">result</span><span class="o">=</span><span class="err">$</span><span class="p">[</span> <span class="n">no1</span> <span class="o">+</span> <span class="n">no2</span> <span class="p">]</span>
<span class="n">result</span><span class="o">=</span><span class="err">$</span><span class="p">[</span> <span class="err">$</span><span class="n">no</span> <span class="o">+</span> <span class="mi">5</span> <span class="p">]</span>

<span class="n">result</span><span class="o">=</span><span class="err">$</span><span class="p">((</span> <span class="n">no1</span> <span class="o">+</span> <span class="mi">5</span> <span class="p">))</span>
</pre></div>


<p>浮点数</p>
<div class="highlight"><pre><span class="n">echo</span> <span class="s">&quot;4 * 0.56&quot;</span> <span class="o">|</span> <span class="n">bc</span>
<span class="err">设定精度</span>
<span class="n">echo</span> <span class="s">&quot;scale=2;3/8&quot;</span> <span class="o">|</span> <span class="n">bc</span>
<span class="err">进制转换</span>
<span class="n">echo</span> <span class="s">&quot;obase=2;100&quot;</span> <span class="o">|</span> <span class="n">bc</span>
<span class="err">平方</span>
<span class="n">echo</span> <span class="s">&quot;sqrt(100)&quot;</span> <span class="o">|</span> <span class="n">bc</span>
</pre></div>


<h3>文件描述符和重定向</h3>
<p>文件描述符</p>
<div class="highlight"><pre><span class="mi">0</span> <span class="n">stdin</span> <span class="err">标砖输入</span>
<span class="mi">1</span> <span class="n">stdout</span> <span class="err">标准输出</span>
<span class="mi">2</span> <span class="n">stderr</span> <span class="err">标准错误</span>
</pre></div>


<p>重定向到文件</p>
<div class="highlight"><pre><span class="n">echo</span> <span class="s">&quot;test&quot;</span> <span class="o">&gt;</span> <span class="n">temp</span><span class="p">.</span><span class="n">txt</span>
<span class="err">追加</span>
<span class="n">echo</span> <span class="s">&quot;test&quot;</span> <span class="o">&gt;&gt;</span> <span class="n">temp</span><span class="p">.</span><span class="n">txt</span>

<span class="o">&gt;</span><span class="err">等价于</span><span class="mi">1</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;</span><span class="err">等价于</span> <span class="mi">1</span><span class="o">&gt;&gt;</span>
</pre></div>


<p>输出分离或合并</p>
<div class="highlight"><pre><span class="n">cmd</span> <span class="mi">2</span><span class="o">&gt;</span><span class="n">stderr</span><span class="p">.</span><span class="n">txt</span>  <span class="mi">1</span><span class="o">&gt;</span><span class="n">stdout</span><span class="p">.</span><span class="n">txt</span>

<span class="n">cmd</span> <span class="o">&gt;</span> <span class="n">output</span><span class="p">.</span><span class="n">txt</span> <span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>
<span class="n">or</span>
<span class="n">cmd</span> <span class="o">&amp;&gt;</span> <span class="n">output</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<p>扔到垃圾桶</p>
<div class="highlight"><pre><span class="n">cmd</span> <span class="o">&gt;/</span><span class="n">dev</span><span class="o">/</span><span class="n">null</span> <span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>
</pre></div>


<p>输出到终端机文件</p>
<div class="highlight"><pre><span class="n">cmd</span> <span class="o">|</span> <span class="n">tee</span> <span class="n">file1</span>
<span class="n">tee</span><span class="err">默认覆盖，可以</span><span class="o">-</span><span class="n">a</span><span class="err">选项追加</span>
<span class="n">cmd</span> <span class="o">|</span> <span class="n">tee</span> <span class="o">-</span><span class="n">a</span> <span class="n">file1</span>
</pre></div>


<p>将文件重定向到命令</p>
<div class="highlight"><pre><span class="n">cmd</span> <span class="o">&lt;</span> <span class="n">file</span>
</pre></div>


<p>自定义文件描述符</p>
<div class="highlight"><pre>exec 3<span class="nt">&lt;input</span><span class="err">.</span><span class="na">txt</span>
<span class="na">cat</span> <span class="err">&lt;&amp;</span>3

exec 4&gt;output.txt
echo newline &gt;<span class="err">&amp;</span>4
</pre></div>


<h3>cat</h3>
<p>cat, concatenate(拼接)</p>
<p>一般格式</p>
<div class="highlight"><pre><span class="n">cat</span> <span class="n">file1</span> <span class="n">file2</span> <span class="n">file3</span>

<span class="err">从管道中读取</span>
<span class="n">OUTPUT_FROM_SOME_CMDS</span> <span class="o">|</span> <span class="n">cat</span>

<span class="n">echo</span> <span class="s">&quot;test&quot;</span> <span class="o">|</span> <span class="n">cat</span> <span class="o">-</span> <span class="n">file1</span>
</pre></div>


<p>压缩空白行</p>
<div class="highlight"><pre><span class="n">cat</span> <span class="o">-</span><span class="n">s</span>  <span class="n">file</span>
</pre></div>


<p>配合tr移除空白行</p>
<div class="highlight"><pre><span class="n">cat</span> <span class="n">file</span> <span class="o">|</span> <span class="n">tr</span> <span class="o">-</span><span class="n">s</span> <span class="sc">&#39;\n&#39;</span>
</pre></div>


<p>加行号</p>
<div class="highlight"><pre><span class="n">cat</span> <span class="o">-</span><span class="n">n</span> <span class="n">file</span>
</pre></div>


<p>显示制表符等</p>
<div class="highlight"><pre><span class="n">cat</span> <span class="o">-</span><span class="n">T</span> <span class="n">file</span>
</pre></div>


<h3>数组</h3>
<p>普通数组，整数作为数组索引</p>
<p>关联数组，可以使用字符串作为索引</p>
<p>定义</p>
<div class="highlight"><pre><span class="n">array_var</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">)</span>

<span class="n">or</span>
<span class="n">array_var</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="s">&quot;test1&quot;</span>
</pre></div>


<p>读取</p>
<div class="highlight"><pre>echo <span class="cp">${</span><span class="n">array_var</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="cp">}</span>
</pre></div>


<p>以清单形式打印</p>
<div class="highlight"><pre>echo <span class="cp">${</span><span class="n">array_var</span><span class="p">[</span><span class="o">*</span><span class="p">]</span><span class="cp">}</span>
echo <span class="cp">${</span><span class="n">array_var</span><span class="p">[</span><span class="err">@</span><span class="p">]</span><span class="cp">}</span>
</pre></div>


<p>长度</p>
<div class="highlight"><pre>echo <span class="cp">${</span><span class="c">#array_var[*]</span><span class="cp">}</span>
</pre></div>


<p>获取索引</p>
<div class="highlight"><pre>echo <span class="cp">${</span><span class="err">!</span><span class="n">array_var</span><span class="p">[</span><span class="o">*</span><span class="p">]</span><span class="cp">}</span>
</pre></div>


<p>关联数组</p>
<div class="highlight"><pre><span class="n">declare</span> <span class="o">-</span><span class="n">A</span> <span class="n">ass_array</span>

<span class="err">添加</span>
<span class="n">ass_array</span><span class="o">=</span><span class="p">([</span><span class="n">index1</span><span class="p">]</span><span class="o">=</span><span class="n">value1</span> <span class="p">[</span><span class="n">index2</span><span class="p">]</span><span class="o">=</span><span class="n">value2</span><span class="p">)</span>

<span class="n">ass_array</span><span class="p">[</span><span class="n">index3</span><span class="p">]</span><span class="o">=</span><span class="n">value3</span>
</pre></div>


<h3>alias</h3>
<div class="highlight"><pre><span class="n">alias</span> <span class="n">new_command</span><span class="o">=</span><span class="err">&#39;</span><span class="n">command</span> <span class="n">seq</span><span class="err">&#39;</span>
<span class="n">unalias</span> <span class="n">new_command</span>

<span class="err">使用原生命令</span>
<span class="err">\</span><span class="n">new_command</span>
</pre></div>


<h3>date</h3>
<p>读取日期</p>
<div class="highlight"><pre><span class="n">date</span>
</pre></div>


<p>时间戳</p>
<div class="highlight"><pre><span class="n">date</span> <span class="o">+%</span><span class="n">s</span>
</pre></div>


<p>日期转换为时间戳</p>
<div class="highlight"><pre><span class="n">date</span> <span class="o">--</span><span class="n">date</span> <span class="s">&quot;Thu Nov 18 08:07:21 IST 2010&quot;</span> <span class="o">+%</span><span class="n">s</span>
</pre></div>


<p>日期格式化</p>
<div class="highlight"><pre><span class="err">星期</span>  <span class="o">%</span><span class="n">a</span>  <span class="n">Sat</span>
      <span class="o">%</span><span class="n">A</span>  <span class="n">Saturday</span>
<span class="err">月</span>    <span class="o">%</span><span class="n">b</span>  <span class="n">Nov</span>
      <span class="o">%</span><span class="n">B</span>  <span class="n">November</span>
<span class="err">日</span>    <span class="o">%</span><span class="n">d</span>  <span class="mi">31</span>
<span class="err">固定日期格式</span><span class="n">mm</span><span class="o">/</span><span class="n">dd</span><span class="o">/</span><span class="n">yy</span>     <span class="o">%</span><span class="n">D</span>
<span class="err">年</span>    <span class="o">%</span><span class="n">y</span>  <span class="mi">10</span>
      <span class="o">%</span><span class="n">Y</span>  <span class="mi">2010</span>
<span class="err">小时</span>  <span class="o">%</span><span class="n">I</span><span class="o">/%</span><span class="n">H</span>    <span class="mi">08</span>
<span class="err">分钟</span>  <span class="o">%</span><span class="n">M</span>  <span class="mi">33</span>
<span class="err">秒</span>    <span class="o">%</span><span class="n">S</span>  <span class="mi">10</span>
<span class="err">纳秒</span>  <span class="o">%</span><span class="n">N</span>  <span class="mi">696308515</span>
<span class="n">Unix</span><span class="err">纪元时</span>  <span class="o">%</span><span class="n">s</span>
</pre></div>


<p>格式化</p>
<div class="highlight"><pre><span class="n">date</span> <span class="s">&quot;+%Y %B %d&quot;</span>
</pre></div>


<p>设置日期和时间</p>
<div class="highlight"><pre><span class="n">date</span> <span class="o">-</span><span class="n">s</span> <span class="s">&quot;格式化日期字符串&quot;</span>
</pre></div>


<p>延时</p>
<div class="highlight"><pre><span class="n">sleep</span> <span class="n">number_of_seconds</span>
</pre></div>


<h3>调试脚本</h3>
<p>打印出所执行的每一行命令</p>
<div class="highlight"><pre><span class="n">bash</span> <span class="o">-</span><span class="n">x</span> <span class="n">script</span><span class="p">.</span><span class="n">sh</span>
<span class="n">sh</span> <span class="o">-</span><span class="n">x</span> <span class="n">script</span><span class="p">.</span><span class="n">sh</span>
</pre></div>


<p>在脚本中设置开关</p>
<div class="highlight"><pre><span class="n">set</span> <span class="o">-</span><span class="n">x</span> <span class="err">在执行时显示参数和命令</span>
<span class="n">set</span> <span class="o">+</span><span class="n">x</span> <span class="err">关闭调试</span>
<span class="n">set</span> <span class="o">-</span><span class="n">v</span> <span class="err">当命令进行读取时显示输入</span>
<span class="n">set</span> <span class="o">+</span><span class="n">v</span> <span class="err">禁止打印输入</span>
</pre></div>


<p>直接修改脚本</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/bin/bash -xv</span>
</pre></div>
</td></tr></table>

<h3>函数和参数</h3>
<p>定义函数</p>
<div class="highlight"><pre><span class="kd">function</span> <span class="nx">fname</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">statements</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">or</span>
<span class="nx">fname</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">statements</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>调用</p>
<div class="highlight"><pre><span class="n">fname</span><span class="p">;</span>
<span class="n">fname</span> <span class="n">arg1</span> <span class="n">arg2</span><span class="p">;</span>
</pre></div>


<p>接收参数</p>
<div class="highlight"><pre><span class="err">$</span><span class="mi">1</span><span class="err">第一个参数</span>
<span class="err">$</span><span class="mi">2</span><span class="err">第二个参数</span>
<span class="err">$</span><span class="n">n</span><span class="err">第</span><span class="n">n</span><span class="err">个参数</span>

<span class="s">&quot;$@&quot;</span><span class="err">被扩展成</span> <span class="s">&quot;$1&quot;</span> <span class="s">&quot;$2&quot;</span> <span class="s">&quot;$3&quot;</span>
<span class="s">&quot;$*&quot;</span><span class="err">扩展成</span><span class="s">&quot;$1c$2c$3&quot;</span><span class="p">,</span> <span class="err">其中</span><span class="n">c</span><span class="err">是</span><span class="n">IFS</span><span class="err">第一个字符</span>
<span class="s">&quot;$@&quot;</span><span class="err">使用最多</span><span class="p">,</span> <span class="err">$</span><span class="o">*</span><span class="err">将所有的参数当做单个字符串</span>
</pre></div>


<p>bash支持递归</p>
<p>导出函数,可以作用到子进程中</p>
<div class="highlight"><pre><span class="n">export</span> <span class="o">-</span><span class="n">f</span> <span class="n">fname</span>
</pre></div>


<p>函数及命令返回值</p>
<div class="highlight"><pre><span class="n">cmd</span><span class="p">;</span>
<span class="n">echo</span> <span class="err">$</span><span class="o">?</span>

<span class="err">退出状态，成功退出，状态为</span><span class="mi">0</span><span class="err">，否则，非</span><span class="mi">0</span>
</pre></div>


<h3>管道</h3>
<div class="highlight"><pre><span class="err">$</span><span class="n">cmd1</span> <span class="o">|</span> <span class="n">cmd2</span> <span class="o">|</span> <span class="n">cmd3</span>
</pre></div>


<h3>读取命令输出</h3>
<div class="highlight"><pre><span class="n">cmd_output</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="n">COMMANDS</span><span class="p">)</span>
<span class="n">or</span>
<span class="n">cmd_output</span><span class="o">=</span><span class="err">`</span><span class="n">COMMANDS</span><span class="err">`</span>
</pre></div>


<p>保留空格和换行符</p>
<div class="highlight"><pre><span class="n">out</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="n">cat</span> <span class="n">text</span><span class="p">.</span><span class="n">txt</span><span class="p">)</span>
<span class="n">echo</span> <span class="err">$</span><span class="n">out</span>  <span class="err">#丢失所有换行符</span>

<span class="n">out</span><span class="o">=</span><span class="s">&quot;$(cat text.txt)&quot;</span>
<span class="n">echo</span> <span class="err">$</span><span class="n">out</span>  <span class="err">#保留</span>
</pre></div>


<h3>read</h3>
<p>读取n个字符存入变量</p>
<div class="highlight"><pre><span class="n">read</span> <span class="o">-</span><span class="n">n</span> <span class="n">number_of_chars</span> <span class="n">variable_name</span>
</pre></div>


<p>不回显的方式读取密码</p>
<div class="highlight"><pre><span class="n">read</span> <span class="o">-</span><span class="n">s</span> <span class="n">var</span>
</pre></div>


<p>显示提示信息</p>
<div class="highlight"><pre><span class="n">read</span> <span class="o">-</span><span class="n">p</span> <span class="s">&quot;Enter input:&quot;</span> <span class="n">var</span>
</pre></div>


<p>限时输入</p>
<div class="highlight"><pre><span class="n">read</span> <span class="o">-</span><span class="n">t</span>  <span class="n">timeout</span> <span class="n">var</span>
</pre></div>


<p>设置界定符</p>
<div class="highlight"><pre><span class="n">read</span> <span class="o">-</span><span class="n">d</span> <span class="n">delim_char</span> <span class="n">var</span>
<span class="n">read</span> <span class="o">-</span><span class="n">d</span> <span class="s">&quot;:&quot;</span> <span class="n">var</span>
<span class="nl">hello:</span>
</pre></div>


<h3>字段分隔符和迭代器</h3>
<p>内部字段分隔符，Internal Field Separator, IFS</p>
<p>IFS默认为空白字符（换行符，制表符，空格）</p>
<div class="highlight"><pre><span class="n">data</span><span class="o">=</span><span class="s">&quot;name,sex,rollno&quot;</span>
<span class="n">oldIFS</span><span class="o">=</span><span class="err">$</span><span class="n">IFS</span>
<span class="n">IFS</span><span class="o">=</span><span class="p">,</span>
<span class="k">for</span> <span class="n">item</span> <span class="n">in</span> <span class="err">$</span><span class="n">data</span>
<span class="k">do</span>
        <span class="n">echo</span> <span class="err">$</span><span class="n">item</span>
<span class="n">done</span>
</pre></div>


<h3>循环</h3>
<p>for循环</p>
<div class="highlight"><pre><span class="k">for</span> <span class="n">i</span> <span class="n">in</span> <span class="p">{</span><span class="n">a</span><span class="p">..</span><span class="n">z</span><span class="p">};</span> <span class="k">do</span> <span class="n">actions</span><span class="p">;</span> <span class="n">done</span><span class="p">;</span>

<span class="n">or</span>

<span class="k">for</span><span class="p">((</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">))</span>
<span class="p">{</span>
    <span class="n">commands</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>while循环</p>
<div class="highlight"><pre><span class="k">while</span> <span class="n">condition</span>
<span class="k">do</span>
    <span class="n">commands</span><span class="p">;</span>
<span class="n">done</span>
</pre></div>


<h3>比较和测试</h3>
<p>if条件</p>
<div class="highlight"><pre><span class="k">if</span> <span class="n">condition</span><span class="p">;</span>
<span class="n">then</span>
    <span class="n">commands</span><span class="p">;</span>
<span class="n">elif</span> <span class="n">condition</span><span class="p">;</span>
<span class="n">then</span>
    <span class="n">commands</span><span class="p">;</span>
<span class="k">else</span>
    <span class="n">commands</span><span class="p">;</span>
<span class="n">fi</span>
</pre></div>


<p>逻辑运算符进行简化</p>
<div class="highlight"><pre><span class="p">[</span> <span class="n">condition</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">action</span><span class="p">;</span>
<span class="p">[</span> <span class="n">condition</span> <span class="p">]</span> <span class="o">||</span> <span class="n">action</span><span class="p">;</span>
</pre></div>


<p>算术比较</p>
<div class="highlight"><pre><span class="o">-</span><span class="n">gt</span> <span class="err">大于</span>
<span class="o">-</span><span class="n">lt</span> <span class="err">小于</span>
<span class="o">-</span><span class="n">ge</span> <span class="err">大于等于</span>
<span class="o">-</span><span class="n">le</span> <span class="err">小于等于</span>
<span class="o">-</span><span class="n">ne</span> <span class="err">不等于</span>
<span class="o">-</span><span class="n">eq</span> <span class="err">等于</span>

<span class="p">[</span> <span class="err">$</span><span class="n">var</span> <span class="o">-</span><span class="n">eq</span> <span class="mi">0</span> <span class="p">]</span>

<span class="p">[</span> <span class="err">$</span><span class="n">var</span> <span class="o">-</span><span class="n">ne</span> <span class="mi">0</span> <span class="o">-</span><span class="n">a</span> <span class="err">$</span><span class="n">var2</span> <span class="o">-</span><span class="n">get</span> <span class="mi">2</span> <span class="p">]</span>
<span class="p">[</span> <span class="err">$</span><span class="n">var</span> <span class="o">-</span><span class="n">ne</span> <span class="mi">0</span> <span class="o">-</span><span class="n">o</span> <span class="err">$</span><span class="n">var2</span> <span class="o">-</span><span class="n">get</span> <span class="mi">2</span> <span class="p">]</span>
</pre></div>


<p>文件测试</p>
<div class="highlight"><pre><span class="p">[</span> <span class="o">-</span><span class="n">f</span> <span class="err">$</span><span class="n">file_var</span> <span class="p">]</span> <span class="err">正常文件路径或文件名</span>
<span class="p">[</span> <span class="o">-</span><span class="n">x</span> <span class="err">$</span><span class="n">var</span> <span class="p">]</span> <span class="err">可执行</span>
<span class="o">-</span><span class="n">d</span> <span class="err">目录</span>
<span class="o">-</span><span class="n">e</span> <span class="err">存在</span>
<span class="o">-</span><span class="n">c</span> <span class="err">字符设备文件</span>
<span class="o">-</span><span class="n">b</span> <span class="err">块设备文件</span>
<span class="o">-</span><span class="n">w</span> <span class="err">可写</span>
<span class="o">-</span><span class="n">r</span> <span class="err">可读</span>
<span class="o">-</span><span class="n">L</span> <span class="err">符号链接</span>
</pre></div>


<p>字符串比较</p>
<div class="highlight"><pre><span class="k">[[ $str1 = $str2 ]]</span>
<span class="k">[[ $str1 == $str2 ]]</span>

<span class="na">[[ $str1 !</span><span class="o">=</span> <span class="s">$str2 ]] 不等</span>
<span class="k">[[ $str1 &gt; $str2 ]]</span>
<span class="k">[[ $str1 &lt; $str2 ]]</span>
<span class="err">[[</span> <span class="err">-z</span> <span class="err">$str1</span> <span class="err">]]</span>  <span class="err">空</span>
<span class="err">[[</span> <span class="err">-n</span> <span class="err">$str1</span> <span class="err">]]</span>  <span class="err">非空</span>
</pre></div>


<p>p35</p>
<h3>find</h3>
<p>基本</p>
<div class="highlight"><pre><span class="n">find</span> <span class="n">base_path</span>
<span class="n">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">print</span>  <span class="err">#默认\</span><span class="n">n</span><span class="err">分割文件名</span>
</pre></div>


<p>文件名</p>
<div class="highlight"><pre><span class="n">find</span> <span class="n">path</span> <span class="o">-</span><span class="n">name</span> <span class="s">&quot;*.txt&quot;</span> <span class="o">-</span><span class="n">print</span>
          <span class="o">-</span><span class="n">iname</span>  <span class="err">忽略大小写</span>

<span class="err">多个条件</span>
<span class="n">find</span> <span class="p">.</span> <span class="err">\</span><span class="p">(</span> <span class="o">-</span><span class="n">name</span> <span class="s">&quot;*.txt&quot;</span> <span class="o">-</span><span class="n">o</span> <span class="o">-</span><span class="n">name</span> <span class="s">&quot;*.py&quot;</span> <span class="err">\</span><span class="p">)</span>
</pre></div>


<p>文件路径</p>
<div class="highlight"><pre><span class="n">find</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">users</span> <span class="o">-</span><span class="n">path</span> <span class="s">&quot;*slynux*&quot;</span> <span class="o">-</span><span class="n">print</span>

<span class="n">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">regex</span> <span class="s">&quot;.*\(\.py\|\.sh\)$&quot;</span>
       <span class="o">-</span><span class="n">iregex</span> <span class="err">忽略大小写</span>
</pre></div>


<p>否定参数</p>
<div class="highlight"><pre><span class="n">find</span> <span class="p">.</span> <span class="o">!</span> <span class="o">-</span><span class="n">name</span> <span class="s">&quot;*.txt&quot;</span> <span class="o">-</span><span class="n">print</span>
</pre></div>


<p>根据文件类型</p>
<div class="highlight"><pre><span class="n">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">type</span> <span class="n">d</span> <span class="o">-</span><span class="n">print</span>
<span class="n">f</span> <span class="err">普通文件</span>
<span class="n">l</span> <span class="err">符号链接</span>
<span class="n">d</span> <span class="err">目录</span>
<span class="n">c</span> <span class="err">字符设备</span>
<span class="n">b</span> <span class="err">块设备</span>
<span class="n">s</span> <span class="err">套接字</span>
<span class="n">p</span> <span class="n">Fifo</span>
</pre></div>


<p>设定目录深度</p>
<div class="highlight"><pre><span class="n">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">maxdepth</span> <span class="mi">1</span> <span class="o">-</span><span class="n">type</span> <span class="n">f</span> <span class="o">-</span><span class="n">print</span>
<span class="n">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">mindepth</span> <span class="mi">2</span> <span class="o">-</span><span class="n">type</span> <span class="n">f</span> <span class="o">-</span><span class="n">print</span>
</pre></div>


<p>根据文件时间搜索</p>
<div class="highlight"><pre><span class="err">计量单位</span> <span class="err">天</span>
<span class="o">-</span><span class="n">atime</span> <span class="err">最近一次访问时间</span>
<span class="o">-</span><span class="n">mtime</span> <span class="err">最后一次被修改时间</span>
<span class="o">-</span><span class="n">ctime</span> <span class="err">文件元数据，最近一次修改时间</span>

<span class="n">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">type</span> <span class="n">f</span> <span class="o">-</span><span class="n">atime</span> <span class="o">-</span><span class="mi">7</span> <span class="o">-</span><span class="n">print</span> <span class="err">#七天内</span>
                      <span class="o">+</span><span class="mi">7</span> <span class="o">-</span><span class="n">print</span> <span class="err">#超过七天</span>

<span class="err">分钟</span>
<span class="o">-</span><span class="n">amin</span> <span class="err">访问时间</span>
<span class="o">-</span><span class="n">mmin</span> <span class="err">修改时间</span>
<span class="o">-</span><span class="n">cmin</span> <span class="err">变化时间</span>

<span class="n">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">type</span> <span class="n">f</span> <span class="o">-</span><span class="n">newer</span> <span class="n">file</span><span class="p">.</span><span class="n">txt</span> <span class="o">-</span><span class="n">print</span>  <span class="err">#用于比较时间戳的参考文件，比参考文件更新的文件</span>
</pre></div>


<p>基于文件大小的搜索</p>
<div class="highlight"><pre><span class="n">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">type</span> <span class="n">f</span> <span class="o">-</span><span class="n">size</span> <span class="o">+</span><span class="mi">2</span><span class="n">k</span>
<span class="o">+</span> <span class="err">大于</span>  <span class="o">-</span><span class="err">小于</span>   <span class="err">无符号，恰好等于</span>

<span class="n">b</span> <span class="err">块</span>
<span class="n">c</span> <span class="err">字节</span>
<span class="n">w</span> <span class="err">字（</span><span class="mi">2</span><span class="err">字节）</span>
<span class="n">k</span> <span class="err">千字节</span>
<span class="n">M</span> <span class="err">兆字节</span>
<span class="n">G</span> <span class="err">吉字节</span>
</pre></div>


<p>删除匹配的文件</p>
<div class="highlight"><pre><span class="n">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">type</span> <span class="n">f</span> <span class="o">-</span><span class="n">name</span> <span class="s">&quot;*.swp&quot;</span> <span class="o">-</span><span class="n">delete</span>
</pre></div>


<p>文件权限及所有权</p>
<div class="highlight"><pre><span class="n">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">type</span> <span class="n">f</span> <span class="o">-</span><span class="n">perm</span> <span class="mi">644</span> <span class="o">-</span><span class="n">print</span>

<span class="n">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">type</span> <span class="n">f</span> <span class="o">-</span><span class="n">user</span> <span class="n">slynux</span> <span class="o">-</span><span class="n">print</span>
</pre></div>


<p>执行命令或动作</p>
<div class="highlight"><pre><span class="n">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">type</span> <span class="n">f</span> <span class="o">-</span><span class="n">user</span> <span class="n">root</span> <span class="o">-</span><span class="n">exec</span> <span class="n">chown</span> <span class="n">slynux</span> <span class="p">{}</span> <span class="err">\</span><span class="p">;</span>
<span class="n">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">type</span> <span class="n">f</span> <span class="o">-</span><span class="n">exec</span> <span class="n">cp</span> <span class="p">{}</span> <span class="n">OLD</span> <span class="err">\</span><span class="p">;</span>

<span class="n">exec</span><span class="err">无法结合多个命令，可以将多个命令放入脚本，调用只</span>
</pre></div>


<p>跳过指定目录</p>
<div class="highlight"><pre><span class="n">find</span> <span class="p">.</span> <span class="err">\</span><span class="p">(</span> <span class="o">-</span><span class="n">name</span> <span class="s">&quot;.git&quot;</span> <span class="o">-</span><span class="n">prune</span> <span class="err">\</span><span class="p">)</span> <span class="o">-</span><span class="n">name</span> <span class="err">&#39;</span><span class="o">*</span><span class="p">.</span><span class="n">txt</span><span class="err">&#39;</span>
</pre></div>


<p>second part</p>
<h3>xargs</h3>
<p>将标准输入数据转化成命令行参数</p>
<p>将stdin接收到的数据重新格式化，再将其作为参数传给其他命令</p>
<p>多行输入转化成单行输出</p>
<div class="highlight"><pre><span class="n">cat</span>  <span class="n">example</span><span class="p">.</span><span class="n">txt</span> <span class="o">|</span> <span class="n">xargs</span>  <span class="err">#空格替换掉\</span><span class="n">n</span>
</pre></div>


<p>切成多行，每行n哥参数</p>
<div class="highlight"><pre><span class="n">cat</span> <span class="n">examplet</span><span class="p">.</span><span class="n">txt</span> <span class="o">|</span> <span class="n">xargs</span> <span class="o">-</span><span class="n">n</span> <span class="mi">3</span>
</pre></div>


<p>可以指定分隔符</p>
<div class="highlight"><pre><span class="n">echo</span> <span class="s">&quot;aaaXbbbXccc&quot;</span> <span class="o">|</span> <span class="n">xargs</span> <span class="o">-</span><span class="n">d</span> <span class="sc">&#39;X&#39;</span>
</pre></div>


<p>将参数传递给脚本(类似循环)</p>
<div class="highlight"><pre><span class="n">cat</span> <span class="n">args</span><span class="p">.</span><span class="n">txt</span> <span class="o">|</span> <span class="n">xargs</span> <span class="o">-</span><span class="n">n</span> <span class="mi">1</span> <span class="p">.</span><span class="o">/</span><span class="n">cecho</span><span class="p">.</span><span class="n">sh</span>

<span class="p">.</span><span class="o">/</span><span class="n">cecho</span><span class="p">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">p</span> <span class="n">arg1</span> <span class="mi">1</span>
<span class="err">需要变更</span>
<span class="n">cat</span> <span class="n">args</span><span class="p">.</span><span class="n">txt</span> <span class="o">|</span> <span class="n">xargs</span> <span class="o">-</span><span class="n">I</span> <span class="p">{}</span> <span class="p">.</span><span class="o">/</span><span class="n">cecho</span><span class="p">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">p</span> <span class="p">{}</span> <span class="mi">1</span>
</pre></div>


<p>find与xargs组合</p>
<div class="highlight"><pre><span class="n">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">type</span> <span class="n">f</span> <span class="o">-</span><span class="n">name</span> <span class="s">&quot;*.txt&quot;</span> <span class="o">-</span><span class="n">print</span> <span class="o">|</span> <span class="n">xargs</span> <span class="n">rm</span> <span class="o">-</span><span class="n">rf</span>
</pre></div>


<p>其他</p>
<div class="highlight"><pre><span class="n">cat</span> <span class="n">file</span> <span class="o">|</span> <span class="p">(</span> <span class="k">while</span> <span class="n">read</span> <span class="n">arg</span><span class="p">;</span> <span class="k">do</span> <span class="n">cat</span> <span class="err">$</span><span class="n">arg</span><span class="p">;</span> <span class="n">done</span> <span class="p">)</span>
<span class="n">cat</span> <span class="n">file</span> <span class="o">|</span> <span class="n">xargs</span> <span class="o">-</span><span class="n">I</span> <span class="p">{}</span> <span class="n">cat</span> <span class="p">{}</span>
</pre></div>


<h3>tr</h3>
<p>tr可以对来自标准输入的字符进行替换，删除以及压缩</p>
<p>tr只能通过stdin，无法通过其他命令行进行接收参数</p>
<p>格式</p>
<div class="highlight"><pre><span class="n">tr</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="n">set1</span> <span class="n">set2</span>
</pre></div>


<p>大小写替换</p>
<div class="highlight"><pre><span class="n">echo</span>  <span class="s">&quot;HELLO&quot;</span> <span class="o">|</span> <span class="n">tr</span> <span class="err">&#39;</span><span class="n">A</span><span class="o">-</span><span class="n">Z</span><span class="sc">&#39; &#39;</span><span class="n">a</span><span class="o">-</span><span class="n">z</span><span class="err">&#39;</span>
<span class="n">cat</span> <span class="n">text</span> <span class="o">|</span> <span class="n">tr</span> <span class="sc">&#39;\t&#39;</span> <span class="sc">&#39; &#39;</span>
</pre></div>


<p>删除字符</p>
<div class="highlight"><pre><span class="n">cat</span> <span class="n">file</span> <span class="o">|</span> <span class="n">tr</span> <span class="o">-</span><span class="n">d</span> <span class="err">&#39;</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="err">&#39;</span>
</pre></div>


<p>字符集补集</p>
<div class="highlight"><pre><span class="n">echo</span> <span class="s">&quot;hello 1 char 2&quot;</span> <span class="o">|</span> <span class="n">tr</span> <span class="o">-</span><span class="n">d</span> <span class="o">-</span><span class="n">c</span> <span class="err">&#39;</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="err">&#39;</span>  <span class="err">#删除非</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span>
</pre></div>


<p>压缩字符</p>
<p>连续的重复字符</p>
<div class="highlight"><pre><span class="n">echo</span> <span class="s">&quot;GNU is    not UNix&quot;</span> <span class="o">|</span> <span class="n">tr</span> <span class="o">-</span><span class="n">s</span> <span class="sc">&#39; &#39;</span>
</pre></div>


<p>字符类</p>
<div class="highlight"><pre><span class="n">alnum</span> <span class="err">字母和数字</span>
<span class="n">alpha</span> <span class="err">字母</span>
<span class="n">cntrl</span> <span class="err">控制字符</span>
<span class="n">digit</span> <span class="err">数字</span>
<span class="n">graph</span> <span class="err">图形字符</span>
<span class="n">lower</span> <span class="err">小写字母</span>
<span class="n">print</span> <span class="err">可打印字符</span>
<span class="n">punct</span> <span class="err">标点符号</span>
<span class="n">space</span> <span class="err">空白字符</span>
<span class="n">upper</span> <span class="err">大写字母</span>
<span class="n">xdigit</span> <span class="err">十六进制字符</span>

<span class="n">tr</span> <span class="err">&#39;</span><span class="p">[</span><span class="o">:</span><span class="n">lower</span><span class="o">:</span><span class="p">]</span><span class="sc">&#39; &#39;</span><span class="p">[</span><span class="o">:</span><span class="n">upper</span><span class="o">:</span><span class="p">]</span><span class="err">&#39;</span>
</pre></div>


<h3>md5sum</h3>
<p>32个字符的十六进制串</p>
<div class="highlight"><pre><span class="n">md5sum</span> <span class="n">filename</span>
<span class="n">md5sum</span> <span class="n">filename1</span> <span class="n">filename2</span>
</pre></div>


<h3>sha1sum</h3>
<p>40个字符十六进制串</p>
<div class="highlight"><pre><span class="n">sha1sum</span> <span class="n">file</span>
</pre></div>


<h3>对目录进行校验</h3>
<p>需安装md5deep软件包</p>
<div class="highlight"><pre><span class="n">md5deep</span><span class="o">/</span><span class="n">sha1deep</span>
<span class="n">md5deep</span> <span class="o">-</span><span class="n">rl</span> <span class="n">dirname</span>
         <span class="n">r</span><span class="err">递归，</span><span class="n">l</span><span class="err">相对路径</span>
</pre></div>


<h3>sort</h3>
<p>排序</p>
<div class="highlight"><pre><span class="n">sort</span> <span class="n">file1</span> <span class="o">&gt;</span> <span class="n">file1</span><span class="p">.</span><span class="n">sorted</span>
</pre></div>


<p>按数字</p>
<div class="highlight"><pre><span class="n">sort</span> <span class="o">-</span><span class="n">n</span> <span class="n">file1</span>
</pre></div>


<p>逆序</p>
<div class="highlight"><pre><span class="n">sort</span> <span class="o">-</span><span class="n">r</span> <span class="n">file</span>
</pre></div>


<p>测试一个文件是否已经被排过序</p>
<div class="highlight"><pre><span class="n">sort</span> <span class="o">-</span><span class="n">C</span> <span class="n">file</span>
<span class="k">if</span> <span class="p">[</span> <span class="err">$</span><span class="o">?</span> <span class="o">-</span><span class="n">eq</span> <span class="mi">0</span> <span class="p">];</span> <span class="n">then</span>
    <span class="n">echo</span> <span class="n">ssss</span>
<span class="n">fi</span>
</pre></div>


<p>合并两个排过序的文件，并不需要对合并后的文件进行再排序</p>
<div class="highlight"><pre><span class="n">sort</span> <span class="o">-</span><span class="n">m</span> <span class="n">sorted1</span> <span class="n">sorted2</span>
</pre></div>


<p>根据键或者列排序</p>
<div class="highlight"><pre><span class="n">sort</span> <span class="o">-</span><span class="n">k</span> <span class="mi">1</span> <span class="n">data</span>
</pre></div>


<p>限定特定范围内一组字符</p>
<div class="highlight"><pre><span class="n">key</span><span class="o">=</span><span class="n">char4</span><span class="o">-</span><span class="n">char8</span>
<span class="n">sort</span> <span class="o">-</span><span class="n">k</span> <span class="mi">2</span><span class="p">,</span><span class="mi">3</span> <span class="n">data</span>
</pre></div>


<p>忽略前导空白及字典序排序</p>
<div class="highlight"><pre><span class="n">sort</span> <span class="o">-</span><span class="n">bd</span> <span class="n">unsorted</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<h3>uniq</h3>
<p>用法</p>
<div class="highlight"><pre><span class="n">uniq</span> <span class="n">file</span>
</pre></div>


<p>只显示唯一的行</p>
<div class="highlight"><pre><span class="n">uniq</span> <span class="o">-</span><span class="n">u</span> <span class="n">file</span>
</pre></div>


<p>统计各行出现的次数</p>
<div class="highlight"><pre><span class="n">uniq</span> <span class="o">-</span><span class="n">c</span> <span class="n">file</span>
</pre></div>


<p>找出重复的行</p>
<div class="highlight"><pre><span class="n">uniq</span> <span class="o">-</span><span class="n">d</span> <span class="n">file</span>
<span class="o">-</span><span class="n">s</span> <span class="err">可指定跳过前</span><span class="n">N</span><span class="err">个字符</span>
<span class="o">-</span><span class="n">w</span> <span class="err">指定用于比较的最大字符数</span>
</pre></div>


<p>p57</p>
<h3>tempfile</h3>
<p>只有在基于Debian的发布版才有</p>
<div class="highlight"><pre><span class="n">temp_file</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="n">tempfile</span><span class="p">)</span>
<span class="err">等同</span>
<span class="n">temp_file</span><span class="o">=</span><span class="s">&quot;/tmp/file-$RANDOM&quot;</span>

<span class="cp">#$$为进城id</span>
<span class="n">temp_file</span><span class="o">=</span><span class="s">&quot;/tmp/var.$$&quot;</span>
</pre></div>


<h3>split</h3>
<p>分割文件</p>
<div class="highlight"><pre><span class="n">split</span> <span class="o">-</span><span class="n">b</span> <span class="mi">10</span><span class="n">k</span> <span class="n">data</span><span class="p">.</span><span class="n">file</span>
</pre></div>


<p>-d数字后缀，-a后缀长度</p>
<div class="highlight"><pre><span class="n">split</span> <span class="o">-</span><span class="n">b</span> <span class="mi">10</span><span class="n">k</span> <span class="n">data</span><span class="p">.</span><span class="n">file</span> <span class="o">-</span><span class="n">d</span> <span class="o">-</span><span class="n">a</span> <span class="mi">4</span>
</pre></div>


<p>分割后指定文件名长度</p>
<div class="highlight"><pre><span class="n">split</span> <span class="o">-</span><span class="n">b</span> <span class="mi">10</span><span class="n">k</span> <span class="n">data</span><span class="p">.</span><span class="n">file</span> <span class="n">file_prefix</span>
</pre></div>


<p>根据行数分割</p>
<div class="highlight"><pre><span class="n">spilt</span> <span class="o">-</span><span class="n">l</span> <span class="mi">10</span> <span class="n">data</span>
</pre></div>


<p>其扩展是csplit，可根据文件特性切分，关注</p>
<h3>bash变量匹配切分</h3>
<p>sample.jpg</p>
<div class="highlight"><pre>从右向左匹配
<span class="cp">${</span><span class="n">file_jpg</span><span class="o">%.*</span><span class="cp">}</span>
#sample

从左向右匹配
<span class="cp">${</span><span class="n">file_jpg</span><span class="c">#.*</span><span class="cp">}</span>
#jpg

% # 属于非贪婪
%% ## 属于贪婪
</pre></div>


<p>贪婪非贪婪</p>
<div class="highlight"><pre>var=hack.fun.book.txt
<span class="cp">${</span><span class="n">var</span><span class="o">%.*</span><span class="cp">}</span> #hack.fun.book
<span class="cp">${</span><span class="n">var</span><span class="o">%%.*</span><span class="cp">}</span> #hack

<span class="cp">${</span><span class="n">var</span><span class="c">#.*</span><span class="cp">}</span> #fun.book.txt
<span class="cp">${</span><span class="n">var</span><span class="c">##.*</span><span class="cp">}</span> #txt
</pre></div>


<h3>expect</h3>
<p>实现自动化</p>
<div class="highlight"><pre><span class="n">spawn</span> <span class="p">.</span><span class="o">/</span><span class="n">ineractive</span><span class="p">.</span><span class="n">sh</span>
<span class="n">expect</span> <span class="s">&quot;Enter the number&quot;</span>
<span class="n">send</span> <span class="s">&quot;1</span><span class="se">\n</span><span class="s">&quot;</span>
<span class="n">expect</span> <span class="s">&quot;Ener name:&quot;</span>
<span class="n">send</span> <span class="s">&quot;hello</span><span class="se">\n</span><span class="s">&quot;</span>
<span class="n">expect</span> <span class="n">eof</span>
</pre></div>


<h3>dd</h3>
<div class="highlight"><pre><span class="n">dd</span> <span class="k">if</span><span class="o">=/</span><span class="n">dev</span><span class="o">/</span><span class="n">zero</span> <span class="n">of</span><span class="o">=</span><span class="n">junk</span><span class="p">.</span><span class="n">data</span> <span class="n">bs</span><span class="o">=</span><span class="mi">1</span><span class="n">M</span> <span class="n">count</span><span class="o">=</span><span class="mi">1</span>
   <span class="err">输入文件</span>     <span class="err">输出文件</span>     <span class="err">块大小</span>   <span class="err">复制块数</span>
</pre></div>


<h3>comm</h3>
<p>两个文件之间比较，输出三列
onleA   bothAB  onlyB</p>
<div class="highlight"><pre><span class="n">comm</span> <span class="n">A</span> <span class="n">B</span> <span class="o">-</span><span class="mi">1</span> <span class="o">-</span><span class="mi">2</span> <span class="err">#删除第一第二列</span>
</pre></div>


<h3>mkdir</h3>
<div class="highlight"><pre><span class="n">mkdir</span> <span class="n">dirpath</span>

<span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="n">dirpath1</span><span class="o">/</span><span class="n">dirpath2</span>
</pre></div>


<h3>ls</h3>
<p>ls文件的内容关系</p>
<div class="highlight"><pre><span class="o">-</span> <span class="err">普通文件</span>
<span class="n">d</span> <span class="err">目录</span>
<span class="n">c</span> <span class="err">字符设备</span>
<span class="n">b</span> <span class="err">块设备</span>
<span class="n">l</span> <span class="err">符号链接</span>
<span class="n">s</span> <span class="err">套接字</span>
<span class="n">p</span> <span class="err">管道</span>

<span class="err">文件权限序列</span>
<span class="n">rwx</span>
<span class="n">rwS</span>  <span class="n">setuid</span><span class="err">，允许用户以其拥有者的权限来执行文件</span>

<span class="err">目录</span>
<span class="n">r</span><span class="p">,</span><span class="err">允许读取目录中文件和子目录列表</span>
<span class="n">w</span><span class="p">,</span><span class="err">允许在目录中创建或删除文件或目录</span>
<span class="n">x</span><span class="p">,</span><span class="err">指明是否可以访问目录中的文件和子目录</span>
<span class="n">rwt</span><span class="o">/</span><span class="n">rwT</span> <span class="err">粘滞位，只有创建该目录的用户才能删除目录中的文件，即使用户组和其他用户也有写权限，典型例子</span><span class="o">/</span><span class="n">tmp</span>
</pre></div>


<p>查看目录</p>
<div class="highlight"><pre><span class="n">ls</span> <span class="o">-</span><span class="n">d</span> <span class="err">*/</span>
<span class="n">ls</span> <span class="o">-</span><span class="n">F</span> <span class="o">|</span> <span class="n">grep</span> <span class="s">&quot;/$&quot;</span>
<span class="n">ls</span> <span class="o">-</span><span class="n">l</span> <span class="o">|</span> <span class="n">grep</span> <span class="s">&quot;^d&quot;</span>
<span class="n">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">type</span> <span class="n">d</span> <span class="o">-</span><span class="n">maxdepth</span> <span class="mi">1</span> <span class="o">-</span><span class="n">print</span>
</pre></div>


<h3>chmod</h3>
<p>设置权限</p>
<div class="highlight"><pre><span class="n">chmod</span> <span class="n">u</span><span class="o">=</span><span class="n">rwx</span> <span class="n">g</span><span class="o">=</span><span class="n">rw</span> <span class="n">o</span><span class="o">=</span><span class="n">r</span> <span class="n">filename</span>

<span class="n">chmod</span> <span class="n">u</span><span class="o">+</span><span class="n">x</span> <span class="n">filename</span>
<span class="n">chomd</span> <span class="n">a</span><span class="o">+</span><span class="n">x</span> <span class="n">filename</span> <span class="err">#所有</span>

<span class="n">chmod</span> <span class="n">a</span><span class="o">-</span><span class="n">x</span> <span class="n">filename</span>

<span class="n">chmod</span> <span class="mi">764</span> <span class="n">filename</span>

<span class="cp">#设置粘滞位</span>
<span class="n">chmod</span> <span class="n">a</span><span class="o">+</span><span class="n">t</span> <span class="n">dirname</span>

<span class="cp">#递归改变</span>

<span class="n">chmod</span> <span class="mi">777</span> <span class="p">.</span> <span class="o">-</span><span class="n">R</span>
</pre></div>


<h3>chown</h3>
<p>改变所有权</p>
<div class="highlight"><pre><span class="n">chown</span> <span class="n">user</span><span class="p">.</span><span class="n">group</span> <span class="n">filename</span>
</pre></div>


<p>递归</p>
<div class="highlight"><pre><span class="n">chown</span> <span class="o">-</span><span class="n">R</span> <span class="n">user</span><span class="p">.</span><span class="n">group</span> <span class="p">.</span>
</pre></div>


<p>每次都以其他用户身份执行</p>
<div class="highlight"><pre><span class="n">chomod</span> <span class="o">+</span><span class="n">s</span> <span class="n">executable_file</span>

<span class="n">chown</span> <span class="n">root</span><span class="p">.</span><span class="n">root</span> <span class="n">executable_file</span>
<span class="n">chmod</span> <span class="o">+</span><span class="n">s</span> <span class="n">executable_file</span>
<span class="p">.</span><span class="o">/</span><span class="n">executable_file</span>
</pre></div>


<h3>chattr</h3>
<p>创建不可修改文件</p>
<div class="highlight"><pre><span class="n">chattr</span> <span class="o">+</span><span class="n">i</span> <span class="n">file</span>
</pre></div>


<h3>touch</h3>
<p>空白文件</p>
<div class="highlight"><pre><span class="n">touch</span> <span class="n">filename</span>

<span class="k">for</span> <span class="n">name</span> <span class="p">{</span><span class="mf">1..100</span><span class="p">}.</span><span class="n">txt</span>
<span class="k">do</span>
    <span class="n">touch</span> <span class="err">$</span><span class="n">name</span>
<span class="n">done</span>
</pre></div>


<p>修改文件访问时间</p>
<div class="highlight"><pre><span class="n">touch</span> <span class="o">-</span><span class="n">a</span> <span class="s">&quot;Fri Jun 25 20:50:14 IST 1999&quot;</span> <span class="n">filename</span>
<span class="n">touch</span> <span class="o">-</span><span class="n">m</span> <span class="err">#修改文件内容的修改时间</span>
</pre></div>


<h3>ln</h3>
<p>建立软连接</p>
<div class="highlight"><pre><span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="n">target</span> <span class="n">symbolic_link_name</span>
</pre></div>


<h3>readlink</h3>
<p>读取链接对应真是路径</p>
<div class="highlight"><pre><span class="n">readlink</span> <span class="n">web</span>
</pre></div>


<h3>file</h3>
<p>打印文件类型信息</p>
<div class="highlight"><pre><span class="n">file</span> <span class="n">filename</span>
</pre></div>


<p>打印不包含文件名在内</p>
<div class="highlight"><pre><span class="n">file</span> <span class="o">-</span><span class="n">b</span> <span class="n">filename</span>
</pre></div>


<h3>读文件</h3>
<div class="highlight"><pre><span class="k">while</span> <span class="n">read</span> <span class="n">line</span><span class="p">;</span>
<span class="k">do</span>
    <span class="n">something</span>
<span class="n">done</span> <span class="o">&lt;</span> <span class="n">filename</span>
</pre></div>


<h3>diff</h3>
<p>生成文件差异
非一体化</p>
<div class="highlight"><pre><span class="gh">diff version1.txt version2.txt</span>
</pre></div>


<p>一体化</p>
<div class="highlight"><pre><span class="gh">diff -u version.txt</span>
</pre></div>


<p>使用patch将命令应用于任意一个文件</p>
<div class="highlight"><pre><span class="gh">diff -u version1.txt version2.txt &gt; version.patch</span>
patch -p1 version1.txt &lt; version.patch
</pre></div>


<p>递归作用于目录</p>
<div class="highlight"><pre><span class="gh">diff -Naur directory1 directory2</span>
<span class="gd">-N 所有缺失的文件作为空文件</span>
<span class="gd">-a 所有文件视为文本文件</span>
<span class="gd">-u 一体化输出</span>
<span class="gd">-r 递归遍历</span>
</pre></div>


<h3>head</h3>
<p>前10行打印</p>
<div class="highlight"><pre><span class="n">head</span> <span class="n">file</span>
</pre></div>


<p>前n行</p>
<div class="highlight"><pre><span class="n">head</span> <span class="o">-</span><span class="n">n</span> <span class="mi">4</span> <span class="n">file</span>
</pre></div>


<p>扣除最后N行之外的所有行</p>
<div class="highlight"><pre><span class="n">head</span> <span class="o">-</span><span class="n">n</span> <span class="o">-</span><span class="mi">5</span> <span class="n">file</span>
</pre></div>


<h3>tail</h3>
<p>最后10行</p>
<div class="highlight"><pre><span class="n">tail</span> <span class="n">file</span>
</pre></div>


<p>打印最后五行</p>
<div class="highlight"><pre><span class="n">tail</span> <span class="o">-</span><span class="n">n</span> <span class="mi">5</span> <span class="n">file</span>
</pre></div>


<p>扣除前n行</p>
<div class="highlight"><pre><span class="n">tail</span> <span class="o">-</span><span class="n">n</span> <span class="o">+</span><span class="p">(</span><span class="n">N</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</pre></div>


<p>实时动态打印</p>
<div class="highlight"><pre><span class="n">tail</span> <span class="o">-</span><span class="n">f</span> <span class="n">growing_file</span>
</pre></div>


<h3>pushd/popd</h3>
<p>将当前路径压入栈</p>
<div class="highlight"><pre><span class="n">pushd</span>
</pre></div>


<p>压入某个路径</p>
<div class="highlight"><pre><span class="n">pushd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">ken</span>
</pre></div>


<p>查看当前路径列表</p>
<div class="highlight"><pre><span class="n">dirs</span>
</pre></div>


<p>切换到某一个</p>
<div class="highlight"><pre><span class="cp">#dirs从左到右编号 0 -</span>
<span class="n">pushd</span> <span class="o">+</span><span class="mi">3</span>
</pre></div>


<p>移除最近压入栈的路径并切换到下一个目录</p>
<div class="highlight"><pre><span class="n">popd</span>
</pre></div>


<h3>cd</h3>
<p>切换到上一目录</p>
<div class="highlight"><pre><span class="n">cd</span> <span class="o">-</span>
</pre></div>


<h3>wc</h3>
<p>统计行数</p>
<div class="highlight"><pre><span class="n">wc</span> <span class="o">-</span><span class="n">l</span> <span class="n">file</span>
</pre></div>


<p>统计单词数</p>
<div class="highlight"><pre><span class="n">wc</span> <span class="o">-</span><span class="n">w</span> <span class="n">file</span>
</pre></div>


<p>统计字符数</p>
<div class="highlight"><pre><span class="n">wc</span> <span class="o">-</span><span class="n">c</span> <span class="n">file</span>
</pre></div>


<p>统计所有</p>
<div class="highlight"><pre><span class="n">wc</span> <span class="n">file</span>
</pre></div>


<h3>tree</h3>
<p>以图形化的树状结构打印文件和目录的结构，需要自行安装</p>
<div class="highlight"><pre><span class="n">tree</span> <span class="o">~/</span><span class="n">unixfile</span>
</pre></div>


<p>重点标记出匹配某种样式的文件</p>
<div class="highlight"><pre><span class="n">tree</span> <span class="n">PATH</span> <span class="o">-</span><span class="n">P</span> <span class="s">&quot;*.sh&quot;</span>
</pre></div>


<p>只标记符合样式之外的文件</p>
<div class="highlight"><pre><span class="n">tree</span> <span class="n">path</span> <span class="o">-</span><span class="n">I</span> <span class="n">PATTERN</span>
</pre></div>


<p>同时打印文件和目录大小</p>
<div class="highlight"><pre><span class="n">tree</span> <span class="o">-</span><span class="n">h</span>
</pre></div>


<h3>grep</h3>
<p>基本用法</p>
<div class="highlight"><pre><span class="n">grep</span> <span class="s">&quot;match_pattern&quot;</span> <span class="n">file1</span> <span class="n">file2</span>
</pre></div>


<p>使用颜色重点标记</p>
<div class="highlight"><pre><span class="n">grep</span> <span class="n">word</span> <span class="n">filename</span> <span class="o">--</span><span class="n">color</span><span class="o">=</span><span class="k">auto</span>
</pre></div>


<p>扩展型使用正则</p>
<div class="highlight"><pre><span class="n">grep</span> <span class="o">-</span><span class="n">E</span> <span class="s">&quot;[a-z]+&quot;</span>
<span class="n">egrep</span> <span class="s">&quot;[a-z]+&quot;</span>
</pre></div>


<p>只输出匹配到的文本部分</p>
<div class="highlight"><pre><span class="n">grep</span> <span class="o">-</span><span class="n">o</span> <span class="n">word</span> <span class="n">filename</span>
</pre></div>


<p>除匹配行外的所有行</p>
<div class="highlight"><pre><span class="n">grep</span> <span class="o">-</span><span class="n">v</span> <span class="n">word</span> <span class="n">filename</span>
</pre></div>


<p>统计匹配行数</p>
<div class="highlight"><pre><span class="n">grep</span> <span class="o">-</span><span class="n">c</span> <span class="err">&#39;</span><span class="n">text</span><span class="err">&#39;</span> <span class="n">filename</span>
</pre></div>


<p>打印出包含匹配字符串的行数</p>
<div class="highlight"><pre><span class="n">grep</span> <span class="n">linux</span> <span class="o">-</span><span class="n">n</span> <span class="n">filename</span>
</pre></div>


<p>打印样式匹配所位于的字符或字节的偏移</p>
<div class="highlight"><pre><span class="n">echo</span> <span class="s">&quot;gnu is not unix&quot;</span> <span class="o">|</span> <span class="n">grep</span> <span class="o">-</span><span class="n">b</span> <span class="o">-</span><span class="n">o</span> <span class="s">&quot;not&quot;</span>
</pre></div>


<p>搜索多个文件，找出匹配文本位于哪个文件中</p>
<div class="highlight"><pre><span class="n">grep</span> <span class="o">-</span><span class="n">l</span> <span class="n">linux</span> <span class="n">file1</span> <span class="n">file2</span>
<span class="err">取反</span>
<span class="n">grep</span> <span class="o">-</span><span class="n">L</span>
</pre></div>


<p>递归搜索目录</p>
<div class="highlight"><pre><span class="n">grep</span> <span class="o">-</span><span class="n">R</span> <span class="s">&quot;text&quot;</span> <span class="n">dir</span>
</pre></div>


<p>忽略大小写</p>
<div class="highlight"><pre><span class="n">grep</span> <span class="o">-</span><span class="n">i</span> <span class="s">&quot;hello&quot;</span> <span class="n">filename</span>
</pre></div>


<p>匹配多个样式</p>
<div class="highlight"><pre><span class="n">grep</span> <span class="o">-</span><span class="n">e</span> <span class="s">&quot;pattern1&quot;</span> <span class="o">-</span><span class="n">e</span> <span class="s">&quot;pattern2&quot;</span>
</pre></div>


<p>运行匹配脚本</p>
<div class="highlight"><pre><span class="n">grep</span> <span class="o">-</span><span class="n">f</span> <span class="n">pattern_file</span> <span class="n">source_file</span>
</pre></div>


<p>在搜索中包含、排除文件</p>
<div class="highlight"><pre><span class="n">grep</span> <span class="o">--</span><span class="n">include</span> <span class="o">*</span><span class="p">.{</span><span class="n">c</span><span class="p">,</span><span class="n">cpp</span><span class="p">}</span> <span class="n">word</span> <span class="n">file</span>
</pre></div>


<p>排除</p>
<div class="highlight"><pre><span class="n">grep</span> <span class="o">--</span><span class="n">exclude</span> <span class="s">&quot;Readme&quot;</span> <span class="n">filename</span>
</pre></div>


<p>静默输出，用于判断</p>
<div class="highlight"><pre><span class="n">grep</span> <span class="o">-</span><span class="n">q</span> <span class="n">word</span> <span class="n">file</span>
<span class="k">if</span> <span class="p">[</span> <span class="err">$</span><span class="o">?</span> <span class="o">-</span><span class="n">eq</span> <span class="mi">0</span> <span class="p">]</span>
</pre></div>


<p>打印匹配行之前，之后的行</p>
<div class="highlight"><pre><span class="n">grep</span> <span class="o">-</span><span class="n">A</span> <span class="mi">3</span> <span class="err">之后</span><span class="mi">3</span><span class="err">行</span>
<span class="n">grep</span> <span class="o">-</span><span class="n">B</span> <span class="mi">3</span> <span class="err">之前</span>
<span class="n">grep</span> <span class="o">-</span><span class="n">C</span> <span class="mi">3</span> <span class="err">前后</span>
</pre></div>


<h3>cut</h3>
<p>提取字段或列</p>
<div class="highlight"><pre><span class="n">cut</span> <span class="o">-</span><span class="n">f1</span> <span class="n">filenam</span>
<span class="n">cut</span> <span class="o">-</span><span class="n">f2</span><span class="p">,</span><span class="mi">3</span> <span class="n">filename</span>
</pre></div>


<p>提取补集</p>
<div class="highlight"><pre><span class="n">cut</span> <span class="o">-</span><span class="n">f1</span> <span class="o">--</span><span class="n">complement</span> <span class="n">filename</span>
</pre></div>


<p>制定字段分隔符</p>
<div class="highlight"><pre><span class="n">cut</span> <span class="o">-</span><span class="n">f2</span> <span class="o">-</span><span class="n">d</span> <span class="s">&quot;;&quot;</span> <span class="n">filename</span>
</pre></div>


<p>指定字节</p>
<div class="highlight"><pre><span class="n">cut</span> <span class="o">-</span><span class="n">c1</span><span class="o">-</span><span class="mi">5</span> <span class="n">filename</span>
<span class="n">N</span><span class="o">-</span>
<span class="n">N</span><span class="o">-</span><span class="n">M</span>
<span class="o">-</span><span class="n">M</span>
</pre></div>


<p>指定输出分隔符</p>
<div class="highlight"><pre><span class="n">cut</span> <span class="o">-</span><span class="n">c1</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="o">-</span><span class="mi">9</span> <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">delimiter</span> <span class="s">&quot;,&quot;</span>
</pre></div>


<h3>sed</h3>
<p>sed替换语法</p>
<div class="highlight"><pre><span class="n">sed</span> <span class="err">&#39;</span><span class="n">s</span><span class="o">/</span><span class="n">pattern</span><span class="o">/</span><span class="n">replace_string</span><span class="o">/</span><span class="err">&#39;</span> <span class="n">file</span>
</pre></div>


<p>将结果直接运用于源文件</p>
<div class="highlight"><pre><span class="n">sed</span> <span class="o">-</span><span class="n">i</span> <span class="err">&#39;</span><span class="n">s</span><span class="o">/</span><span class="n">pattern</span><span class="o">/</span><span class="n">replace_string</span><span class="o">/</span><span class="err">&#39;</span> <span class="n">file</span>
<span class="err">替换所有</span>
<span class="n">sed</span> <span class="o">-</span><span class="n">i</span> <span class="err">&#39;</span><span class="n">s</span><span class="o">/</span><span class="n">pattern</span><span class="o">/</span><span class="n">replace_string</span><span class="o">/</span><span class="n">g</span><span class="err">&#39;</span> <span class="n">file</span>
<span class="err">从第</span><span class="n">N</span><span class="err">处开始替换</span>
<span class="n">sed</span> <span class="o">-</span><span class="n">i</span> <span class="err">&#39;</span><span class="n">s</span><span class="o">/</span><span class="n">pattern</span><span class="o">/</span><span class="n">replcae_string</span><span class="o">/</span><span class="mi">2</span><span class="n">g</span><span class="err">&#39;</span> <span class="n">file</span>
</pre></div>


<p>移除空白行</p>
<div class="highlight"><pre><span class="n">sed</span> <span class="err">&#39;</span><span class="o">/^</span><span class="err">$</span><span class="o">/</span><span class="n">d</span><span class="err">&#39;</span> <span class="n">file</span>
</pre></div>


<p>已匹配字符串标记</p>
<div class="highlight"><pre><span class="n">sed</span> <span class="err">&#39;</span><span class="n">s</span><span class="o">/</span><span class="err">\</span><span class="n">w</span><span class="err">\</span><span class="o">+/</span><span class="p">[</span><span class="o">&amp;</span><span class="p">]</span><span class="o">/</span><span class="n">g</span><span class="err">&#39;</span> <span class="n">filename</span>
</pre></div>


<p>子串匹配标记</p>
<div class="highlight"><pre><span class="n">sed</span> <span class="err">&#39;</span><span class="n">s</span><span class="o">/</span><span class="err">\</span><span class="p">([</span><span class="n">a</span><span class="o">-</span><span class="n">z</span><span class="p">]</span><span class="err">\</span><span class="o">+</span><span class="err">\</span><span class="p">)</span><span class="err">&#39;</span> <span class="err">\</span><span class="p">([</span><span class="n">A</span><span class="o">-</span><span class="n">Z</span><span class="err">\</span><span class="p">]</span><span class="err">\</span><span class="o">+</span><span class="err">\</span><span class="p">)</span><span class="o">/</span><span class="err">\</span><span class="mi">2</span> <span class="err">\</span><span class="mi">1</span><span class="o">/</span><span class="err">&#39;</span> <span class="n">filename</span>
</pre></div>


<p>组合多个表达式</p>
<div class="highlight"><pre><span class="n">sed</span> <span class="err">&#39;</span><span class="n">exp1</span><span class="err">&#39;</span> <span class="o">|</span> <span class="n">sed</span> <span class="err">&#39;</span><span class="n">exp2</span><span class="err">&#39;</span>
<span class="err">等价</span>
<span class="n">sed</span> <span class="err">&#39;</span><span class="n">exp1</span><span class="p">;</span><span class="n">exp2</span><span class="err">&#39;</span>
</pre></div>


<p>使用引用</p>
<div class="highlight"><pre><span class="n">sed</span> <span class="s">&quot;s/$text/HELLO/&quot;</span>
</pre></div>


<p>保存到文件</p>
<div class="highlight"><pre><span class="n">sed</span> <span class="err">&#39;</span><span class="n">s</span><span class="o">/</span><span class="n">pattern</span><span class="o">/</span><span class="n">replacement</span><span class="o">/</span><span class="err">&#39;</span> <span class="o">-</span><span class="n">i</span> <span class="n">outfile</span>
</pre></div>


<h3>awk</h3>
<p>基本结构</p>
<div class="highlight"><pre><span class="n">awk</span> <span class="o">-</span><span class="n">F</span> <span class="sc">&#39;-&#39;</span> <span class="err">&#39;</span><span class="n">BEGIN</span><span class="p">{</span><span class="n">statements</span><span class="p">}</span> <span class="p">{</span><span class="n">statements</span><span class="p">}</span> <span class="n">END</span><span class="p">{</span><span class="n">statements</span><span class="p">}</span><span class="err">&#39;</span> <span class="n">file</span>
<span class="err">表达式中单引号可以换成双引号</span>
<span class="n">BEGIN</span> <span class="o">-&gt;</span> <span class="err">每一行，执行</span><span class="n">statements</span><span class="p">,</span> <span class="err">执行</span><span class="n">END</span>
</pre></div>


<p>打印某一列</p>
<div class="highlight"><pre><span class="n">awk</span> <span class="o">-</span><span class="n">F</span> <span class="sc">&#39;-&#39;</span> <span class="err">&#39;</span><span class="p">{</span><span class="n">print</span> <span class="err">$</span><span class="mi">0</span><span class="p">}</span><span class="err">&#39;</span> <span class="n">file</span> <span class="err">#全部</span>
<span class="n">awk</span> <span class="o">-</span><span class="n">F</span> <span class="sc">&#39;-&#39;</span> <span class="err">&#39;</span><span class="p">{</span><span class="n">print</span> <span class="err">$</span><span class="mi">2</span><span class="p">}</span><span class="err">&#39;</span> <span class="n">file</span> <span class="err">#第二列</span>
</pre></div>


<p>print拼接字符</p>
<div class="highlight"><pre><span class="n">awk</span> <span class="err">&#39;</span><span class="p">{</span><span class="n">var</span><span class="o">=</span><span class="s">&quot;v1&quot;</span><span class="p">;</span> <span class="n">var1</span><span class="o">=</span><span class="s">&quot;v2&quot;</span><span class="p">;</span> <span class="n">print</span> <span class="n">var1</span><span class="s">&quot;-&quot;</span><span class="n">var2</span><span class="p">;}</span><span class="err">&#39;</span>
</pre></div>


<p>特殊变量</p>
<div class="highlight"><pre><span class="n">NR</span> <span class="n">nuber</span> <span class="n">of</span> <span class="n">records</span>
<span class="n">NF</span> <span class="n">number</span> <span class="n">of</span> <span class="n">fields</span>
<span class="err">$</span><span class="mi">0</span> <span class="err">当前行文本</span>
<span class="err">$</span><span class="mi">1</span> <span class="err">第一字段</span>
</pre></div>


<p>统计行数</p>
<div class="highlight"><pre><span class="n">awk</span> <span class="err">&#39;</span><span class="n">END</span><span class="p">{</span><span class="n">print</span> <span class="n">NF</span><span class="p">}</span><span class="err">&#39;</span>
</pre></div>


<p>将外部变量值传递给awk</p>
<div class="highlight"><pre><span class="n">awk</span> <span class="o">-</span><span class="n">v</span> <span class="n">VARIABLE</span><span class="o">=</span><span class="err">$</span><span class="n">VAR</span> <span class="err">&#39;</span><span class="p">{</span> <span class="n">print</span> <span class="n">VARIABLE</span> <span class="p">}</span><span class="err">&#39;</span>
<span class="n">awk</span> <span class="err">&#39;</span><span class="p">{</span><span class="n">print</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">}</span><span class="err">&#39;</span> <span class="n">v1</span><span class="o">=</span><span class="err">$</span><span class="n">var1</span> <span class="n">v2</span><span class="o">=</span><span class="err">$</span><span class="n">var2</span>
</pre></div>


<p>读取行</p>
<div class="highlight"><pre><span class="n">seq</span> <span class="mi">5</span> <span class="o">|</span> <span class="n">awk</span> <span class="err">&#39;</span><span class="p">{</span> <span class="n">getline</span> <span class="n">var</span><span class="p">;</span> <span class="n">print</span> <span class="n">var</span><span class="p">}</span><span class="err">&#39;</span>
</pre></div>


<p>进行行过滤</p>
<div class="highlight"><pre><span class="n">awk</span> <span class="err">&#39;</span><span class="n">NR</span><span class="o">&lt;</span><span class="mi">5</span><span class="err">&#39;</span> <span class="err">#行号小于</span><span class="mi">5</span>
<span class="n">awk</span> <span class="err">&#39;</span><span class="n">NR</span><span class="o">==</span><span class="mi">1</span><span class="p">,</span><span class="n">NR</span><span class="o">==</span><span class="mi">4</span><span class="err">&#39;</span> <span class="err">#行号在</span><span class="mi">1</span><span class="err">到</span><span class="mi">5</span><span class="err">之间</span>
<span class="n">awk</span> <span class="err">&#39;</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="err">&#39;</span> <span class="err">#包含样式</span><span class="n">linux</span>
<span class="n">awk</span> <span class="err">&#39;</span><span class="o">!/</span><span class="n">linux</span><span class="o">/</span><span class="err">&#39;</span> <span class="err">#不包含</span>
</pre></div>


<p>设定分隔符</p>
<div class="highlight"><pre><span class="n">awk</span> <span class="o">-</span><span class="n">F</span><span class="o">:</span> <span class="err">&#39;</span><span class="p">{</span> <span class="n">print</span> <span class="err">$</span><span class="n">NF</span> <span class="p">}</span><span class="err">&#39;</span> <span class="n">file</span>
</pre></div>


<p>awk中使用循环</p>
<div class="highlight"><pre><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="n">print</span> <span class="err">$</span><span class="n">i</span><span class="p">;</span> <span class="p">}</span>

<span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="n">in</span> <span class="n">array</span><span class="p">)</span> <span class="p">{</span> <span class="n">print</span> <span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">}</span>
</pre></div>


<p>内建函数</p>
<div class="highlight"><pre><span class="n">length</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
<span class="n">index</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="n">search_str</span><span class="p">)</span>
<span class="n">split</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="n">array</span><span class="p">,</span><span class="n">delimiter</span><span class="p">)</span> <span class="err">用界定符生成一个字符串列表</span>
<span class="n">substr</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span> <span class="err">#子串</span>
<span class="n">sub</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span> <span class="n">replacement_str</span><span class="p">,</span> <span class="n">str</span><span class="p">)</span> <span class="err">#正则替换首个匹配位置</span>
<span class="n">gsub</span><span class="p">(...)</span> <span class="err">#最后一个匹配位置</span>
<span class="n">match</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span> <span class="err">#检查是否能够匹配字符串</span>
</pre></div>


<h3>文件迭代</h3>
<p>读文件行</p>
<div class="highlight"><pre><span class="k">while</span> <span class="n">read</span> <span class="n">line</span><span class="p">;</span>
<span class="k">do</span>
    <span class="n">echo</span> <span class="err">$</span><span class="n">line</span><span class="p">;</span>
<span class="n">done</span> <span class="o">&lt;</span> <span class="n">file</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<p>迭代每个单词</p>
<div class="highlight"><pre><span class="k">for</span> <span class="n">word</span> <span class="n">in</span> <span class="err">$</span><span class="n">line</span><span class="p">;</span>
<span class="k">do</span>
    <span class="n">echo</span> <span class="err">$</span><span class="n">word</span><span class="p">;</span>
<span class="n">done</span>
</pre></div>


<p>迭代每一个字符</p>
<div class="highlight"><pre>for((i=0;i<span class="err">&lt;</span><span class="cp">${</span><span class="c">#word</span><span class="cp">}</span>;i++))
do
    echo <span class="cp">${</span><span class="n">word</span><span class="p">:</span><span class="n">i</span><span class="p">:</span><span class="mi">1</span><span class="cp">}</span> ;
done
</pre></div>


<h3>paste</h3>
<p>按列合并文件</p>
<div class="highlight"><pre><span class="n">paste</span> <span class="n">file1</span> <span class="n">file2</span> <span class="n">file3</span>
</pre></div>


<p>指定分隔符</p>
<div class="highlight"><pre><span class="n">paste</span> <span class="n">file1</span> <span class="n">file2</span> <span class="o">-</span><span class="n">d</span> <span class="sc">&#39;,&#39;</span>
</pre></div>


<h3>tac</h3>
<p>逆序打印</p>
<div class="highlight"><pre><span class="n">tac</span> <span class="n">file1</span> <span class="n">file2</span>
</pre></div>


<h3>wget</h3>
<p>一个用于文件下载的命令行工具</p>
<div class="highlight"><pre><span class="n">wget</span> <span class="n">URL1</span> <span class="n">URL2</span>
</pre></div>


<p>指定保存文件名</p>
<div class="highlight"><pre><span class="n">wget</span> <span class="n">URL</span> <span class="o">-</span><span class="n">O</span> <span class="n">local</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<p>指定日志，默认达到stdout</p>
<div class="highlight"><pre><span class="n">wget</span> <span class="n">URL</span> <span class="o">-</span><span class="n">O</span> <span class="n">local</span><span class="p">.</span><span class="n">txt</span> <span class="o">-</span><span class="n">o</span> <span class="n">log</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<p>指定重复尝试次数</p>
<div class="highlight"><pre><span class="n">wget</span> <span class="o">-</span><span class="n">t</span> <span class="mi">5</span> <span class="n">URL</span>
</pre></div>


<p>下载限速</p>
<div class="highlight"><pre><span class="n">wget</span> <span class="o">--</span><span class="n">limit</span><span class="o">-</span><span class="n">rate</span> <span class="mi">20</span><span class="n">k</span> <span class="n">url</span>
</pre></div>


<p>指定限额</p>
<div class="highlight"><pre><span class="n">wget</span> <span class="o">-</span><span class="n">Q</span> <span class="mi">100</span><span class="n">m</span> <span class="n">url</span>
</pre></div>


<p>断电续传</p>
<div class="highlight"><pre><span class="n">wget</span> <span class="o">-</span><span class="n">c</span> <span class="n">URL</span>
</pre></div>


<p>复制或镜像整个网站</p>
<div class="highlight"><pre><span class="n">wget</span> <span class="o">--</span><span class="n">mirror</span> <span class="n">exampledomain</span><span class="p">.</span><span class="n">com</span>
<span class="n">wget</span> <span class="o">-</span><span class="n">r</span> <span class="o">-</span><span class="n">N</span> <span class="o">-</span><span class="n">l</span> <span class="n">DEPTH</span> <span class="n">URL</span>
     <span class="err">递归，允许对文件使用时间戳，层级</span>
</pre></div>


<p>访问需要认证的HTTP/FTP</p>
<div class="highlight"><pre><span class="n">wget</span> <span class="o">--</span><span class="n">user</span> <span class="n">username</span> <span class="o">--</span><span class="n">password</span> <span class="n">pass</span> <span class="n">URL</span>
</pre></div>


<p>post请求</p>
<div class="highlight"><pre><span class="n">wget</span> <span class="n">url</span> <span class="o">-</span><span class="n">post</span><span class="o">-</span><span class="n">data</span> <span class="s">&quot;name=value&quot;</span> <span class="o">-</span><span class="n">O</span> <span class="n">output</span><span class="p">.</span><span class="n">html</span>
</pre></div>


<h3>curl</h3>
<div class="highlight"><pre><span class="n">curl</span> <span class="n">url</span> <span class="o">&gt;</span> <span class="n">index</span><span class="p">.</span><span class="n">html</span>
</pre></div>


<p>不显示进度信息</p>
<div class="highlight"><pre><span class="n">curl</span> <span class="n">URL</span> <span class="o">--</span><span class="n">slient</span>
</pre></div>


<p>将内容写入文件，而非标准输出</p>
<div class="highlight"><pre><span class="n">curl</span> <span class="n">URL</span> <span class="o">--</span><span class="n">slient</span> <span class="o">-</span><span class="n">O</span>
</pre></div>


<p>写入指定文件</p>
<div class="highlight"><pre><span class="n">curl</span> <span class="n">URL</span> <span class="o">--</span><span class="n">slient</span> <span class="o">-</span><span class="n">o</span> <span class="n">filename</span>
</pre></div>


<p>显示进度条</p>
<div class="highlight"><pre><span class="n">curl</span> <span class="n">url</span> <span class="o">-</span><span class="n">o</span> <span class="n">index</span><span class="p">.</span><span class="n">html</span> <span class="o">--</span><span class="n">progress</span>
</pre></div>


<p>断点续传</p>
<div class="highlight"><pre><span class="n">curl</span> <span class="o">-</span><span class="n">C</span> <span class="o">-</span> <span class="n">URL</span>
</pre></div>


<p>设置参照页字符串</p>
<div class="highlight"><pre><span class="n">curl</span> <span class="o">--</span><span class="n">referer</span> <span class="n">Referer_URL</span> <span class="n">target_URL</span>
<span class="err">跳转到</span><span class="n">target_URL</span><span class="p">,</span><span class="err">其头部</span><span class="n">referer</span><span class="err">为</span><span class="n">Referer_URL</span>
</pre></div>


<p>设置cookie</p>
<div class="highlight"><pre><span class="n">curl</span> <span class="n">url</span> <span class="o">--</span><span class="n">cookie</span> <span class="s">&quot;user=slynux;pass=hack&quot;</span>
<span class="err">另存为一个文件</span>

<span class="n">curl</span> <span class="n">URL</span> <span class="o">--</span><span class="n">cookie</span><span class="o">-</span><span class="n">jar</span> <span class="n">cookie_file</span>
</pre></div>


<p>设置用户代理</p>
<div class="highlight"><pre><span class="n">curl</span> <span class="n">URL</span> <span class="o">--</span><span class="n">user</span><span class="o">-</span><span class="n">agent</span> <span class="s">&quot;Mozilla/5.0&quot;</span>
<span class="err">头部信息</span>
<span class="n">curl</span> <span class="o">-</span><span class="n">H</span> <span class="s">&quot;Host: www.slynux.org&quot;</span> <span class="o">-</span><span class="n">H</span> <span class="s">&quot;Accept-language: en&quot;</span> <span class="n">url</span>
</pre></div>


<p>限定下载带宽</p>
<div class="highlight"><pre><span class="n">curl</span> <span class="n">url</span> <span class="o">--</span><span class="n">limit</span><span class="o">-</span><span class="n">rate</span> <span class="mi">20</span><span class="n">k</span>
</pre></div>


<p>指定最大下载量</p>
<div class="highlight"><pre><span class="n">curl</span> <span class="n">url</span> <span class="o">--</span><span class="n">max</span><span class="o">-</span><span class="n">filesize</span> <span class="n">bytes</span>
<span class="err">超出限制的话，返回非</span><span class="mi">0</span>
</pre></div>


<p>进行认证</p>
<div class="highlight"><pre><span class="n">curl</span> <span class="o">-</span><span class="n">u</span> <span class="n">user</span><span class="o">:</span><span class="n">pass</span> <span class="n">url</span>
</pre></div>


<p>只打印头部信息,不下载远程文件</p>
<div class="highlight"><pre><span class="n">curl</span> <span class="o">-</span><span class="n">I</span> <span class="n">url</span>
</pre></div>


<p>发送post请求</p>
<div class="highlight"><pre><span class="n">curl</span> <span class="n">URL</span> <span class="o">-</span><span class="n">d</span> <span class="s">&quot;va1=1&amp;va2=2&quot;</span>
         <span class="o">--</span><span class="n">data</span>
</pre></div>


<h3>lynx</h3>
<p>将网页以ascii字符形式下载</p>
<div class="highlight"><pre><span class="n">lynx</span> <span class="o">-</span><span class="n">dump</span> <span class="n">URL</span> <span class="o">&gt;</span> <span class="n">webpage_as_text</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<p>打印出网站的文本板块而非html</p>
<div class="highlight"><pre><span class="n">lynx</span> <span class="o">-</span><span class="n">dump</span> <span class="n">url</span>
</pre></div>


<p>生成信息文件</p>
<div class="highlight"><pre><span class="n">lynx</span> <span class="o">-</span><span class="n">traversal</span> <span class="n">url</span>
</pre></div>


<h3>tar</h3>
<p>对文件进行归档</p>
<div class="highlight"><pre><span class="n">tar</span> <span class="o">-</span><span class="n">cf</span> <span class="n">output</span><span class="p">.</span><span class="n">tar</span> <span class="n">file1</span> <span class="n">file2</span> <span class="n">file3</span>
<span class="n">tar</span> <span class="o">-</span><span class="n">cf</span> <span class="n">output</span><span class="p">.</span><span class="n">tar</span> <span class="o">*</span><span class="p">.</span><span class="n">txt</span>
<span class="o">-</span><span class="n">c</span> <span class="n">create</span> <span class="n">file</span><span class="p">,</span><span class="err">创建文件</span>
<span class="o">-</span><span class="n">f</span> <span class="n">specify</span> <span class="n">filename</span><span class="p">,</span><span class="err">指定文件名</span>
</pre></div>


<p>向归档中追加文件</p>
<div class="highlight"><pre><span class="n">tar</span> <span class="o">-</span><span class="n">rvf</span> <span class="n">original</span><span class="p">.</span><span class="n">tar</span> <span class="n">new_file</span>
<span class="o">-</span><span class="n">r</span><span class="p">,</span><span class="err">追加</span>
</pre></div>


<p>查看过程中更多信息</p>
<div class="highlight"><pre><span class="n">tar</span> <span class="o">-</span><span class="n">tvvf</span> <span class="n">archive</span><span class="p">.</span><span class="n">tar</span>
<span class="o">-</span><span class="n">v</span><span class="o">/-</span><span class="n">vv</span><span class="p">,</span> <span class="n">verbose</span>
</pre></div>


<p>提取文件或文件夹</p>
<div class="highlight"><pre><span class="n">tar</span> <span class="o">-</span><span class="n">xf</span> <span class="n">archive</span><span class="p">.</span><span class="n">tar</span>
<span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="n">exact</span>
<span class="n">tar</span> <span class="o">-</span><span class="n">xf</span> <span class="n">archive</span><span class="p">.</span><span class="n">tar</span> <span class="o">-</span><span class="n">C</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">extraction_directory</span>
<span class="o">-</span><span class="n">C</span><span class="p">,</span><span class="err">指定文件</span>
</pre></div>


<p>提取指定文件</p>
<div class="highlight"><pre><span class="n">tar</span> <span class="o">-</span><span class="n">xvf</span> <span class="n">file</span><span class="p">.</span><span class="n">tar</span> <span class="n">file1</span> <span class="n">file4</span>
</pre></div>


<p>拼接两个归档文件</p>
<div class="highlight"><pre><span class="n">tar</span> <span class="o">-</span><span class="n">Af</span> <span class="n">file1</span><span class="p">.</span><span class="n">tar</span> <span class="n">file2</span><span class="p">.</span><span class="n">tar</span>
<span class="cp">#file2合并到file1中</span>
</pre></div>


<p>只有在文件内容修改时间更新(newer),才进行添加</p>
<div class="highlight"><pre><span class="n">tar</span> <span class="o">-</span><span class="n">uvvf</span> <span class="n">archive</span><span class="p">.</span><span class="n">tar</span> <span class="n">filea</span>
</pre></div>


<p>比较归档文件与文件系统中的内容</p>
<div class="highlight"><pre><span class="n">tar</span> <span class="o">-</span><span class="n">df</span> <span class="n">archive</span><span class="p">.</span><span class="n">tar</span> <span class="n">filename1</span> <span class="n">filename2</span>
</pre></div>


<p>从归档文件中删除文件</p>
<div class="highlight"><pre><span class="n">tar</span> <span class="o">-</span><span class="n">f</span> <span class="n">archive</span><span class="p">.</span><span class="n">tar</span> <span class="o">--</span><span class="n">delete</span> <span class="n">file1</span> <span class="n">file2</span>
</pre></div>


<p>压缩归档文件</p>
<div class="highlight"><pre><span class="n">f</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">gz</span>   <span class="o">-</span><span class="n">z</span>
<span class="n">f</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">bz2</span>  <span class="o">-</span><span class="n">j</span>
<span class="n">f</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">lzma</span> <span class="o">--</span><span class="n">lzma</span>
<span class="n">f</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">lzo</span>
</pre></div>


<p>从归档中排除部分文件</p>
<div class="highlight"><pre><span class="n">tar</span> <span class="o">-</span><span class="n">cf</span> <span class="n">arch</span><span class="p">.</span><span class="n">tar</span> <span class="o">*</span> <span class="o">--</span><span class="n">exclude</span> <span class="s">&quot;*.txt&quot;</span>
<span class="n">cat</span> <span class="n">list</span>
   <span class="n">filea</span>
   <span class="n">fileb</span>
<span class="n">tar</span> <span class="o">-</span><span class="n">cf</span> <span class="n">arch</span><span class="p">.</span><span class="n">tar</span> <span class="o">*</span> <span class="o">-</span><span class="n">X</span> <span class="n">list</span>
</pre></div>


<p>排除版本控制文件</p>
<div class="highlight"><pre><span class="n">tar</span> <span class="o">--</span><span class="n">exclude</span><span class="o">-</span><span class="n">vcs</span> <span class="o">-</span><span class="n">czvvf</span> <span class="n">source</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">gz</span> <span class="n">files</span>
</pre></div>


<p>打印总字节数</p>
<div class="highlight"><pre><span class="n">tar</span> <span class="o">-</span><span class="n">cf</span> <span class="n">arc</span><span class="p">.</span><span class="n">tar</span> <span class="o">*</span> <span class="o">--</span><span class="n">exclude</span> <span class="s">&quot;*.txt&quot;</span> <span class="o">--</span><span class="n">totals</span>
</pre></div>


<h3>cpio</h3>
<p>归档，保留文件属性（权限、所有权等）</p>
<div class="highlight"><pre><span class="n">echo</span> <span class="n">file1</span> <span class="n">file2</span> <span class="o">|</span> <span class="n">cpio</span> <span class="o">-</span><span class="n">ov</span> <span class="o">&gt;</span> <span class="n">archive</span><span class="p">.</span><span class="n">cpio</span>
<span class="o">-</span><span class="n">o</span> <span class="err">指定输出</span>
<span class="o">-</span><span class="n">v</span> <span class="err">打印归档文件列表</span>
</pre></div>


<p>列出cpio中的文件内容</p>
<div class="highlight"><pre><span class="n">cpio</span> <span class="o">-</span><span class="n">it</span> <span class="o">&lt;</span> <span class="n">archive</span><span class="p">.</span><span class="n">cpio</span>
<span class="o">-</span><span class="n">i</span><span class="err">指定输入</span>
<span class="o">-</span><span class="n">t</span><span class="err">列出归档文件中的内容</span>
</pre></div>


<h3>gzip</h3>
<p>压缩，会删除源文件</p>
<div class="highlight"><pre><span class="n">gzip</span> <span class="n">filename</span>
<span class="cp">#got filename.gz</span>
</pre></div>


<p>解压</p>
<div class="highlight"><pre><span class="n">gunzip</span> <span class="n">filename</span><span class="p">.</span><span class="n">gz</span>
</pre></div>


<p>列出文件属性信息</p>
<div class="highlight"><pre><span class="n">gzip</span> <span class="o">-</span><span class="n">l</span> <span class="n">text</span><span class="p">.</span><span class="n">gz</span>
</pre></div>


<p>stdin读入文件并写出到stdout</p>
<div class="highlight"><pre><span class="n">cat</span> <span class="n">file</span> <span class="o">|</span> <span class="n">gzip</span> <span class="o">-</span><span class="n">c</span> <span class="o">&gt;</span> <span class="n">file</span><span class="p">.</span><span class="n">gz</span>
</pre></div>


<p>压缩归档文件</p>
<div class="highlight"><pre><span class="n">tar</span> <span class="o">-</span><span class="n">czvvf</span> <span class="n">archive</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">gz</span> <span class="p">[</span><span class="n">files</span><span class="p">]</span>
<span class="n">or</span>
<span class="n">tar</span> <span class="o">-</span><span class="n">cvvf</span> <span class="n">archive</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">gz</span> <span class="p">[</span><span class="n">files</span><span class="p">]</span>
<span class="n">gzip</span> <span class="n">archive</span><span class="p">.</span><span class="n">tar</span>
</pre></div>


<p>指定压缩率</p>
<div class="highlight"><pre><span class="mi">1</span><span class="o">-</span><span class="mi">9</span><span class="p">,</span><span class="mi">1</span><span class="err">最低，但速度最快</span>
<span class="n">gzip</span> <span class="o">-</span><span class="mi">9</span> <span class="n">test</span><span class="p">.</span><span class="n">img</span>
</pre></div>


<h3>zcat</h3>
<p>无需解压缩，直接从.gz中提取内容</p>
<div class="highlight"><pre><span class="n">zcat</span> <span class="n">test</span><span class="p">.</span><span class="n">gz</span>
</pre></div>


<h3>bzip</h3>
<p>更大的压缩率</p>
<div class="highlight"><pre><span class="n">bzip2</span> <span class="n">filename</span>
</pre></div>


<p>解压缩</p>
<div class="highlight"><pre><span class="n">bunzip2</span> <span class="n">filename</span><span class="p">.</span><span class="n">bz2</span>
</pre></div>


<p>stdin到stdout</p>
<div class="highlight"><pre><span class="n">cat</span> <span class="n">file</span> <span class="o">&gt;</span> <span class="n">bzip2</span> <span class="o">-</span><span class="n">c</span> <span class="o">&gt;</span> <span class="n">file</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">bz2</span>
</pre></div>


<p>压缩归档</p>
<div class="highlight"><pre><span class="n">tar</span> <span class="o">-</span><span class="n">cjvvf</span> <span class="n">archive</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">bz2</span> <span class="p">[</span><span class="n">files</span><span class="p">]</span>
<span class="n">or</span>
<span class="n">tar</span> <span class="o">-</span><span class="n">cvvf</span> <span class="n">archive</span><span class="p">.</span><span class="n">tar</span> <span class="p">[</span><span class="n">files</span><span class="p">]</span>
<span class="n">bzip2</span> <span class="n">archive</span><span class="p">.</span><span class="n">tar</span>
</pre></div>


<p>保留输入文件</p>
<div class="highlight"><pre><span class="n">bunzip2</span> <span class="n">test</span><span class="p">.</span><span class="n">bz2</span> <span class="o">-</span><span class="n">k</span>
</pre></div>


<p>压缩率</p>
<div class="highlight"><pre><span class="n">bzip2</span> <span class="o">-</span><span class="mi">9</span> <span class="n">test</span><span class="p">.</span><span class="n">img</span>
</pre></div>


<h3>lzma</h3>
<p>压缩</p>
<div class="highlight"><pre><span class="n">lzma</span> <span class="n">filename</span>
</pre></div>


<p>解压</p>
<div class="highlight"><pre><span class="n">unlzma</span> <span class="n">filename</span><span class="p">.</span><span class="n">lzma</span>
</pre></div>


<p>stdin到stdout</p>
<div class="highlight"><pre><span class="n">cat</span> <span class="n">file</span> <span class="o">|</span> <span class="n">lzma</span> <span class="o">-</span><span class="n">c</span> <span class="o">&gt;</span> <span class="n">file</span><span class="p">.</span><span class="n">lzma</span>
</pre></div>


<p>创建归档</p>
<div class="highlight"><pre><span class="n">tar</span> <span class="o">-</span><span class="n">cavvf</span> <span class="n">archive</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">lzma</span> <span class="p">[</span><span class="n">files</span><span class="p">]</span>
</pre></div>


<p>保留输入文件</p>
<div class="highlight"><pre><span class="n">lzma</span> <span class="n">test</span><span class="p">.</span><span class="n">bz2</span> <span class="o">-</span><span class="n">k</span>
</pre></div>


<p>压缩率</p>
<div class="highlight"><pre><span class="n">lzma</span> <span class="o">-</span><span class="mi">9</span> <span class="n">test</span><span class="p">.</span><span class="n">img</span>
</pre></div>


<h3>zip</h3>
<p>压缩</p>
<div class="highlight"><pre><span class="n">zip</span> <span class="n">archive_name</span><span class="p">.</span><span class="n">zip</span> <span class="p">[</span><span class="n">source</span> <span class="n">files</span><span class="o">/</span><span class="n">dirs</span><span class="p">]</span>
</pre></div>


<p>对目录和文件进行递归操作</p>
<div class="highlight"><pre><span class="n">zip</span> <span class="o">-</span><span class="n">r</span> <span class="n">archive</span><span class="p">.</span><span class="n">zip</span> <span class="n">folder1</span> <span class="n">file2</span>
</pre></div>


<h3>base64</h3>
<p>编码</p>
<div class="highlight"><pre><span class="n">base64</span> <span class="n">filename</span> <span class="o">&gt;</span> <span class="n">outfile</span>
<span class="n">cat</span> <span class="n">file</span> <span class="o">|</span> <span class="n">base64</span> <span class="o">&gt;</span> <span class="n">outfile</span>
</pre></div>


<p>解码</p>
<div class="highlight"><pre><span class="n">base64</span> <span class="o">-</span><span class="n">d</span> <span class="n">file</span> <span class="o">&gt;</span> <span class="n">outfile</span>
</pre></div>


<h3>md5sum</h3>
<p>单向散列</p>
<div class="highlight"><pre><span class="n">md5sum</span> <span class="n">file</span>
<span class="n">sha1sum</span> <span class="n">file</span>
</pre></div>


<h3>rsync</h3>
<p>要确保远端安装了 openssh
从一个目录复制到另一个目录</p>
<div class="highlight"><pre><span class="n">rsync</span> <span class="o">-</span><span class="n">av</span> <span class="n">source_path</span> <span class="n">dest_path</span>
<span class="o">-</span><span class="n">a</span> <span class="err">进行归档</span>  <span class="o">-</span><span class="n">v</span><span class="err">打印细节</span>
<span class="err">路径可以使本地，也可以是远端路径</span>
</pre></div>


<p>备份到远程服务器</p>
<div class="highlight"><pre><span class="n">rsync</span> <span class="o">-</span><span class="n">av</span> <span class="n">source_path</span> <span class="n">user</span><span class="err">@</span><span class="n">host</span><span class="o">:</span><span class="n">PATH</span>
<span class="err">可以反向</span>
</pre></div>


<p>改善传输速度</p>
<div class="highlight"><pre><span class="n">rsync</span> <span class="o">-</span><span class="n">avz</span> <span class="n">source</span> <span class="n">destination</span>
</pre></div>


<p>排除文件</p>
<div class="highlight"><pre><span class="n">rsync</span> <span class="o">-</span><span class="n">avz</span> <span class="n">source</span> <span class="n">dest</span> <span class="o">--</span><span class="n">exclude</span> <span class="s">&quot;*.txt&quot;</span>
                       <span class="o">--</span><span class="n">exclude</span><span class="o">-</span><span class="n">from</span> <span class="n">FILEPATH</span>
</pre></div>


<p>更新备份时，删除不存在的文件</p>
<div class="highlight"><pre><span class="n">rsync</span> <span class="o">-</span><span class="n">avz</span> <span class="n">source</span> <span class="n">dest</span> <span class="o">--</span><span class="n">delete</span>
</pre></div>


<h3>git</h3>
<p>初始化目录</p>
<div class="highlight"><pre><span class="n">git</span> <span class="n">init</span>
</pre></div>


<p>配置用户信息</p>
<div class="highlight"><pre><span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="n">global</span> <span class="n">user</span><span class="p">.</span><span class="n">name</span> <span class="s">&quot;wklken&quot;</span>
<span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="n">global</span> <span class="n">user</span><span class="p">.</span><span class="n">email</span> <span class="s">&quot;wklken@yeah.net&quot;</span>
</pre></div>


<p>加到远端</p>
<div class="highlight"><pre><span class="n">git</span> <span class="n">remote</span> <span class="n">add</span> <span class="n">origin</span> <span class="n">user</span><span class="err">@</span><span class="n">remotehost</span><span class="o">:/</span><span class="n">home</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">backup</span><span class="p">.</span><span class="n">git</span>
<span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="n">master</span>
</pre></div>


<p>添加</p>
<div class="highlight"><pre><span class="n">git</span> <span class="n">add</span> <span class="o">*</span>
</pre></div>


<p>删除</p>
<div class="highlight"><pre><span class="n">git</span> <span class="n">rm</span> <span class="o">*</span><span class="p">.</span><span class="n">py</span>
</pre></div>


<p>标记一个检查点</p>
<div class="highlight"><pre><span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s">&quot;Commit message&quot;</span>
</pre></div>


<p>查看日志</p>
<div class="highlight"><pre><span class="n">git</span> <span class="n">log</span>
</pre></div>


<p>回滚到某个版本</p>
<div class="highlight"><pre><span class="n">git</span> <span class="n">checkout</span> <span class="n">hashid</span> <span class="p">[</span> <span class="n">filename</span> <span class="p">]</span>
</pre></div>


<p>克隆</p>
<div class="highlight"><pre><span class="n">git</span> <span class="n">clone</span> <span class="n">url</span>
</pre></div>


<h3>dd</h3>
<p>语法说明</p>
<div class="highlight"><pre><span class="n">dd</span> <span class="k">if</span><span class="o">=</span><span class="n">SOURCE</span> <span class="n">of</span><span class="o">=</span><span class="n">TARGET</span> <span class="n">bs</span><span class="o">=</span><span class="n">BLOCK_SIZE</span> <span class="n">count</span><span class="o">=</span><span class="n">COUNT</span>
<span class="k">if</span><span class="o">/</span><span class="n">of</span>  <span class="err">输入</span><span class="o">/</span><span class="err">输出文件或设备路径</span>
<span class="n">bs</span><span class="err">块大小</span>
<span class="n">count</span> <span class="err">限制复制到目标的字节数</span>

<span class="n">dd</span> <span class="k">if</span><span class="o">=/</span><span class="n">dev</span><span class="o">/</span><span class="n">zero</span> <span class="n">of</span><span class="o">=/</span><span class="n">dev</span><span class="o">/</span><span class="n">sda1</span>
<span class="n">dd</span> <span class="k">if</span><span class="o">=/</span><span class="n">dev</span><span class="o">/</span><span class="n">cdrom</span> <span class="n">of</span><span class="o">=</span><span class="n">cdrom</span><span class="p">.</span><span class="n">iso</span>
</pre></div>


<h3>mount</h3>
<p>挂载镜像</p>
<div class="highlight"><pre><span class="n">mount</span> <span class="o">-</span><span class="n">o</span> <span class="n">loop</span> <span class="n">file</span><span class="p">.</span><span class="n">img</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">mount_point</span>
</pre></div>


<h2>网络相关</h2>
<h3>ifconfig</h3>
<p>显示网络接口、子网掩码等详细信息</p>
<div class="highlight"><pre><span class="n">ifconfig</span>
</pre></div>


<p>打印某个特定网络接口</p>
<div class="highlight"><pre><span class="n">ifconfig</span> <span class="n">iface_name</span>
</pre></div>


<p>设置网络接口ip</p>
<div class="highlight"><pre><span class="n">ifconfig</span> <span class="n">wlan0</span> <span class="mf">192.168.0.80</span>
</pre></div>


<p>dns</p>
<div class="highlight"><pre><span class="n">cat</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">resolv</span><span class="p">.</span><span class="n">conf</span>

<span class="n">host</span> <span class="n">google</span><span class="p">.</span><span class="n">com</span> <span class="err">#</span><span class="n">Dns</span><span class="err">查找</span>
<span class="n">nslookup</span> <span class="n">google</span><span class="p">.</span><span class="n">com</span> <span class="err">#更详细信息</span>
</pre></div>


<p>修改dns/host</p>
<div class="highlight"><pre><span class="n">echo</span> <span class="n">nameserver</span> <span class="n">IP_ADDRESS</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">resolv</span><span class="p">.</span><span class="n">conf</span>
<span class="n">echo</span> <span class="n">ip</span> <span class="n">domain</span> <span class="o">&gt;&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">hosts</span>
</pre></div>


<p>ping</p>
<div class="highlight"><pre><span class="n">ping</span> <span class="n">www</span><span class="p">.</span><span class="n">baidu</span><span class="p">.</span><span class="n">com</span>
</pre></div>


<p>路由信息</p>
<div class="highlight"><pre><span class="n">route</span>
<span class="n">route</span> <span class="o">-</span><span class="n">n</span>
</pre></div>


<p>设置默认网关</p>
<div class="highlight"><pre><span class="n">route</span> <span class="n">add</span> <span class="k">default</span> <span class="n">gw</span> <span class="mf">192.168.0.1</span> <span class="n">wlan0</span>
</pre></div>


<p>trace_route</p>
<div class="highlight"><pre><span class="n">traceroute</span> <span class="n">google</span><span class="p">.</span><span class="n">com</span>
</pre></div>


<h3>ping</h3>
<p>基本</p>
<div class="highlight"><pre><span class="n">ping</span> <span class="n">ADDRESS</span>  <span class="err">#主机名，域名或</span><span class="n">ip</span>
</pre></div>


<p>限制发送分组数</p>
<div class="highlight"><pre><span class="n">ping</span> <span class="n">ADDRESS</span> <span class="o">-</span><span class="n">c</span> <span class="n">COUNT</span>
</pre></div>


<h3>fping</h3>
<p>同时ping一组ip, 而且响应非常快</p>
<div class="highlight"><pre><span class="n">fping</span> <span class="o">-</span><span class="n">a</span> <span class="n">ip1</span> <span class="n">ip2</span> <span class="o">-</span><span class="n">g</span>
<span class="n">fping</span> <span class="o">-</span><span class="n">a</span> <span class="mf">192.160.1</span><span class="o">/</span><span class="mi">24</span> <span class="o">-</span><span class="n">g</span>
<span class="n">fping</span> <span class="o">-</span><span class="n">a</span> <span class="o">&lt;</span> <span class="n">ip</span><span class="p">.</span><span class="n">list</span>
</pre></div>


<p>进行dns查询</p>
<div class="highlight"><pre><span class="n">fping</span> <span class="o">-</span><span class="n">a</span> <span class="o">-</span><span class="n">d</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">null</span>  <span class="o">&lt;</span> <span class="n">ip</span><span class="p">.</span><span class="n">list</span>
</pre></div>


<h3>lftp</h3>
<p>基本用法</p>
<div class="highlight"><pre><span class="n">lftp</span> <span class="n">username</span><span class="err">@</span><span class="n">ftphost</span>
<span class="n">cd</span> <span class="n">dir</span>
<span class="n">lcd</span><span class="err">改变本地主机目录</span>
<span class="n">mkdir</span> <span class="err">创建目录</span>
<span class="n">get</span><span class="o">/</span><span class="n">put</span> <span class="err">下载上传</span>
<span class="n">quit</span><span class="err">退出</span>
</pre></div>


<h3>scp</h3>
<p>拷贝文件</p>
<div class="highlight"><pre><span class="n">scp</span> <span class="n">filename</span> <span class="n">user</span><span class="err">@</span><span class="n">remotehost</span><span class="o">:/</span><span class="n">home</span><span class="o">/</span><span class="n">pat</span>
<span class="n">ip</span><span class="err">或主机名均可</span>

<span class="n">scp</span> <span class="n">SOURCE</span> <span class="n">DESTINATION</span>
</pre></div>


<p>递归复制</p>
<div class="highlight"><pre><span class="n">scp</span> <span class="o">-</span><span class="n">r</span> <span class="n">dir1</span> <span class="n">user</span><span class="err">@</span><span class="n">remotehost</span><span class="o">:/</span><span class="n">home</span><span class="o">/</span><span class="n">backup</span>
</pre></div>


<h3>SSH</h3>
<p>连接远程</p>
<div class="highlight"><pre><span class="n">ssh</span> <span class="n">username</span><span class="err">@</span><span class="n">remote_host</span>
<span class="n">ssh</span> <span class="o">-</span><span class="n">p</span> <span class="n">port</span> <span class="n">username</span><span class="err">@</span><span class="n">remote_host</span>
</pre></div>


<p>执行命令</p>
<div class="highlight"><pre><span class="n">ssh</span> <span class="n">username</span><span class="err">@</span><span class="n">remote_host</span> <span class="err">&#39;</span><span class="n">cmd1</span><span class="p">;</span> <span class="n">cmd2</span><span class="err">&#39;</span> <span class="o">&gt;</span> <span class="n">stdout</span><span class="p">.</span><span class="n">txt</span> <span class="mi">2</span><span class="o">&gt;</span><span class="n">errors</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<p>压缩功能</p>
<div class="highlight"><pre><span class="n">ssh</span> <span class="o">-</span><span class="n">C</span> <span class="n">user</span><span class="err">@</span><span class="n">hostname</span> <span class="err">&#39;</span><span class="n">cmds</span><span class="err">&#39;</span>
</pre></div>


<h3>lsof</h3>
<p>列出系统中开放端口及运行在端口上的服务</p>
<div class="highlight"><pre><span class="n">lsof</span> <span class="o">-</span><span class="n">i</span>
</pre></div>


<h3>netstat</h3>
<p>查看开放端口和服务</p>
<div class="highlight"><pre><span class="n">netstat</span> <span class="o">-</span><span class="n">tnp</span>
</pre></div>


<h2>磁盘和系统</h2>
<h3>du</h3>
<p>查看占用磁盘空间</p>
<div class="highlight"><pre><span class="n">du</span> <span class="n">FILENAME1</span> <span class="n">FILENAME2</span>
</pre></div>


<p>查看目录</p>
<div class="highlight"><pre><span class="n">du</span> <span class="o">-</span><span class="n">a</span> <span class="n">dir</span>
</pre></div>


<p>以KB,MB或块为单位展示</p>
<div class="highlight"><pre><span class="n">du</span> <span class="o">-</span><span class="n">h</span> <span class="n">FILENAME1</span>
</pre></div>


<p>显示总计情况</p>
<div class="highlight"><pre><span class="n">du</span> <span class="o">-</span><span class="n">c</span> <span class="n">FILENAME1</span>
</pre></div>


<p>只显示合计</p>
<div class="highlight"><pre><span class="n">du</span> <span class="o">-</span><span class="n">s</span> <span class="n">FILENAME1</span>
</pre></div>


<p>以特定单位打印</p>
<div class="highlight"><pre><span class="n">du</span> <span class="o">-</span><span class="n">b</span><span class="o">/-</span><span class="n">k</span><span class="o">/-</span><span class="n">m</span><span class="o">/-</span><span class="n">B</span> <span class="n">FILES</span>
</pre></div>


<p>排除部分文件</p>
<div class="highlight"><pre><span class="n">du</span> <span class="o">--</span><span class="n">exclude</span> <span class="s">&quot;*.txt&quot;</span> <span class="kt">DIR</span>
   <span class="o">--</span><span class="n">exclude</span><span class="o">-</span><span class="n">from</span> <span class="n">EXCLUDE</span><span class="p">.</span><span class="n">txt</span> <span class="kt">DIR</span>
</pre></div>


<p>指定最深层级</p>
<div class="highlight"><pre><span class="n">du</span> <span class="o">--</span><span class="n">max</span><span class="o">-</span><span class="n">depth</span> <span class="mi">2</span> <span class="kt">DIR</span>
</pre></div>


<h3>df</h3>
<p>查看磁盘可用空间</p>
<div class="highlight"><pre><span class="n">df</span>
<span class="n">df</span> <span class="o">-</span><span class="n">h</span>
</pre></div>


<h3>time</h3>
<p>计算命令执行时间</p>
<div class="highlight"><pre><span class="n">time</span> <span class="n">COMMAND</span>

<span class="n">user</span> <span class="err">真正用于执行进程所花得时间</span>
</pre></div>


<p>写入文件</p>
<div class="highlight"><pre><span class="n">time</span> <span class="o">-</span><span class="n">o</span> <span class="n">output</span><span class="p">.</span><span class="n">txt</span> <span class="n">COMMAND</span>
<span class="n">time</span> <span class="o">-</span><span class="n">a</span> <span class="n">output</span><span class="p">.</span><span class="n">txt</span> <span class="n">COMMAND</span> <span class="err">#追加</span>
</pre></div>


<p>格式化输出</p>
<div class="highlight"><pre><span class="n">time</span> <span class="o">-</span><span class="n">f</span> <span class="s">&quot;Time: %U&quot;</span>  <span class="o">-</span><span class="n">a</span> <span class="o">-</span><span class="n">o</span> <span class="n">timing</span><span class="p">.</span><span class="n">log</span> <span class="n">uname</span>
<span class="n">real</span> <span class="o">%</span><span class="n">e</span>
<span class="n">user</span> <span class="o">%</span><span class="n">U</span>
<span class="n">sys</span> <span class="o">%</span><span class="n">S</span>
</pre></div>


<h3>who</h3>
<p>当前用户登陆信息</p>
<div class="highlight"><pre><span class="n">who</span>
<span class="n">or</span>
<span class="n">w</span>
</pre></div>


<p>当前登陆主机的列表</p>
<div class="highlight"><pre><span class="n">users</span>
</pre></div>


<h3>uptime</h3>
<p>查看系统已经通电运行多长时间了</p>
<div class="highlight"><pre><span class="n">uptime</span>
<span class="cp">#也可以看到负载</span>
</pre></div>


<h3>last</h3>
<p>前一次启动会话信息</p>
<div class="highlight"><pre><span class="n">last</span>
</pre></div>


<p>获取单个用户</p>
<div class="highlight"><pre><span class="n">last</span> <span class="n">USER</span>
</pre></div>


<h3>watch</h3>
<p>在终端中以固定间隔监视命令输出</p>
<div class="highlight"><pre><span class="n">watch</span> <span class="n">ls</span>
<span class="cp">#default 2s</span>

<span class="n">watch</span> <span class="o">-</span><span class="n">n</span> <span class="mi">5</span> <span class="n">ls</span>
</pre></div>


<p>颜色标示</p>
<div class="highlight"><pre><span class="n">watch</span> <span class="o">-</span><span class="n">d</span> <span class="err">&#39;</span><span class="n">COMMAND</span><span class="err">&#39;</span>
</pre></div>


<h3>inotifywait</h3>
<p>很有用的功能</p>
<div class="highlight"><pre><span class="n">inotifywait</span> <span class="o">-</span><span class="n">m</span> <span class="o">-</span><span class="n">r</span> <span class="o">-</span><span class="n">e</span> <span class="n">create</span><span class="p">,</span><span class="n">move</span><span class="p">,</span><span class="n">delete</span> <span class="err">$</span><span class="n">path</span> <span class="o">-</span><span class="n">q</span>
</pre></div>


<h2>进程和线程</h2>
<h3>ps</h3>
<p>查看进程信息</p>
<div class="highlight"><pre><span class="n">ps</span>
<span class="cp">#当前终端</span>
</pre></div>


<p>显示更多信息</p>
<div class="highlight"><pre><span class="n">ps</span> <span class="o">-</span><span class="n">f</span>
<span class="cp">#当前终端</span>
</pre></div>


<p>系统中所有</p>
<div class="highlight"><pre><span class="n">ps</span> <span class="o">-</span><span class="n">e</span>
<span class="n">ps</span> <span class="o">-</span><span class="n">ax</span>
</pre></div>


<p>命令格式</p>
<div class="highlight"><pre><span class="n">ps</span> <span class="p">[</span><span class="n">OTHER</span> <span class="n">OPTIONS</span><span class="p">]</span> <span class="o">-</span><span class="n">o</span> <span class="n">par1</span><span class="p">,</span><span class="n">par2</span><span class="p">,</span><span class="n">par3</span>
<span class="n">ps</span> <span class="o">-</span><span class="n">eo</span> <span class="n">comm</span><span class="p">,</span><span class="n">pcpu</span> <span class="o">|</span> <span class="n">head</span>
<span class="n">pmem</span> <span class="err">内存使用率，</span><span class="n">comm</span><span class="err">可执行文件名</span><span class="p">,</span><span class="n">user</span><span class="err">启动进程的用户</span><span class="p">,</span><span class="n">etime</span><span class="err">启动后度过的时间</span>
</pre></div>


<p>设置升序降序</p>
<div class="highlight"><pre><span class="n">ps</span> <span class="o">-</span><span class="n">eo</span> <span class="n">comm</span><span class="p">,</span><span class="n">pcpu</span> <span class="o">--</span><span class="n">sort</span> <span class="o">-</span><span class="n">pcpu</span> <span class="o">|</span> <span class="n">head</span>
<span class="o">+</span><span class="err">升序，</span><span class="o">-</span><span class="err">降序</span>
</pre></div>


<p>找出给定命令名对应进程ID</p>
<div class="highlight"><pre><span class="n">ps</span> <span class="o">-</span><span class="n">C</span> <span class="n">COMMAND_NAME</span>
<span class="n">ps</span> <span class="o">-</span><span class="n">C</span> <span class="n">bash</span> <span class="o">-</span><span class="n">o</span> <span class="n">pid</span><span class="o">=</span>
</pre></div>


<p>进程线程相关</p>
<div class="highlight"><pre><span class="n">ps</span> <span class="o">-</span><span class="n">eLf</span> <span class="o">--</span><span class="n">sort</span> <span class="o">-</span><span class="n">nlwp</span> <span class="o">|</span> <span class="n">head</span>
</pre></div>


<h3>pgrep</h3>
<p>基本用法</p>
<div class="highlight"><pre><span class="n">pgrep</span> <span class="n">bash</span>
</pre></div>


<p>指定进程的用户</p>
<div class="highlight"><pre><span class="n">pgrep</span> <span class="o">-</span><span class="n">u</span> <span class="n">root</span><span class="p">,</span><span class="n">slynux</span> <span class="n">COMMAND</span>
</pre></div>


<p>返回匹配进程数</p>
<div class="highlight"><pre><span class="n">pgrep</span> <span class="o">-</span><span class="n">c</span> <span class="n">COMANND</span>
</pre></div>


<h3>top</h3>
<p>查看占用cpu最多的进程列表</p>
<div class="highlight"><pre><span class="n">top</span>
</pre></div>


<h3>kill</h3>
<p>列出可用信号</p>
<div class="highlight"><pre><span class="n">kill</span> <span class="o">-</span><span class="n">l</span>
</pre></div>


<p>终止一个进程</p>
<div class="highlight"><pre><span class="n">kill</span> <span class="n">PROCESS_ID_LIST</span>
</pre></div>


<p>强杀进程</p>
<div class="highlight"><pre><span class="n">kill</span> <span class="o">-</span><span class="mi">9</span> <span class="n">PROCESS_ID</span>
</pre></div>


<p>杀死一组命令</p>
<div class="highlight"><pre><span class="n">killall</span> <span class="n">process_name</span>
<span class="n">killall</span> <span class="o">-</span><span class="mi">9</span> <span class="n">process_name</span>

<span class="err">指定用户</span>
<span class="n">killall</span> <span class="o">-</span><span class="n">u</span> <span class="n">USERNAME</span> <span class="n">process_name</span>
</pre></div>


<h3>pkill</h3>
<p>杀，接受进程名</p>
<div class="highlight"><pre><span class="n">pkill</span> <span class="n">process_name</span>
<span class="n">pkill</span> <span class="o">-</span><span class="n">s</span> <span class="n">SIGNAL</span> <span class="n">process_name</span>
</pre></div>


<h3>which</h3>
<p>查找PATH下某个命令位置</p>
<h3>whereis</h3>
<p>类似which，多了命令手册位置，源代码位置</p>
<h3>file</h3>
<p>确定文件类型</p>
<h3>whatis</h3>
<p>对命令的简短描述</p>
<h3>hostname</h3>
<p>当前主机名</p>
<h3>uname</h3>
<div class="highlight"><pre><span class="err">主机名</span>
<span class="n">uname</span> <span class="o">-</span><span class="n">n</span>

<span class="cp">#内核版本，硬件架构等</span>
<span class="n">uname</span> <span class="o">-</span><span class="n">a</span>

<span class="cp">#内核发行版本</span>
<span class="n">uname</span> <span class="o">-</span><span class="n">r</span>

<span class="err">主机类型</span>
<span class="n">uname</span> <span class="o">-</span><span class="n">m</span>

<span class="n">cpu</span><span class="err">相关信息</span>
<span class="n">cat</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">cpuinfo</span>

<span class="err">内存信息</span>
<span class="n">cat</span> <span class="o">/</span><span class="n">proc</span><span class="o">/</span><span class="n">meminfo</span>
</pre></div>


<h3>crontab</h3>
<p>格式</p>
<div class="highlight"><pre><span class="o">*</span> <span class="o">*</span> <span class="o">*</span> <span class="o">*</span> <span class="o">*</span> <span class="n">cmd</span>
<span class="err">分钟</span><span class="p">(</span><span class="mi">0</span><span class="o">-</span><span class="mi">59</span><span class="p">)</span><span class="err">，小时</span><span class="p">(</span><span class="mi">0</span><span class="o">-</span><span class="mi">23</span><span class="p">)</span><span class="err">，天</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="mi">31</span><span class="p">)</span><span class="err">，月份</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="mi">12</span><span class="p">)</span><span class="err">，工作日</span><span class="p">(</span><span class="mi">0</span><span class="o">-</span><span class="mi">6</span><span class="p">)</span>

<span class="n">A</span><span class="p">,</span><span class="n">B</span>  <span class="n">A</span> <span class="n">and</span> <span class="n">B</span>
<span class="err">*/</span><span class="n">C</span>  <span class="n">every</span> <span class="n">C</span>
</pre></div>


<p>查看</p>
<div class="highlight"><pre><span class="n">crontab</span> <span class="o">-</span><span class="n">l</span>
<span class="n">crontab</span> <span class="o">-</span><span class="n">l</span> <span class="o">-</span><span class="n">u</span> <span class="n">slynux</span>
</pre></div>


<p>编辑</p>
<div class="highlight"><pre><span class="n">crontab</span> <span class="o">-</span><span class="n">e</span>
</pre></div>


<p>移除</p>
<div class="highlight"><pre><span class="n">crontab</span> <span class="o">-</span><span class="n">r</span>
<span class="n">crontab</span> <span class="o">-</span><span class="n">u</span> <span class="n">slynux</span> <span class="o">-</span><span class="n">r</span>
</pre></div>


<p>可以在crontab 中加入环境变量</p>

<p><a href="http://wklken.github.io/posts/2013/07/04/note-of-linux-shell-scripting-cookbook.html#disqus_thread">评论</a></p>
                </article>
                                            <section id="content" class="body">
                    <h1>其他文章</h1>
                    <hr />
                        <ol id="posts-list" class="hfeed">
                                    
        		 
            			<li align="left">
                        <h1 class="blog-title"><a href="http://wklken.github.io/posts/2013/07/04/summary-02-worktwoyear.html" rel="bookmark" title="Permalink to 工作两周年小结">工作两周年小结</a></h1>
		    </li>
                
        		 
            			<li align="left">
                        <h1 class="blog-title"><a href="http://wklken.github.io/posts/2013/06/11/linux-my-vim.html" rel="bookmark" title="Permalink to 我的vim配置及说明【k-vim】">我的vim配置及说明【k-vim】</a></h1>
		    </li>
                
        		 
            			<li align="left">
                        <h1 class="blog-title"><a href="http://wklken.github.io/posts/2013/03/25/python-tool-fabric.html" rel="bookmark" title="Permalink to Python fabric实现远程操作和部署">Python fabric实现远程操作和部署</a></h1>
		    </li>
                
        		 
            			<li align="left">
                        <h1 class="blog-title"><a href="http://wklken.github.io/posts/2013/03/16/python-base-builtins.html" rel="bookmark" title="Permalink to Python-基础-内置函数小结">Python-基础-内置函数小结</a></h1>
		    </li>
                
        		 
            			<li align="left">
                        <h1 class="blog-title"><a href="http://wklken.github.io/posts/2013/03/16/python-base-file.html" rel="bookmark" title="Permalink to Python-基础-文件处理小结">Python-基础-文件处理小结</a></h1>
		    </li>
                
        		 
            			<li align="left">
                        <h1 class="blog-title"><a href="http://wklken.github.io/posts/2013/03/16/python-base-function.html" rel="bookmark" title="Permalink to Python-基础-函数小结">Python-基础-函数小结</a></h1>
		    </li>
                
        		 
            			<li align="left">
                        <h1 class="blog-title"><a href="http://wklken.github.io/posts/2013/03/16/python-base-introduction.html" rel="bookmark" title="Permalink to Python-基础-简介/入门">Python-基础-简介/入门</a></h1>
		    </li>
                
        		 
            			<li align="left">
                        <h1 class="blog-title"><a href="http://wklken.github.io/posts/2013/03/10/python-base-extra-math.html" rel="bookmark" title="Permalink to Python-基础-数字处理相关模块">Python-基础-数字处理相关模块</a></h1>
		    </li>
                
        		 
            			<li align="left">
                        <h1 class="blog-title"><a href="http://wklken.github.io/posts/2013/03/10/python-base-set.html" rel="bookmark" title="Permalink to Python-基础-集合小结">Python-基础-集合小结</a></h1>
		    </li>
                
        		 
            			<li align="left">
                        <h1 class="blog-title"><a href="http://wklken.github.io/posts/2013/03/10/python-base-string.html" rel="bookmark" title="Permalink to Python-基础-字符串小结">Python-基础-字符串小结</a></h1>
		    </li>
                
        		 
            			<li align="left">
                        <h1 class="blog-title"><a href="http://wklken.github.io/posts/2013/03/09/python-base-dict.html" rel="bookmark" title="Permalink to Python-基础-字典小结">Python-基础-字典小结</a></h1>
		    </li>
                
        		 
            			<li align="left">
                        <h1 class="blog-title"><a href="http://wklken.github.io/posts/2013/03/09/python-base-math.html" rel="bookmark" title="Permalink to Python-基础-数字小结">Python-基础-数字小结</a></h1>
		    </li>
                
        		 
            			<li align="left">
                        <h1 class="blog-title"><a href="http://wklken.github.io/posts/2013/03/09/python-base-tuple.html" rel="bookmark" title="Permalink to Python-基础-元组小结">Python-基础-元组小结</a></h1>
		    </li>
                
        		 
            			<li align="left">
                        <h1 class="blog-title"><a href="http://wklken.github.io/posts/2013/01/02/summary-06-2012end2013begin.html" rel="bookmark" title="Permalink to 写在2012结尾，2013的开始">写在2012结尾，2013的开始</a></h1>
		    </li>
                
        		 
            			<li align="left">
                        <h1 class="blog-title"><a href="http://wklken.github.io/posts/2012/12/30/python-base-list.html" rel="bookmark" title="Permalink to Python-基础-列表及列表解析小结">Python-基础-列表及列表解析小结</a></h1>
		    </li>
                
        		 
            			<li align="left">
                        <h1 class="blog-title"><a href="http://wklken.github.io/posts/2012/11/28/summary-05-quitfirstjob.html" rel="bookmark" title="Permalink to 关于测试开发及其他——写在离职之前">关于测试开发及其他——写在离职之前</a></h1>
		    </li>
                
        		 
            			<li align="left">
                        <h1 class="blog-title"><a href="http://wklken.github.io/posts/2012/10/29/python-base-magic.html" rel="bookmark" title="Permalink to Python-进阶-魔术方法小结(方法运算符重载)">Python-进阶-魔术方法小结(方法运算符重载)</a></h1>
		    </li>
                
        		 
            			<li align="left">
                        <h1 class="blog-title"><a href="http://wklken.github.io/posts/2012/10/27/python-base-decorator.html" rel="bookmark" title="Permalink to Python-进阶-装饰器小结">Python-进阶-装饰器小结</a></h1>
		    </li>
                
        		 
            			<li align="left">
                        <h1 class="blog-title"><a href="http://wklken.github.io/posts/2012/07/04/summary-04-workoneyear.html" rel="bookmark" title="Permalink to 入职一周年小结">入职一周年小结</a></h1>
		    </li>
                            <p class="paginator">
        Page 1 / 2
            <a href="http://wklken.github.io/index2.html">&raquo;</a>
    </p>
                </ol><!-- /#posts-list -->
    </section><!-- /#content -->
	</div>

            

<aside class="sidebar">
<h3 class="published" title="2013-07-04T00:00:00">
               2013年07月04日
</h3>

<p>
<div class="tag">
    Published in <a href="/category/linux.html">linux</a>
  
   
    </div>


<div class="tag">
    tags: <a href="http://wklken.github.io/tag/linux.html">linux</a><a href="http://wklken.github.io/tag/shell.html">shell</a>  
   </div>


</p>

</aside><!-- /.post-info -->		        
	        
	        
	        
	        
	        
	        
	        
	        
	        
	        
	        
	        
	        
	        
	        
	        
	        
	        
	

</div>
</section>
        <section id="extras" class="body">
                        </section><!-- /#extras -->

		<footer id="footer">
		<p class="copyright">
                <address id="about" class="vcard body">
                    Powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Theme by <a href="https://github.com/daker">Adnane Belmadiaf</a> and modify by wklken.

                    <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">License <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">CC BY-NC-ND</a>.
             </address><!-- /#about -->

			 </p>
        </footer><!-- /#contentinfo -->

</body>
</html>